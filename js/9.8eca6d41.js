(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"0322":function(t,e,o){"use strict";var n=o("b6b2"),i=o.n(n);i.a},1967:function(t,e,o){"use strict";var n=o("d03c"),i=o.n(n);i.a},2296:function(t,e,o){},"25e94":function(t,e,o){"use strict";var n=o("e205"),i=o.n(n);i.a},"26cb":function(t,e,o){"use strict";var n=o("2d59"),i=o.n(n);i.a},"2d07":function(t,e,o){"use strict";var n=o("3e46"),i=o.n(n);i.a},"2d59":function(t,e,o){},"3d43":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-layout",{staticClass:"o-layout layout-console",attrs:{view:t.layoutView}},[t.showHeader?o("q-header",{staticClass:"bg-light o-top-header"},[o("editor-toolbar",{directives:[{name:"show",rawName:"v-show",value:"editor"===t.view,expression:"view === 'editor'"}]}),o("notebooks-toolbar",{directives:[{name:"show",rawName:"v-show",value:"notebooks"===t.view,expression:"view === 'notebooks'"}]}),o("search-toolbar",{directives:[{name:"show",rawName:"v-show",value:"search"===t.view,expression:"view === 'search'"}]}),o("quicknote-toolbar",{directives:[{name:"show",rawName:"v-show",value:"quicknote"===t.view,expression:"view === 'quicknote'"}]}),o("my-toolbar",{directives:[{name:"show",rawName:"v-show",value:"my"===t.view,expression:"view === 'my'"}]}),o("system-toolbar",{directives:[{name:"show",rawName:"v-show",value:"system"===t.view,expression:"view === 'system'"}]}),o("share-toolbar",{directives:[{name:"show",rawName:"v-show",value:t.view.indexOf("share")>=0,expression:"view.indexOf('share') >= 0"}],attrs:{type:t.view}})],1):t._e(),o("q-drawer",{attrs:{width:t.sidebarWidth,"mini-width":60,"content-class":"row o-navi bg-secondary text-text o-left-drawer themed"},on:{mouseover:t.onActivitybarHover},model:{value:t.leftDrawerOpen,callback:function(e){t.leftDrawerOpen=e},expression:"leftDrawerOpen"}},[o("section",{staticClass:"col-auto bg-accent text-text-active activity-bar"},[o("nav",{directives:[{name:"show",rawName:"v-show",value:t.view.indexOf("share")<0,expression:"view.indexOf('share')<0"}],staticClass:"row col-12 full-height desktop-only"},[o("q-tabs",{staticClass:"activity-tabs",attrs:{vertical:""},model:{value:t.selectedActivity,callback:function(e){t.selectedActivity=e},expression:"selectedActivity"}},[o("section",{staticClass:"row col-12 full-height"},[o("div",{staticClass:"col-12"},[o("q-tab",{attrs:{name:"home"},on:{click:function(e){return t.onClickTab("home")},mouseover:function(e){return t.onActivitybarHover("home")}}},[o("img",{attrs:{src:"statics/logo.png",width:"30"}}),o("q-tooltip",{attrs:{anchor:"center right",self:"center left"}},[t._v(t._s(t.$t("welcome")))])],1),o("q-tab",{attrs:{icon:"mdi-file-document-box",name:"editor"},on:{click:function(e){return t.onClickTab("editor")},mouseover:function(e){return t.onActivitybarHover("editor")}}},[o("span",{staticClass:"label"},[t._v(t._s(t.$t("note")))]),o("q-tooltip",{attrs:{anchor:"center right",self:"center left"}},[t._v(t._s(t.$t("note")))])],1),o("q-tab",{attrs:{icon:"reorder",name:"quicknote"},on:{click:function(e){return t.onClickTab("quicknote")},mouseover:function(e){return t.onActivitybarHover("quicknote")}}},[o("span",{staticClass:"label"},[t._v(t._s(t.$t("quicknote")))]),o("q-tooltip",{attrs:{anchor:"center right",self:"center left"}},[t._v(t._s(t.$t("quicknote")))])],1),o("q-tab",{attrs:{icon:"person",name:"my"},on:{click:function(e){return t.onClickTab("my")},mouseover:function(e){return t.onActivitybarHover("my")}}},[o("span",{staticClass:"label"},[t._v(t._s(t.$t("my")))]),o("q-tooltip",{attrs:{anchor:"center right",self:"center left"}},[t._v(t._s(t.$t("my")))])],1)],1),o("q-space"),o("div",{staticClass:"row col-12 items-end"},[o("div",{staticClass:"col-12"},[o("q-tab",{attrs:{icon:"settings",name:"system"},on:{click:function(e){return t.onClickTab("system")},mouseover:function(e){return t.onActivitybarHover("system")}}},[o("span",{staticClass:"label"},[t._v(t._s(t.$t("system")))]),o("q-tooltip",{attrs:{anchor:"center right",self:"center left"}},[t._v(t._s(t.$t("setting")))])],1),o("q-separator",{staticClass:"o-separator"}),o("q-btn",{staticClass:"shadow-0 toggle-sidebar",attrs:{icon:t.miniState?"mdi-backburger rotate-180":"mdi-menu-open",square:""},on:{click:t.toggleSidebar,mouseover:function(e){return e.stopPropagation(),t.onActivitybarHover("disable")}}},[o("q-tooltip",{attrs:{anchor:"center right",self:"center left"}},[t._v("\n                    "+t._s(t.miniState?"展开":"收起")+"\n                  ")])],1)],1)])],1)])],1)]),o("section",{staticClass:"col bg-secondary side-bar"},[o("transition",{attrs:{appear:"","enter-active-class":"animated slideInLeft","leave-active-class":"animated slideOutLeft"}},[t.miniState?t._e():o("section",{class:t.miniState?"":"bg-secondary fixed-sidebar"},["tree"===t.naviView?o("notebook-tree",{directives:[{name:"show",rawName:"v-show",value:"editor"===t.view||"notebooks"===t.view||"search"===t.view||"note"===t.view,expression:"view === 'editor' || view === 'notebooks' || view === 'search' || view==='note'"}]}):t._e(),o("share-navi",{directives:[{name:"show",rawName:"v-show",value:t.view.indexOf("share")>=0,expression:"view.indexOf('share') >= 0"}]}),"tree"===t.naviView?o("qtag-tree",{directives:[{name:"show",rawName:"v-show",value:"quicknote"===t.view,expression:"view === 'quicknote'"}]}):t._e(),o("my-navi",{directives:[{name:"show",rawName:"v-show",value:"my"===t.view,expression:"view === 'my'"}]}),o("system-navi",{directives:[{name:"show",rawName:"v-show",value:"system"===t.view,expression:"view === 'system'"}]})],1)])],1),o("transition",{attrs:{appear:"","enter-active-class":"animated slideInLeft","leave-active-class":"animated slideOutLeft"}},[o("section",{directives:[{name:"show",rawName:"v-show",value:t.miniState&&t.activityHovered,expression:"miniState && activityHovered"}],staticClass:"bg-secondary fixed-sidebar",on:{mouseout:function(e){return t.onActivitybarLeave(e)}}},[o("notebook-tree",{directives:[{name:"show",rawName:"v-show",value:"editor"===t.view||"notebooks"===t.view||"search"===t.view||"note"===t.view,expression:"view === 'editor' || view === 'notebooks' || view === 'search' || view==='note'"}]}),o("share-navi",{directives:[{name:"show",rawName:"v-show",value:t.view.indexOf("share")>=0,expression:"view.indexOf('share') >= 0"}]}),o("qtag-tree",{directives:[{name:"show",rawName:"v-show",value:"quicknote"===t.view,expression:"view === 'quicknote'"}]}),o("my-navi",{directives:[{name:"show",rawName:"v-show",value:"my"===t.view,expression:"view === 'my'"}]}),o("system-navi",{directives:[{name:"show",rawName:"v-show",value:"system"===t.view,expression:"view === 'system'"}]})],1)])],1),o("q-page-container",[o("keep-alive",[o("router-view")],1)],1),o("modal-entry"),o("o-user-tour"),t.showNoteTab?o("q-footer",{staticClass:"o-layout-footer bg-light"},[o("o-editor-tabs")],1):t._e()],1)},i=[],a=(o("8e6e"),o("8a81"),o("ac6a"),o("cadf"),o("06db"),o("456d"),o("7f7f"),o("c47a")),r=o.n(a),s=o("5631"),c=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("base-toolbar",{attrs:{title:"Notebook"}},[o("template",{slot:"actions"},[o("q-toolbar-title",{staticClass:"o-toolbar flex"},[o("div",{staticClass:"o-btn-group"},[o("q-btn",{attrs:{flat:""},on:{click:function(e){return t.$router.push("/editor")}}},[o("q-icon",{attrs:{name:"keyboard_backspace"}}),o("q-tooltip",{staticClass:"o-tooltip",attrs:{anchor:"top middle",self:"bottom middle"}},[t._v("\n            "+t._s(t.$t("action.back"))+"\n          ")])],1)],1),o("div",{staticClass:"o-splitter"})])],1)],2)},l=[],u=o("fbe4"),d={name:"notebooks-toolbar",data:function(){return{leftDrawerOpen:!0,terms:"",showSearch:!1,link:""}},components:{BaseToolbar:u["a"]},methods:{onAction:function(t,e){t=(new Date).getTime()+"|"+t,e&&(t+="|"+e),this.$store.commit("setNoteAction",t)},onSearchNotebook:function(t,e){console.log("search",t)},onSelectedNotebook:function(t){console.log("selected",t)},toggleSearch:function(){this.showSearch=!this.showSearch}}},m=d,p=o("2877"),h=Object(p["a"])(m,c,l,!1,null,null,null),f=h.exports,b=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("base-toolbar",{attrs:{title:"Search"}},[o("template",{slot:"actions"},[t.showSearch?t._e():o("q-toolbar-title",{staticClass:"o-toolbar flex"},[o("div",{staticClass:"row items-center q-px-md"},[t._v("\n        "+t._s(t.$t("label.search"))+"\n      ")])])],1)],2)},v=[],w={name:"notebooks-toolbar",data:function(){return{leftDrawerOpen:!0,terms:"",showSearch:!1,link:""}},components:{BaseToolbar:u["a"]},methods:{onAction:function(t,e){t=(new Date).getTime()+"|"+t,e&&(t+="|"+e),this.$store.commit("setNoteAction",t)},onSearchNotebook:function(t,e){console.log("search",t)},onSelectedNotebook:function(t){console.log("selected",t)},toggleSearch:function(){this.showSearch=!this.showSearch}}},y=w,g=Object(p["a"])(y,b,v,!1,null,null,null),O=g.exports,k=o("54dc"),_=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("base-toolbar",{attrs:{title:t.$t("my")}},[o("template",{slot:"actions"},[o("q-toolbar-title",{staticClass:"o-toolbar flex"},[o("div",{staticClass:"row items-center q-px-md"},[o("span",[t._v(t._s(t.$t(t.myTitle)))])])])],1)],2)},q=[],j=o("2f62");function C(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function N(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?C(Object(o),!0).forEach((function(e){r()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):C(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var T={name:"my-toolbar",data:function(){return{leftDrawerOpen:!0}},components:{BaseToolbar:u["a"]},methods:{},computed:N({},Object(j["c"])({myTitle:"myTitle"})),watch:{}},x=T,S=Object(p["a"])(x,_,q,!1,null,null,null),$=S.exports,P=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("base-toolbar",{attrs:{title:t.$t("system")}},[o("template",{slot:"actions"},[o("q-toolbar-title",{staticClass:"o-toolbar flex"},[o("div",{staticClass:"row items-center q-px-md"},[o("span",[t._v(t._s(t.$t(t.myTitle)))])])])],1)],2)},D=[];function E(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function A(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?E(Object(o),!0).forEach((function(e){r()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):E(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var M={name:"system-toolbar",data:function(){return{leftDrawerOpen:!0}},components:{BaseToolbar:u["a"]},methods:{},computed:A({},Object(j["c"])({myTitle:"myTitle"})),watch:{}},Q=M,H=Object(p["a"])(Q,P,D,!1,null,null,null),I=H.exports,L=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("base-toolbar",{attrs:{title:t.$t("app.name")}},[o("template",{slot:"actions"},[o("q-toolbar-title",{directives:[{name:"show",rawName:"v-show",value:!t.showSearch,expression:"!showSearch"}],staticClass:"o-toolbar flex mobile-only"},[o("div",{staticClass:"o-btn-group"},[o("q-btn",{attrs:{flat:""}},[o("q-icon",{attrs:{name:"info"}}),o("q-menu",{ref:"notePopover1",staticClass:"shadow-5",attrs:{anchor:"bottom middle",self:"top middle",maxWidth:"100vw",square:""}},[o("note-info")],1)],1),o("q-btn",{attrs:{flat:""},on:{click:function(e){return t.onAction("action-save")}}},[o("q-icon",{attrs:{name:"mdi-cloud-sync"}}),o("q-tooltip",{staticClass:"o-tooltip",attrs:{anchor:"top middle",self:"bottom middle"}},[t._v("\n            "+t._s(t.$t("action.sync"))+"\n          ")])],1)],1),o("div",{staticClass:"o-splitter"}),o("div",{staticClass:"o-btn-group"},[o("q-btn",{attrs:{flat:""},on:{click:t.toggleView}},[o("q-icon",{attrs:{name:t.viewIcon}}),o("q-tooltip",{staticClass:"o-tooltip",attrs:{anchor:"top middle",self:"bottom middle"}},[t._v("\n            "+t._s(t.$t("view.edit"))+"\n          ")])],1)],1),o("div",{staticClass:"o-splitter"})]),"share-note"===t.type?o("q-toolbar-title",{directives:[{name:"show",rawName:"v-show",value:!t.showSearch,expression:"!showSearch"}],staticClass:"o-toolbar flex desktop-only"},[o("div",{staticClass:"o-btn-group"},[o("q-btn",{attrs:{flat:""}},[o("q-icon",{attrs:{name:"info"}}),o("q-menu",{ref:"notePopover",staticClass:"shadow-5",attrs:{anchor:"bottom left",self:"top left"}},[o("o-note-info")],1)],1),o("q-btn",{attrs:{flat:""},on:{click:function(e){return t.onAction("action-save")}}},[o("q-icon",{attrs:{name:"mdi-cloud-sync"}}),o("o-tooltip-bottom",{attrs:{content:t.$t("action.sync"),delay:t.tipDelay}})],1)],1),o("div",{staticClass:"o-splitter"}),o("div",{staticClass:"o-btn-group"},[o("q-btn",{attrs:{flat:""},on:{click:function(e){return t.onAction("view-edit")}}},[o("q-icon",{attrs:{name:"create"}}),o("o-tooltip-bottom",{attrs:{content:t.$t("view.edit"),delay:t.tipDelay}})],1),o("q-btn",{attrs:{flat:""},on:{click:function(e){return t.onAction("view-live")}}},[o("q-icon",{attrs:{name:"chrome_reader_mode"}}),o("o-tooltip-bottom",{attrs:{content:t.$t("view.live"),delay:t.tipDelay}})],1),o("q-btn",{attrs:{flat:""},on:{click:function(e){return t.onAction("view-preview")}}},[o("q-icon",{attrs:{name:"visibility"}}),o("o-tooltip-bottom",{attrs:{content:t.$t("view.preview"),delay:t.tipDelay}})],1)],1),o("div",{staticClass:"o-splitter"}),t._e()]):o("q-toolbar-title")],1)],2)},R=[],F=(o("28a5"),o("bd1c")),B=o("10a8"),V=o("a9fb"),z=o("ed08");function W(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function G(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?W(Object(o),!0).forEach((function(e){r()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):W(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var K={name:"editor-toolbar",data:function(){return{view:"preview",viewIcon:"create",terms:"",showSearch:!1,tipDelay:500}},props:{type:{type:String,default:"share-notebook"}},components:{BaseToolbar:u["a"],MetaInput:B["a"],ONoteInfo:V["a"],OTooltipBottom:F["a"]},methods:{handleAction:function(t,e){switch(t){case"action-info":this.$refs.notePopover.show();break;case"action-link":this.$refs.linkPopover.show();break;case"action-picture":this.$refs.picturePopover.show();break}},onAction:function(t,e){t=(new Date).getTime()+"|"+t,e&&(t+="|"+e),this.$store.commit("setNoteAction",t)},onSelected:function(t){console.log("selected",t),t&&t.value&&(this.terms=t.label,this.$router.push({name:"note",params:{id:t.value}}))},onBlur:function(){this.showSearch=!1,this.terms=""},toggleView:function(){"preview"===this.view?(this.onAction("view-edit"),this.view="edit",this.viewIcon="visibility"):(this.onAction("view-preview"),this.view="preview",this.viewIcon="create")},searchFilter:function(t){return function(e){var o=e.title.toLowerCase(),n=o.indexOf(t.toLowerCase());return t.length>1?n>=0:0===n}},filterFn:function(t,e){var o=this;e((function(){console.log("filter",t),o.terms=t?t.toLowerCase():""}))},formatNotes:function(t){return t.map((function(t){return{label:t.title,icon:"assignment",stamp:Object(z["a"])(t.cedittime),value:t.id}}))},onPopoverShow:function(t){this.$refs[t+"Popover"].$children[0].$refs.input.focus()}},computed:G({},Object(j["c"])({notes:"notes",isMobile:"isMobile"}),{noteAction:function(){return this.$store.state.note.action},filterNotes:function(){var t=this.terms?this.notes.filter(this.searchFilter(this.terms)):[];return this.formatNotes(t)}}),watch:{noteAction:function(t,e){var o,n,i=t.split("|");i.length>=1&&(o=i[1]),i.length>=2&&(n=i[2]),this.handleAction(o,n)}},mounted:function(){}},U=K,J=Object(p["a"])(U,L,R,!1,null,null,null),Y=J.exports,X=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("drawer-navi",{attrs:{withHeader:!1}},[o("template",{slot:"content"},[o("q-list",{staticClass:"o-navi-list",attrs:{"no-border":"",link:"","inset-delimiter":""}},[t._l(t.list,(function(e,n){return[o("div",{key:n},[e.split?o("q-separator",{staticClass:"bg-faded"}):t._e(),e.groupLabel?o("q-item-label",{staticClass:"q-pa-md"},[t._v(t._s(e.groupLabel))]):t._e(),o("o-common-item",{staticClass:"themed",attrs:{icon:e.icon,label:e.label,id:e.id,active:t.actives[e.id]},nativeOn:{click:function(o){return t.openPage(e)}}})],1)]}))],2)],1),o("section")],2)},Z=[],tt=o("6122"),et=o("916d");function ot(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function nt(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ot(Object(o),!0).forEach((function(e){r()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ot(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var it={name:"my-navi",data:function(){return{actives:{profile:!0}}},methods:{setActive:function(t){this.actives={},this.actives[t]=!0},openPage:function(t){this.setActive(t.id),this.$router.push(t.path)},handleRoute:function(t){}},computed:nt({},Object(j["c"])({}),{list:function(){return[{id:"dashboard",label:this.$t("dashboard"),icon:"dashboard",path:"/my/dashboard",groupLabel:this.$t("my")},{id:"profile",label:this.$t("profile"),icon:"person",path:"/my/profile"},{id:"media",label:this.$t("label.media"),icon:"apps",path:"/my/media"},{id:"feedback",label:this.$t("label.feedback"),icon:"feedback",path:"/my/feedback",groupLabel:this.$t("label.about"),split:!0}]}}),watch:{$route:function(t,e){this.handleRoute(t)}},mounted:function(){this.handleRoute(this.$route)},components:{DrawerNavi:tt["a"],OCommonItem:et["a"]}},at=it,rt=(o("1967"),Object(p["a"])(at,X,Z,!1,null,null,null)),st=rt.exports,ct=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("drawer-navi",{staticClass:"notebook-tree"},[o("template",{slot:"action"},[o("section",{staticClass:"col-12"},[o("div",{staticClass:"row justify-center q-py-sm"},[o("q-btn-dropdown",{staticClass:"welcome-step-create",attrs:{label:t.$t("create"),icon:"add","menu-anchor":"bottom middle","menu-self":"top middle",flat:""}},[o("section",{},[o("o-common-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"post_add",label:t.$t("note.add")},nativeOn:{click:function(e){return t.newNote(e)}}}),o("o-common-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"mdi-markdown-outline",label:t.$t("note.markdown.add")},nativeOn:{click:function(e){return t.newMarkdown(e)}}}),o("o-common-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"mdi-folder-plus",label:t.$t("folder.add")},nativeOn:{click:function(e){return t.onAction("add",{})}}}),o("q-separator"),o("o-common-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"reorder",label:t.$t("quicknote")},nativeOn:{click:function(e){return t.onAction("quicknote")}}})],1)])],1),o("div",{staticClass:"row col-12 q-px-sm"},[o("div",{staticClass:"bg-accent search-box"},[o("q-input",{staticClass:"col-12 text-white search",attrs:{placeholder:t.$t("label.search"),clearable:"",borderless:"",autofocus:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.needle,callback:function(e){t.needle=e},expression:"needle"}})],1)])])]),o("template",{slot:"content"},[o("q-list",[o("o-common-item",{attrs:{icon:"access_time",label:t.$t("note.recent"),dense:"",active:t.activeNotebooks["a_recent"]},nativeOn:{click:function(e){e.stopPropagation(),t.onNotebookClick({data:{id:"recent",name:t.$t("note.recent")}})}}}),o("o-common-item",{attrs:{icon:"star",label:t.$t("note.starred"),dense:"",active:t.activeNotebooks["a_star"]},nativeOn:{click:function(e){e.stopPropagation(),t.onNotebookClick({data:{id:"star",name:t.$t("note.starred")}})}}}),o("q-expansion-item",{staticClass:"o-common-item dense",attrs:{"default-opened":""},scopedSlots:t._u([{key:"header",fn:function(){return[o("q-item-section",{attrs:{avatar:""}},[o("q-avatar",{attrs:{icon:"mdi-folder-multiple"}})],1),o("q-item-section",{staticClass:"allow-drop",on:{dragenter:t.onDragEnter,dragleave:t.onDragLeave,dragover:t.onDragOver,drop:function(e){return t.onDrop(e,{key:"top"})}}},[t._v("\n            "+t._s(t.$t("label.folder"))+"\n          ")])]},proxy:!0}])},[o("q-tree",{ref:"notebookTree",staticClass:"o-tree text-text themed",attrs:{nodes:t.notebookTree,selected:t.selected,"node-key":"key","selected-color":"primary","no-connectors":""},on:{"update:selected":function(e){t.selected=e}},scopedSlots:t._u([{key:"default-header",fn:function(e){return[o("section",{staticClass:"row justify-between items-center full-width cursor-pointer allow-drop",attrs:{draggable:"default"!==e.node.key},on:{dragstart:function(o){return t.onDragStart(o,e.node)},dragenter:t.onDragEnter,dragleave:t.onDragLeave,dragover:t.onDragOver,drop:function(o){return t.onDrop(o,e.node)},click:function(o){return o.stopPropagation(),t.onNotebookClick(e.node)}}},[o("section",{staticClass:"row items-center none-pointer-events"},[o("div",{staticClass:"row items-center col-auto"},[e.node.icon?o("q-icon",{attrs:{name:e.node.icon,size:"1.2rem"}}):o("q-icon",{attrs:{name:"folder",size:"1.2rem"}})],1),e.key===t.editingKey?o("div",{staticClass:"row items-center col",on:{keypress:function(t){if(!t.type.indexOf("key")&&13!==t.keyCode&&32!==t.keyCode)return null;t.stopPropagation()}}},[o("q-input",{ref:"treeInput",staticClass:"tree-input",attrs:{autofocus:"",outlined:""},on:{blur:function(o){return t.onAction("rename",e.node)},keyup:function(o){return!o.type.indexOf("key")&&t._k(o.keyCode,"enter",13,o.key,"Enter")?null:t.onAction("rename",e.node)}},model:{value:e.node.label,callback:function(o){t.$set(e.node,"label",o)},expression:"prop.node.label"}})],1):o("div",{staticClass:"row items-center"},[t._v(t._s(e.node.label))])]),"fixed"!==e.node.header&&e.node.key!==t.editingKey?o("section",{staticClass:"o-hover-toggle actions"},[o("q-btn",{attrs:{icon:"more_horiz",flat:"",dense:""},on:{click:function(e){return e.stopPropagation(),t.onAction(e)}}},[o("q-menu",{ref:"itemPopover",attrs:{anchor:"bottom right",self:"top right","content-class":"o-menu"}},[o("div",{staticStyle:{"min-width":"200px"}},[o("q-list",{staticClass:"o-navi-list",attrs:{"no-border":"",link:"","inset-delimiter":""}},[o("o-menu-item",{attrs:{icon:"add",label:t.$t("folder.child"),"side-icon":""},nativeOn:{click:function(o){return t.onAction("add",e.node)}}}),o("o-menu-item",{attrs:{icon:"edit",label:t.$t("action.edit"),"side-icon":""},nativeOn:{click:function(o){return t.onAction("edit",e.node)}}}),o("o-menu-item",{attrs:{icon:"close",label:t.$t("action.remove"),"side-icon":""},nativeOn:{click:function(o){return t.onAction("remove",e.node)}}}),o("o-menu-item",{attrs:{icon:"swap_vert",label:t.$t("action.move"),"side-icon":""},nativeOn:{click:function(o){return t.onAction("move",e.node)}}})],1)],1)])],1)],1):t._e()])]}}])})],1)],1),o("section",[o("o-common-dialog",{attrs:{title:t.$t("action.move"),icon:"swap_vert",show:t.showMoveDialog},on:{show:t.onShow,close:t.onHide,confirm:t.onConfirm}},[o("template",{slot:"content"},[o("section",{staticClass:"relative-position"},[o("o-notebook-move-select",{attrs:{notebook:t.moveFromNotebook},on:{input:t.onSelect}})],1)])],2)],1)],1)],2)},lt=[],ut=o("a54b"),dt=o("625b"),mt=o("c16a"),pt=o("3ba6"),ht=o("5809"),ft=o("3ac3"),bt=o("6eb0");function vt(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function wt(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(o),!0).forEach((function(e){r()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):vt(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var yt={name:"notebook-tree",mixins:[pt["a"],ht["a"],ft["a"]],data:function(){return{selected:"-1",editingKey:"-1",notebook:{id:"",name:"Notebook",parent:"",parentName:""},showMoveDialog:!1,moveFromNotebook:{},moveToNotebook:{}}},methods:wt({},Object(j["b"])({A_LOG_EVENT:"A_LOG_EVENT",UpdateNote:"UpdateNote"}),{init:function(){this.loadNotebooks()},onNotebookClick:function(t){this.selected=t.key,console.log("onNotebookClick",t.data),this.onOpenNotebook(t.data)},onLazyLoad:function(t){var e=this,o=t.node,n=t.key,i=t.done;t.fail;console.log("onLazyLoad",o,n);var a=this.getChildNotebooks(n),r=a.map((function(t){var o=e.getChildNotebooks(t.id);return{key:t.id,label:t.name,header:"node",icon:"book",lazy:o.length>0,data:t}}));i(r)},onAction:function(t,e){switch(t){case"add":this.addNotebook(e);break;case"edit":this.editNotebook(e);break;case"rename":this.renameNotebook(e);break;case"remove":this.beforeDelete(e);break;case"move":this.moveNotebook(e);break;case"quicknote":this.$router.push("/quicknote");break}},addNotebook:function(t){var e=this,o=t.key||"";this.notebook={id:"",name:"New",parent:o},this.saveNotebook(),setTimeout((function(){o&&e.$refs.notebookTree.setExpanded(o,!0),e.editingKey=e.notebook.id}),100)},editNotebook:function(t){var e=t.data;this.notebook={id:e.id,name:e.name,parent:e.parent},this.editingKey=t.key},renameNotebook:function(t){var e=this;Object(bt["e"])({id:t.key,name:t.label}).then((function(t){e.loadNotebooks()})),this.editingKey="-1"},saveNotebook:function(){this.notebook.id?this.updateNotebook():this.createNotebook()},createNotebook:function(){var t=this,e=Object(z["b"])(),o=this.notebook.parent?this.notebook.parent:"",n={id:e,parent:o,name:this.notebook.name};Object(bt["d"])(n,!1).then((function(e){t.A_LOG_EVENT({category:"notebook",action:"create",label:o?"children":"top",value:1}),t.loadNotebooks()})),this.notebook.id=e},updateNotebook:function(){var t=this,e=this.notebook.parent?this.notebook.parent:"";Object(bt["e"])({id:this.notebook.id,name:this.notebook.name,parent:e}).then((function(e){t.loadNotebooks()}))},beforeDelete:function(t){var e=this,o=t.key;if(o){var n=this.getChildNotebooks(o);if(n.length>0)return void this.notifyWarning("Cannot remove if it has children notebooks.");var i=this.getNotebookNotes(o);if(i.length>0)return void this.notifyWarning("Cannot remove if it has notes.")}this.$q.dialog({title:this.$t("label.tips"),message:this.$t("remove.tip",{tip:t.label}),ok:this.$t("action.confirm"),cancel:this.$t("action.cancel")}).onOk((function(){e.removeNotebook(o)}))},removeNotebook:function(t){var e=this,o=this.currentNotebook.id;Object(bt["c"])({id:t}).then((function(n){e.loadNotebooks(),t===o&&e.$store.commit("SET_CURRENT_NOTEBOOK_ID","")}))},moveNotebook:function(t){this.moveFromNotebook=t.data,this.showMoveDialog=!0},onShow:function(){this.moveToNotebook={}},onHide:function(){this.moveFromNotebook={},this.moveToNotebook={},this.showMoveDialog=!1},onSelect:function(t){this.moveToNotebook=t},onConfirm:function(){var t=this;this.moveFromNotebook.id&&this.moveToNotebook.key&&(this.moveFromNotebook.parent="top"===this.moveToNotebook.key?"":this.moveToNotebook.key,Object(bt["d"])(this.moveFromNotebook,!1).then((function(e){t.loadNotebooks()})))},onDragStart:function(t,e){var o=e.data;o.contentType="notebook",t.dataTransfer.setData("text",JSON.stringify(o)),t.dataTransfer.dropEffect="move"},onDragEnter:function(t){t.target.classList.contains("allow-drop")&&(t.preventDefault(),t.target.classList.add("drag-enter"))},onDragLeave:function(t){t.target.classList.contains("allow-drop")&&t.target.classList.remove("drag-enter")},onDragOver:function(t){t.target.classList.contains("allow-drop")&&t.preventDefault()},onDrop:function(t,e){var o=this;t.preventDefault();var n=JSON.parse(t.dataTransfer.getData("text"));if("note"===n.contentType)32===e.key.length&&e.key!==n.notebook&&this.UpdateNote({id:n.id,notebook:e.key}).then((function(){o.notifyDone()}));else if("notebook"===n.contentType)if("default"===e.key||e.key===n.parent||e.key===n.id||this.isAncestor(e,n.id))DEV&&this.notifyWarning("No move");else{var i="top"===e.key?"":e.key;if(i!==n.parent){var a=n;a.parent=i,delete a.contentType,Object(bt["d"])(a,!1).then((function(t){o.loadNotebooks(),o.notifyDone(),setTimeout((function(){i&&o.$refs.notebookTree.setExpanded(i,!0)}),100)}))}else DEV&&this.notifyWarning("No move")}t.dataTransfer.clearData(),t.target.classList.remove("drag-enter")}}),computed:wt({},Object(j["c"])({currentNotebook:"currentNotebook",notebooks:"notebooks"}),{notebookTree:function(){var t=this,e=this.filteredParentNotebooks.map((function(e){return{key:e.id,label:e.name,header:"root",icon:e.icon,data:e,parent:"",children:t.getChildNodes(e.id)}}));return e.push({key:"default",label:this.$t("note.default"),header:"fixed",icon:"mdi-folder-text",children:[],data:{id:"default",name:this.$t("note.default")}}),e}}),mounted:function(){this.init()},components:{DrawerNavi:tt["a"],OMenuItem:ut["a"],OCommonDialog:dt["a"],ONotebookMoveSelect:mt["a"],OCommonItem:et["a"]}},gt=yt,Ot=(o("0322"),Object(p["a"])(gt,ct,lt,!1,null,null,null)),kt=Ot.exports,_t=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("drawer-navi",{staticClass:"qtag-tree"},[o("template",{slot:"action"},[o("section",{staticClass:"col-12"},[o("div",{staticClass:"row justify-center q-py-sm"},[o("q-btn",{staticClass:"quicknote-step-1",attrs:{flat:"",icon:"add"},on:{click:function(e){return t.onAction("add",{})}}},[o("span",[t._v(t._s(t.$t("label.tag")))])])],1),o("div",{staticClass:"row col-12 q-px-sm"},[o("div",{staticClass:"bg-accent search-box"},[o("q-input",{staticClass:"col-12 text-white search",attrs:{color:"white",placeholder:t.$t("label.search"),clearable:"",borderless:"",autofocus:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.needle,callback:function(e){t.needle=e},expression:"needle"}})],1)])])]),o("template",{slot:"content"},[o("q-list",{staticClass:"o-navi-list q-pb-md"},[o("o-common-item",{attrs:{icon:"filter_vintage",label:t.$t("label.all"),dense:"",active:t.activeQtags["a_all"]},nativeOn:{click:function(e){e.stopPropagation(),t.onNodeClick({data:{id:"all",name:t.$t("label.all")}})}}}),o("q-expansion-item",{staticClass:"o-common-item dense",attrs:{"default-opened":""},scopedSlots:t._u([{key:"header",fn:function(){return[o("q-item-section",{attrs:{avatar:""}},[o("q-avatar",{attrs:{icon:"bookmarks"}})],1),o("q-item-section",[t._v("\n            "+t._s(t.$t("label.tag"))+"\n          ")])]},proxy:!0}])},[o("q-tree",{ref:"qtagTree",staticClass:"o-tree themed",attrs:{nodes:t.qtagTree,selected:t.selected,"node-key":"key",color:"grey-5","selected-color":"text","no-connectors":""},on:{"update:selected":function(e){t.selected=e}},scopedSlots:t._u([{key:"default-header",fn:function(e){return[o("section",{staticClass:"row justify-between items-center full-width cursor-pointer",attrs:{id:e.node.key},on:{click:function(o){return o.stopPropagation(),t.onNodeClick(e.node)}}},[o("section",{staticClass:"row items-center"},[e.node.icon?o("div",{staticClass:"row items-center col-auto"},[o("q-icon",{attrs:{name:e.node.icon,size:"1.2rem"}})],1):t._e(),e.key===t.editingKey?o("div",{staticClass:"row items-center col",on:{keypress:function(t){if(!t.type.indexOf("key")&&13!==t.keyCode&&32!==t.keyCode)return null;t.stopPropagation()}}},[o("q-input",{ref:"treeInput",staticClass:"tree-input",attrs:{autofocus:"",outlined:""},on:{blur:function(o){return t.onAction("rename",e.node)},keyup:function(o){return!o.type.indexOf("key")&&t._k(o.keyCode,"enter",13,o.key,"Enter")?null:t.onAction("rename",e.node)}},model:{value:e.node.label,callback:function(o){t.$set(e.node,"label",o)},expression:"prop.node.label"}})],1):o("div",{staticClass:"row items-center"},[t._v(t._s(e.node.label))])]),"fixed"!==e.node.header&&e.node.key!==t.editingKey?o("section",{staticClass:"o-hover-toggle"},[o("q-btn",{attrs:{icon:"more_horiz",flat:"",dense:""},on:{click:function(e){return e.stopPropagation(),t.onAction(e)}}},[o("q-menu",{ref:"itemPopover",attrs:{anchor:"bottom right",self:"top right"}},[o("div",{staticStyle:{"min-width":"200px"}},[o("q-list",{staticClass:"o-navi-list",attrs:{"no-border":"",link:"","inset-delimiter":""}},[t._e(),o("o-menu-item",{attrs:{icon:"edit",label:t.$t("action.edit"),"side-icon":""},nativeOn:{click:function(o){return t.onAction("edit",e.node)}}}),o("o-menu-item",{attrs:{icon:"close",label:t.$t("action.remove"),"side-icon":""},nativeOn:{click:function(o){return t.onAction("remove",e.node)}}}),t._e()],1)],1)])],1)],1):t._e()])]}}])})],1),o("q-separator",{staticClass:"q-mt-sm bg-faded"}),o("q-expansion-item",{staticClass:"o-common-item dense quicknote-step-2",attrs:{"default-opened":""},scopedSlots:t._u([{key:"header",fn:function(){return[o("q-item-section",{attrs:{avatar:""}},[o("q-avatar",{attrs:{icon:"mdi-radiobox-marked"}})],1),o("q-item-section",{},[t._v("\n            "+t._s(t.$t("label.mark"))+"\n          ")])]},proxy:!0}])},t._l(t.colors,(function(e,n){return o("q-item",{key:"color"+n,ref:"qtagColor",refInFor:!0,staticClass:"col-6 list-item",attrs:{id:e.name,active:t.colorActives[e.name],clickable:""},nativeOn:{click:function(o){return t.markColor(e)}}},[o("q-item-section",{attrs:{avatar:""}},[o("q-avatar",{attrs:{icon:"fiber_manual_record","text-color":e.name}})],1),o("q-item-section",[t._v(t._s(t.$t(e.label)))])],1)})),1),o("q-separator",{staticClass:"q-mt-sm bg-faded"}),o("q-expansion-item",{staticClass:"o-common-item dense quicknote-step-3",attrs:{"default-opened":""},scopedSlots:t._u([{key:"header",fn:function(){return[o("q-item-section",{attrs:{avatar:""}},[o("q-avatar",{attrs:{icon:"remove_red_eye"}})],1),o("q-item-section",[t._v("\n            "+t._s(t.$t("label.qview"))+"\n          ")])]},proxy:!0}])},t._l(t.views,(function(e,n){return o("q-item",{key:"view"+n,ref:"qnoteView",refInFor:!0,staticClass:"col-6 list-item",attrs:{id:e.name,active:t.viewActives[e.name],clickable:""},nativeOn:{click:function(o){return t.selectView(e)}}},[o("q-item-section",{attrs:{avatar:""}},[o("q-avatar",{staticClass:"themed",attrs:{icon:e.icon}})],1),o("q-item-section",[t._v(t._s(e.label))])],1)})),1)],1),o("section",[o("o-common-dialog",{attrs:{title:t.$t("action.move"),icon:"swap_vert",show:t.showMoveDialog},on:{show:t.onShow,close:t.onHide,confirm:t.onConfirm}},[o("template",{slot:"content"},[o("section",{staticClass:"relative-position"},[o("o-qtag-move-select",{attrs:{qtag:t.moveFromQtag},on:{input:t.onSelect}})],1)])],2)],1)],1)],2)},qt=[],jt=o("2f64"),Ct=o("e0c54"),Nt=o("5f87"),Tt=o("6705"),xt=o("a43c"),St=o("6907");function $t(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function Pt(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?$t(Object(o),!0).forEach((function(e){r()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):$t(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var Dt={name:"qtag-tree",mixins:[pt["a"],Ct["a"]],data:function(){return{selected:"-1",editingKey:"-1",qtag:{id:"",name:"Qtag",parent:""},colors:St["a"],colorActives:{},viewActives:{},showMoveDialog:!1,moveFromQtag:{},moveToQtag:{}}},methods:Pt({},Object(j["b"])({A_LOG_EVENT:"A_LOG_EVENT",A_NEW_QTAG:"A_NEW_QTAG"}),{init:function(){this.loadQTags()},onNodeClick:function(t){this.selected=t.key,this.onOpenQtag(t.data)},onAction:function(t,e){switch(t){case"add":this.addQtag(e);break;case"edit":this.editQtag(e);break;case"rename":this.renameQtag(e);break;case"remove":this.beforeDelete(e);break;case"move":this.moveQtag(e);break}},addQtag:function(t){var e=this,o=t.key||"";this.qtag={id:Object(z["b"])()+"_new",name:"New",parent:o},this.A_NEW_QTAG(this.qtag).then((function(){e.expandQTagTree()}))},editQtag:function(t){var e=t.data;this.notebook={id:e.id,name:e.name,parent:e.parent},this.editingKey=t.key},renameQtag:function(t){var e=this;if(t.key.indexOf("new")>0){console.log("create",t);var o={id:t.key.substr(0,32),parent:t.parent,name:t.label};Object(Tt["a"])(o).then((function(t){e.A_LOG_EVENT({category:"qtag",action:"create",label:"children",value:1}),e.postSaveQTag(!1)}))}else Object(Tt["d"])({id:t.key,name:t.label}).then((function(){e.loadQTags()}));this.editingKey="-1"},saveQtag:function(){this.qtag.id?this.updateQtag():this.createQtag()},postSaveQTag:function(t){var e=this;this.queryTag().then((function(){t&&e.expandQTagTree()}))},expandQTagTree:function(){this.qtag.parent&&(console.log("postSave",this.qtag),this.$refs.qtagTree.setExpanded(this.qtag.parent,!0)),this.editingKey=this.qtag.id},createQtag:function(){var t=this,e=Object(z["b"])(),o=this.qtag.parent||"",n={id:e,parent:o,name:this.qtag.name};Object(Tt["a"])(n).then((function(e){t.A_LOG_EVENT({category:"qtag",action:"create",label:"children",value:1}),t.$store.commit("ADD_QTAG",e.data),t.postSaveQTag(!0)})),this.qtag.id=e},updateQtag:function(){var t=this,e=this.qtag.parent||"";Object(Tt["d"])({id:this.qtag.id,name:this.qtag.name,parent:e}).then((function(){t.$store.commit("UPDATE_QTAG",res.data),t.postSaveQTag(!1)}))},beforeDelete:function(t){var e=this,o=t.key;if(o){var n=this.getChildQtags(o);if(n.length>0)return void this.notifyWarning("Cannot remove if it has children tags.")}this.$q.dialog({title:this.$t("label.tips"),message:this.$t("remove.tip",{tip:t.label}),ok:this.$t("action.confirm"),cancel:this.$t("action.cancel")}).onOk((function(){Object(xt["c"])({condition:{uid:Object(Nt["e"])(),qtag:o}}).then((function(t){t.data.size>0?e.notifyWarning("Please remove notes in this tag first.","top",800):e.removeQtag(o)}))}))},removeQtag:function(t){var e=this;Object(Tt["b"])({id:t}).then((function(o){e.$store.commit("REMOVE_QTAG",t)}))},moveQtag:function(t){this.moveFromQtag=t.data,this.showMoveDialog=!0},onShow:function(){this.moveToQtag={}},onHide:function(){this.moveFromQtag={},this.moveToQtag={},this.showMoveDialog=!1},onSelect:function(t){this.moveToQtag=t},onConfirm:function(){var t=this;if(this.moveFromQtag.id&&this.moveToQtag.key){var e="top"===this.moveToQtag.key?"":this.moveToQtag.key;Object(Tt["d"])({id:this.moveFromQtag.id,parent:e}).then((function(e){t.$store.commit("UPDATE_QTAG",e.data)}))}},markColor:function(t){this.colorActives={},this.colorActives[t.name]=!0,this.$store.commit("SET_CURRENT_COLOR",t),this.A_LOG_EVENT({category:"quicknote",action:"view",label:t.name,value:1})},selectView:function(t){this.viewActives={},this.viewActives[t.name]=!0;var e=(new Date).getTime()+"|view-"+t.value;this.$store.commit("SET_QNOTE_ACTION",e),this.A_LOG_EVENT({category:"quicknote",action:"view",label:t.name,value:1})},onDragStart:function(t){console.log("drag ...",t),t.dataTransfer.setData("text",t.target.id),t.dataTransfer.dropEffect="move"},handleRoute:function(t){var e=t.name,o=t.params.id,n=t.params.name;"quicknote"===e?this.loadQTags():"qtag"===e&&(n||(this.setActive("qtag",o),this.$store.commit("SET_CURRENT_QTAG",{id:o}),this.$store.commit("SET_QTAG",o),this.loadQTags()))}}),computed:Pt({},Object(j["c"])({}),{qtagTree:function(){var t=this,e=this.topQtags.map((function(e){return{key:e.id,label:e.name,header:"root",icon:"bookmark",data:e,parent:"",children:t.getChildNodes(e.id)}}));return e},views:function(){return[{name:"list",label:this.$t("action.list"),value:"list",icon:"view_list"},{name:"card",label:this.$t("action.card"),value:"card",icon:"view_module"},{name:"timeline",label:this.$t("timeline"),value:"timeline",icon:"timeline"}]}}),mounted:function(){this.init()},components:{DrawerNavi:tt["a"],OMenuItem:ut["a"],OCommonDialog:dt["a"],OQtagMoveSelect:jt["a"],OCommonItem:et["a"]}},Et=Dt,At=(o("759e"),Object(p["a"])(Et,_t,qt,!1,null,null,null)),Mt=At.exports,Qt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("drawer-navi",{attrs:{withHeader:!1}},[o("template",{slot:"content"},[o("q-list",{staticClass:"o-navi-list",attrs:{"no-border":"",link:"","inset-delimiter":""}},[t._l(t.list,(function(e,n){return[o("div",{key:n},[e.split?o("q-separator",{staticClass:"bg-faded"}):t._e(),e.groupLabel?o("q-item-label",{staticClass:"q-pa-md"},[t._v(t._s(e.groupLabel))]):t._e(),o("o-common-item",{staticClass:"themed",attrs:{icon:e.icon,label:e.label,id:e.id,active:t.actives[e.id]},nativeOn:{click:function(o){return t.openPage(e)}}})],1)]}))],2)],1)],2)},Ht=[],It={name:"system-navi",data:function(){return{actives:{settings:!0}}},methods:{setActive:function(t){this.actives={},this.actives[t]=!0},openPage:function(t){this.setActive(t.id),this.$router.push(t.path)},handleRoute:function(t){}},computed:{list:function(){return[{id:"settings",label:this.$t("label.setting"),icon:"settings",path:"/system/settings",groupLabel:this.$t("system")},{id:"theme",label:this.$t("label.theme"),icon:"palette",path:"/system/theme"},{id:"markdown",label:this.$t("label.markdownguide"),icon:"help",path:"/system/markdown",groupLabel:this.$t("label.help"),split:!0},{id:"shortcut",label:this.$t("action.shortcut"),icon:"keyboard",path:"/system/shortcut"},{id:"about",label:this.$t("label.about"),icon:"info",path:"/system/about",groupLabel:this.$t("label.about"),split:!0},{id:"opensource",label:this.$t("opensource.components"),icon:"extension",path:"/system/opensource"},{id:"privacy",label:this.$t("top"),icon:"mdi-shield-star",path:"/system/privacy"},{id:"tos",label:this.$t("tos"),icon:"mdi-shield-account",path:"/system/tos"}]}},watch:{$route:function(t,e){this.handleRoute(t)}},mounted:function(){this.handleRoute(this.$route)},components:{DrawerNavi:tt["a"],OCommonItem:et["a"]}},Lt=It,Rt=(o("2d07"),Object(p["a"])(Lt,Qt,Ht,!1,null,null,null)),Ft=Rt.exports,Bt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("drawer-navi",[o("template",{slot:"action"},[t.shareNotebook.id?o("div",[o("div",{staticClass:"row justify-center"},[o("q-btn",{attrs:{flat:"",icon:"folder",to:"/share/notebook/"+t.shareNotebook.id}},[o("span",[t._v(t._s(t.shareNotebook.name))])])],1)]):t._e()]),o("template",{slot:"content"},[o("section",["notebook"===t.view?o("q-list",{ref:"list",staticClass:"o-navi-list",attrs:{"no-border":"",link:"","inset-delimiter":""}},t._l(t.shareNotes,(function(e,n){return o("o-note-item",{key:n,ref:"note",refInFor:!0,attrs:{icon:"mdi-file-document-box",label:e.title,id:e.id,active:t.actives["a_"+e.id],dense:"",clickable:"","side-menu":!1},nativeOn:{click:function(o){return t.openNote(e)}}})})),1):t._e(),"note"===t.view?o("q-tree",{ref:"tocTree",attrs:{nodes:t.tocTree,selected:t.selected,"node-key":"key","default-expand-all":"",color:"grey-5",id:"tocTree"},on:{"update:selected":function(e){t.selected=e}},nativeOn:{click:function(e){return t.onTocClick()}},scopedSlots:t._u([{key:"header-heading",fn:function(e){return o("div",{staticClass:"row items-center",attrs:{"data-toc-line":e.node.heading.lineNumber},nativeOn:{click:function(o){return t.onTocClick(e.node)}}},[o("div",{nativeOn:{click:function(o){return t.onTocClick(e.node)}}},[t._v(t._s(e.node.label))])])}}],null,!1,229790838)}):t._e()],1)])],2)},Vt=[],zt=(o("ac4d"),o("a026")),Wt=o("5b48"),Gt=o("aafa"),Kt=o("787d");function Ut(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function Jt(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Ut(Object(o),!0).forEach((function(e){r()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):Ut(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var Yt={name:"share-navi",mixins:[pt["a"],ht["a"]],data:function(){return{view:"notebook",notebook:"",actives:{},active:!0,selected:0}},methods:Jt({},Object(j["b"])({getShareNotebook:"A_GET_SHARE_NOTEBOOK"}),{init:function(){this.notebook&&this.getShareNotebook(this.notebook)},openNote:function(t){var e=[];this.$refs.note&&(e=this.$refs.note.concat());var o=!0,n=!1,i=void 0;try{for(var a,r=e[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value,c=s.$el.id;if(c===t.id){this.setActiveNote(c);break}}}catch(l){n=!0,i=l}finally{try{o||null==r.return||r.return()}finally{if(n)throw i}}this.$router.push({name:"share-note",params:{id:t.id}})},setActiveNote:function(t){this.actives={},this.actives["a_"+t]=!0,"default"!==t&&"all"!==t&&"star"!==t||(t="default"),console.log("current notebook",t),this.$store.commit("SET_CURRENT_NOTEBOOK_ID",t)},onAction:function(t,e,o){console.log("action",t,e,o)},onModalOpen:function(){},onTocClick:function(){var t=(new Date).getTime()+"|action-toc|"+this.selected;this.$store.commit("setNoteAction",t)},onRoute:function(t){var e=t.name;"share-notebook"===e?(this.view="notebook",this.notebook=t.params.id,this.init()):"share-note"===e&&(this.view="note")}}),computed:Jt({},Object(j["c"])({notebooks:"notebooks",shareNotebook:"shareNotebook",shareNotes:"shareNotes",toc:"toc"}),{tocTree:function(){var t=this;return zt["a"].nextTick((function(){t.$refs.tocTree.expandAll()})),this.toc}}),watch:{$route:function(t,e){this.onRoute(t)}},mounted:function(){this.onRoute(this.$route)},components:{DrawerNavi:tt["a"],OSideDialog:Kt["a"],ONoteItem:Wt["a"],ONotebookAddItem:Gt["a"]}},Xt=Yt,Zt=(o("26cb"),Object(p["a"])(Xt,Bt,Vt,!1,null,null,null)),te=Zt.exports,ee=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",["share"===t.comType?o("share-modal"):t._e(),"shortcut"===t.comType?o("shortcut-modal"):t._e(),"media"===t.comType?o("media-modal"):t._e(),"preview"===t.comType?o("preview-modal"):t._e(),"search"===t.comType?o("search-modal"):t._e(),"auth-tips"===t.comType?o("auth-tips-modal"):t._e(),"quicknote-guide"===t.comType?o("quicknote-guide-modal"):t._e(),"control-panel"===t.comType?o("control-panel-modal"):t._e()],1)},oe=[],ne=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-dialog",{ref:"modal",attrs:{position:t.isMobile?"top":"standard","content-css":t.css,"content-class":"share-modal o-common-modal"},on:{show:t.onShow,hide:t.onHide}},[o("q-card",{staticStyle:{width:"500px"},style:t.isMobile?"max-width: 100vw":""},[o("q-bar",{staticClass:"bg-white q-py-md"},[o("div",[t._v(t._s(t.$t("label.share")))]),o("q-space"),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[o("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v(t._s(t.$t("action.close")))])],1)],1),o("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"600px"}},[o("section",{staticClass:"content"},[o("section",{staticClass:"o-wrapper"},[o("q-separator"),o("div",{staticClass:"row justify-around items-center"},[o("o-setting-item",{attrs:{icon:t.shareInfo.icon,label:t.$t(t.shareInfo.content),"side-label":t.shareInfo.name,dense:""}}),o("o-setting-item",{attrs:{icon:"share",label:t.$t("label.share"),dense:""}},[o("template",{slot:"side"},[o("q-toggle",{on:{input:t.onShare},model:{value:t.share,callback:function(e){t.share=e},expression:"share"}})],1)],2),t.shareInfo.share?o("o-setting-item",{attrs:{icon:"access_time",label:t.$t("share.time"),dense:""}},[o("template",{slot:"side"},[t._v("\n                "+t._s(t.timeMulti(t.shareInfo.time).timestamp)+"\n              ")])],2):t._e()],1),t.isShare?o("section",{staticClass:"q-mt-md"},[o("q-input",{attrs:{value:t.shareInfo.link,standout:"bg-secondary",readonly:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"link"}})]},proxy:!0},{key:"append",fn:function(){return[o("q-btn",{attrs:{color:"blue",label:t.$t("share.copy"),flat:""},on:{click:function(e){return t.onCopy(t.shareInfo.link)}}})]},proxy:!0}],null,!1,490644460)}),o("div",{staticClass:"row"},[o("div",{staticClass:"qrcode"},[o("qrcode",{attrs:{value:t.shareInfo.link,options:{width:120}}})],1),o("div",{staticClass:"row justify-center items-center q-pa-md text-bold"},[t._v("\n                "+t._s(t.$t("share.tips"))+"\n              ")])])],1):o("div",{staticClass:"q-mt-md qrcode"},[o("img",{attrs:{src:"statics/images/home/3d.png",width:"240"}})]),o("q-separator")],1)])]),t.isShare?o("q-card-actions",{staticClass:"q-px-sm",attrs:{align:"right"}},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"shadow-0",attrs:{color:"blue",disable:!t.isShare,flat:""},on:{click:t.onOpen}},[t._v(t._s(t.$t("share.view")))])],1):t._e()],1)],1)},ie=[],ae=(o("b54a"),o("b2e5")),re=o.n(ae),se=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"o-setting-item col-12",class:t.small?"small":"",attrs:{to:t.to,dense:t.dense,clickable:t.clickable}},[t.icon?o("q-item-section",{staticClass:"o-text",attrs:{avatar:""}},[o("q-avatar",{attrs:{size:t.size,icon:t.icon}})],1):t._e(),o("q-item-section",{staticClass:"o-text-active"},[o("q-item-label",[t._v(t._s(t.label))]),t.sublabel?o("q-item-label",{staticClass:"o-text",attrs:{caption:""}},[t._v(t._s(t.sublabel))]):t._e()],1),o("q-item-section",{staticClass:"o-text side-label",attrs:{side:""}},[t.sideLabel?o("q-item-label",[t._v("\n      "+t._s(t.sideLabel)+"\n      "),t.sideIcon?o("i",{staticClass:"iconfont icon-arrow-more"}):t._e()]):t._e(),o("div",{staticClass:"row items-center"},[t._t("side")],2)],1)],1)},ce=[],le={name:"o-setting-item",data:function(){return{}},props:{dense:{type:Boolean,default:!1},small:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},id:{type:String,default:""},to:{type:String,default:""},size:{type:String,default:"3rem"},color:{type:String,default:"primary"},icon:{type:String,default:""},label:{type:String,default:"Label"},sublabel:{type:String,default:""},sideLabel:{type:String,default:""},sideIcon:{type:Boolean,default:!0}},methods:{onConfirm:function(){this.$emit("confirm",this.value)}},computed:{textColor:function(){return this.color+"-10"}}},ue=le,de=(o("4c27"),Object(p["a"])(ue,se,ce,!1,null,null,null)),me=de.exports,pe=o("b06b"),he=o("8c20"),fe=o("0b1d"),be=o("7fcb"),ve=o("b35e");function we(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function ye(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?we(Object(o),!0).forEach((function(e){r()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):we(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var ge={computed:ye({},Object(j["c"])({comType:"comType",comConfig:"comConfig"}),{isShow:{get:function(){return"".concat(this.comType,"-modal")===this.$options.name},set:function(){}},data:function(){var t={};return this.comConfig&&this.comConfig.data&&(t=this.comConfig.data),t},css:function(){var t={padding:"20px",minHeight:"80vh",minWidth:"60vw"};return this.comConfig&&this.comConfig.css&&(t=this.comConfig.css),t},isMobile:function(){return this.$q.platform.is.mobile}}),methods:ye({},Object(j["b"])({}),{onShow:function(){this.$emit("show")},onHide:function(){this.$store.dispatch("SetComponent","",{}),this.$emit("close")}}),watch:{isShow:function(t,e){t?this.$refs.modal&&"function"===typeof this.$refs.modal.show&&this.$refs.modal.show():this.$refs.modal&&"function"===typeof this.$refs.modal.hide&&this.$refs.modal.hide()}},mounted:function(){this.isShow&&this.$refs.modal&&"function"===typeof this.$refs.modal.show&&this.$refs.modal.show()}};function Oe(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function ke(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Oe(Object(o),!0).forEach((function(e){r()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):Oe(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}zt["a"].component("qrcode",re.a);var _e={name:"share-modal",mixins:[ve["a"],ge],data:function(){return{sharedNote:{},sharedNotebook:{},share:!1}},methods:ke({},Object(j["b"])({A_SET_CURRENT_NOTE:"A_SET_CURRENT_NOTE",A_SET_CURRENT_NOTEBOOK:"A_SET_CURRENT_NOTEBOOK"}),{init:function(){this.sharedNote=this.currentNote,this.sharedNotebook=this.currentNotebook,this.share=this.isShare},onOpen:function(){this.shareInfo.link&&Object(pe["a"])(this.shareInfo.link)},onShare:function(t){var e=this.shareInfo.content,o=t?1:0;"note"===e?this.shareNote(o):"notebook"===e&&this.shareNotebook(o)},shareNote:function(t){var e=this,o={id:this.shareInfo.id};1===t?Object(he["g"])(o).then((function(t){var o=t.data;e.sharedNote=o,Object(be["i"])(o),e.A_SET_CURRENT_NOTE(o)})):Object(he["a"])(o).then((function(t){var o=t.data;e.sharedNote=o,Object(be["i"])(o),e.A_SET_CURRENT_NOTE(o)}))},shareNotebook:function(t){var e=this,o={id:this.shareInfo.id};1===t?Object(fe["f"])(o).then((function(t){var o=t.data;e.sharedNotebook=o,Object(bt["f"])(o),e.A_SET_CURRENT_NOTEBOOK(o)})):Object(fe["a"])(o).then((function(t){var o=t.data;e.sharedNotebook=o,Object(bt["f"])(o),e.A_SET_CURRENT_NOTEBOOK(o)}))}}),computed:ke({},Object(j["c"])({currentNote:"currentNote",currentNotebook:"currentNotebook"}),{isShare:function(){return 1===this.shareInfo.share},shareInfo:function(){var t="https://www.donote.info";switch(this.comConfig.content){case"note":var e=this.sharedNote,o=e.share?e.share.state:0,n=1===e.type?"n":"m";return{content:"note",id:e.id,icon:"mdi-file-document-box",name:e.title,link:t+"/".concat(n,"/")+e.id,share:o,time:e.share?e.share.shareTime:""};case"notebook":var i=this.sharedNotebook,a=i.share?i.share.state:0;return{content:"notebook",id:i.id,icon:"book",name:i.name,link:t+"/share/notebook/"+i.id,share:a,time:i.share?i.share.shareTime:""}}}}),watch:{isShare:function(t,e){this.share=t}},mounted:function(){this.init()},components:{OSettingItem:me}},qe=_e,je=(o("f819"),Object(p["a"])(qe,ne,ie,!1,null,null,null)),Ce=je.exports,Ne=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("o-common-dialog",{attrs:{title:t.$t("label.shortcut"),icon:"keyboard",actionVisible:!1,"content-style":{padding:"20px",width:"800px",height:"500px"},show:t.isShow},on:{close:function(e){return t.onHide()}}},[o("template",{slot:"content"},[o("o-markdown-article",{attrs:{article:"shortcut",name:t.platform}})],1)],2)},Te=[],xe=o("3374"),Se={name:"shortcut-modal",mixins:[ge],data:function(){return{}},methods:{},computed:{platform:function(){return"mac"===this.$q.platform.is.platform?"mac":"windows"}},watch:{},mounted:function(){},components:{OCommonDialog:dt["a"],OMarkdownArticle:xe["a"]}},$e=Se,Pe=Object(p["a"])($e,Ne,Te,!1,null,null,null),De=Pe.exports,Ee=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("o-common-modal",{ref:"modal",attrs:{title:t.$t("label.media"),icon:"apps","content-style":{padding:"20px",maxWidth:"80vw",height:"70vh"},show:t.isShow},on:{close:function(e){return t.onHide()}}},[o("template",{slot:"content"},[o("div",{staticClass:"row"},[o("o-media",{on:{selected:t.onMediaSelected}})],1)])],2)},Ae=[],Me=o("f94c"),Qe=o("ce81");function He(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function Ie(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?He(Object(o),!0).forEach((function(e){r()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):He(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var Le={name:"media-modal",data:function(){return{defaultCss:{padding:"20px",minHeight:"80vh",minWidth:"80vw"}}},methods:{onHide:function(){this.$store.dispatch("SetComponent","",{}),this.$emit("close")},onMediaSelected:function(t,e,o){if("note"===this.comConfig.data.type)this.comConfig.callback&&this.comConfig.callback(this.comConfig.data.command,e);else{var n=(new Date).getTime()+"|action-media";this.$store.commit("setNoteAction",n)}this.$store.dispatch("SetComponent","",{})}},computed:Ie({},Object(j["c"])({comType:"comType",comConfig:"comConfig"}),{isShow:{get:function(){return"media"===this.comType},set:function(){}},css:function(){var t=this.defaultCss;return this.comConfig&&this.comConfig.css&&(t=this.comConfig.css),t}}),watch:{},mounted:function(){},components:{OCommonModal:Me["a"],OMedia:Qe["a"]}},Re=Le,Fe=Object(p["a"])(Re,Ee,Ae,!1,null,null,null),Be=Fe.exports,Ve=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-dialog",{ref:"modal",attrs:{position:t.isMobile?"top":"standard","content-css":t.css,"content-class":"preview-modal o-common-modal"},on:{show:function(e){return t.$emit("show")},hide:t.onHide}},[o("q-card",{staticClass:"preview-card"},[o("q-bar",{staticClass:"bg-white text-black"},[t._e(),o("div",[t._v(t._s(t.title))]),o("q-space"),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-md",attrs:{dense:"",flat:"",icon:"cloud_download"},on:{click:t.onDownload}},[o("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("Download")])],1),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[o("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("Close")])],1)],1),o("q-card-section",{staticClass:"scroll"},[o("section",{staticClass:"content"},["video"===t.data.type?o("video",{attrs:{src:t.data.url,controls:"controls",width:"100%",height:"90%"}}):"file"===t.data.type?o("div",[o("q-icon",{attrs:{name:"attachment",size:"200px"}}),o("div",[o("span",{staticStyle:{"font-size":"2rem"}},[t._v("File")])])],1):o("q-img",{attrs:{src:t.data.url,contain:""}})],1)])],1)],1)},ze=[];function We(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function Ge(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?We(Object(o),!0).forEach((function(e){r()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):We(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var Ke={name:"preview-modal",mixins:[ge],data:function(){return{}},methods:{onDownload:function(){console.log("download",this.data.url);var t=this.data.url;"image"===this.data.type?window.open(t):window.location=t}},computed:Ge({},Object(j["c"])({}),{title:function(){var t=this.$t("label.preview");return this.data.title,t}}),components:{}},Ue=Ke,Je=(o("25e94"),Object(p["a"])(Ue,Ve,ze,!1,null,null,null)),Ye=Je.exports,Xe=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-dialog",{ref:"modal",attrs:{position:"top","content-class":"search-modal o-common-modal"},on:{show:t.onShow,hide:t.onHide}},[o("q-card",{staticClass:"search-card"},[o("q-bar",{staticClass:"bg-white text-primary"},[o("q-icon",{attrs:{name:"search"}}),o("div",[t._v(t._s(t.$t("label.search")))]),o("q-space"),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[o("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v(t._s(t.$t("action.close")))])],1)],1),o("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"600px"}},[o("section",{staticClass:"content"},[o("div",{staticClass:"o-cards-wrapper col-12"},[o("section",{staticClass:"row col-12 o-cards"},[o("div",{staticClass:"col-md-12 col-xs-12"},[o("q-toolbar",{staticClass:"bg-grey-2 rounded-borders"},[o("q-btn",{staticClass:"q-mx-sm",attrs:{round:"",flat:"",icon:t.sourceItem.icon}},[o("q-menu",{ref:"menuPopover",attrs:{anchor:"bottom left",self:"top left",offset:[5,10]}},[o("q-list",[o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){return t.onSelectSource("local")}}},[o("q-item-section",{attrs:{avatar:""}},[o("q-avatar",{attrs:{icon:"folder",color:"primary","text-color":"white"}})],1),o("q-item-section",[o("q-item-label",[t._v(t._s(t.$t("label.local.note")))])],1)],1),o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){return t.onSelectSource("cloud")}}},[o("q-item-section",{attrs:{avatar:""}},[o("q-avatar",{attrs:{icon:"cloud",color:"purple","text-color":"white"}})],1),o("q-item-section",[o("q-item-label",[t._v(t._s(t.$t("label.cloud.note")))])],1)],1)],1)],1)],1),o("q-input",{ref:"term",staticStyle:{width:"100%","padding-right":"10px"},attrs:{placeholder:t.$t("label.search")+" "+t.$t(t.sourceItem.label),debounce:"200",borderless:"",clearable:"",autofocus:""},scopedSlots:t._u([{key:"append",fn:function(){return[o("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.term,callback:function(e){t.term=e},expression:"term"}})],1)],1),t._e(),t.term?o("div",{staticClass:"col-12 q-py-md"},[t._v("\n              "+t._s(t.$t("label.search"))+": "+t._s(t.term)+"\n            ")]):t._e()]),t.filteredNotes.length>0?o("section",{class:t.isMobile?"":"q-px-lg"},[o("q-list",{ref:"list",staticClass:"o-navi-list",attrs:{"no-border":"",separator:"",link:"","inset-delimiter":""}},[t._l(t.filteredNotes,(function(e,n){return[1===e.type?o("o-common-item",{key:n,attrs:{icon:"mdi-file-document-box",label:e.label,sideLabel:t.timeMulti(e.time).fromNow,clickable:""},nativeOn:{click:function(o){return t.onSelected(e)}}}):o("o-common-item",{key:n,attrs:{icon:"mdi-markdown",label:e.label,sideLabel:t.timeMulti(e.time).fromNow,clickable:""},nativeOn:{click:function(o){return t.onSelected(e)}}})]}))],2)],1):t._e()])])])],1)],1)},Ze=[],to=o("8a60"),eo=o.n(to);function oo(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function no(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?oo(Object(o),!0).forEach((function(e){r()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):oo(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var io={name:"search-modal",mixins:[ge,ve["a"],ft["a"]],data:function(){return{term:"",source:"local"}},methods:no({},Object(j["b"])({queryNote:"A_QUERY_NOTE"}),{onSelectSource:function(t){this.source=t},onSelected:function(t){t&&t.value&&(this.terms=t.label,this.openNote(t))},formatNotes:function(t){return t.map((function(t){return{label:t.title,icon:"assignment",stamp:"stamp",time:t.cedittime,value:t.id,id:t.id,type:t.type}}))},fulltextSearchFilter:function(t){return function(e){var o=e.title||"",n=e.source||"",i=o.toLowerCase()+" "+n.toLowerCase(),a=i.indexOf(t.toLowerCase());return t.length>1?a>=0:0===a}},bindActions:function(){var t=this;eo.a.bind(["esc","backspace"],(function(){return t.onBack()})),eo.a.bind(["enter"],(function(){return t.onFocus()}))},onFocus:function(){this.term="",this.$refs.term.focus()},onBack:function(){this.term="",this.$router.push("/editor")}}),computed:no({},Object(j["c"])({notes:"notes",currentNote:"currentNote",currentNotebook:"currentNotebook"}),{filteredNotes:function(){var t=this.term?this.notes.filter(this.fulltextSearchFilter(this.term)):[],e=this.formatNotes(t);return e},sourceItem:function(){return{icon:"cloud"===this.source?"cloud":"computer",label:"label.".concat(this.source,".note")}}}),watch:{},mounted:function(){this.queryNote(),this.bindActions()},components:{OCommonItem:et["a"]}},ao=io,ro=(o("b75b"),Object(p["a"])(ao,Xe,Ze,!1,null,null,null)),so=ro.exports,co=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("o-common-dialog",{staticClass:"auth-tip-model",attrs:{position:"top",header:!1,title:t.$t("label.signin"),icon:"input","confirm-label":t.$t("label.signin"),"content-style":{padding:"20px",width:"600px",height:"500px"},show:t.isShow},on:{close:function(e){return t.onHide()},confirm:function(e){return t.$router.push("/auth/signin")}}},[o("template",{slot:"content"},[o("div",{staticClass:"q-py-md"},[o("q-banner",{staticClass:"col-12 text-white",class:t.color,attrs:{rounded:""},scopedSlots:t._u([{key:"avatar",fn:function(){return[o("q-icon",{attrs:{name:t.icon,color:"blue-1"}})]},proxy:!0}])},[o("div",{staticClass:"text-bold"},[t._v(t._s(t.tips))])])],1),o("div",{staticClass:"text-center"},[t._v("该功能需要登录后才能使用，请先登录！")])])],2)},lo=[];function uo(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function mo(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?uo(Object(o),!0).forEach((function(e){r()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):uo(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var po={name:"auth-tips-modal",data:function(){return{}},methods:{onHide:function(){this.$store.dispatch("SetComponent","",{}),this.$emit("close")}},computed:mo({},Object(j["c"])({comType:"comType",comConfig:"comConfig"}),{isShow:{get:function(){return"auth-tips"===this.comType},set:function(){}},color:function(){return this.comConfig.color?"bg-".concat(this.comConfig.color):"bg-blue"},icon:function(){return this.comConfig.icon||"apps"},tips:function(){return this.comConfig.tips||""}}),watch:{},mounted:function(){},components:{OCommonDialog:dt["a"]}},ho=po,fo=Object(p["a"])(ho,co,lo,!1,null,null,null),bo=fo.exports,vo=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-dialog",{ref:"modal",attrs:{position:t.isMobile?"top":"standard","content-css":t.css,"content-class":"quicknote-guide-modal o-common-modal"},on:{show:t.onShow,hide:t.onHide}},[o("q-card",{staticStyle:{width:"500px"},style:t.isMobile?"max-width: 100vw":""},[o("q-bar",{staticClass:"bg-white q-py-md"},[o("div",[t._v(t._s(t.$t("quicknote")))]),o("q-space"),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[o("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v(t._s(t.$t("action.close")))])],1)],1),o("q-card-section",[o("o-display-btn",{attrs:{icon:"reorder","btn-class":"bg-indigo text-white"}},[t._v("\n        快速创建笔记\n      ")]),o("o-display-btn",{attrs:{icon:"apps","btn-class":"bg-green text-white"}},[t._v("\n        文字、链接、图片或文件\n      ")]),o("o-display-btn",{attrs:{icon:"mdi-timeline-text","btn-class":"bg-blue text-white"}},[t._v("\n        自带时间戳，形成时间线，构建上下文\n      ")]),o("o-display-btn",{attrs:{icon:"mdi-content-copy"}},[t._v("\n        复制粘贴(Ctrl+V)直接创建一条笔记\n      ")]),o("o-display-btn",{attrs:{icon:"mdi-link","btn-class":"bg-amber text-white"}},[t._v("\n        网页链接，自动解析网页摘要\n      ")]),o("o-display-btn",{attrs:{icon:"mdi-radiobox-marked","btn-class":"bg-purple text-white"}},[t._v("\n        标记不同颜色，快速定位查找\n      ")]),o("o-display-btn",{attrs:{icon:"remove_red_eye","btn-class":"bg-blue-grey text-white"}},[t._v("\n        列表、卡片和时间线三种视图查看\n      ")])],1)],1)],1)},wo=[],yo=o("d9ef");function go(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function Oo(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?go(Object(o),!0).forEach((function(e){r()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):go(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var ko={name:"quicknote-guide-modal",mixins:[ge,ve["a"]],data:function(){return{}},methods:Oo({},Object(j["b"])({})),computed:Oo({},Object(j["c"])({})),watch:{},mounted:function(){},components:{ODisplayBtn:yo["a"]}},_o=ko,qo=(o("82b6"),Object(p["a"])(_o,vo,wo,!1,null,null,null)),jo=qo.exports,Co=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-dialog",{ref:"modal",attrs:{position:"top","content-class":"control-panel-modal o-common-modal"},on:{show:t.onShow,hide:t.onHide}},[o("q-card",{staticClass:"search-card"},[o("q-card-section",[o("q-select",{ref:"select",attrs:{tabindex:"0",autofocus:"","use-input":"","hide-selected":"","input-debounce":"10",options:t.options,"hide-dropdown-icon":"","menu-offset":[0,0],"popup-content-class":"control-panel-popup",standout:"",borderless:"","hide-bottom-space":""},on:{filter:t.filterFn,input:t.onSelected,"popup-hide":t.onHide},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:(e.stopPropagation(),t.onHide(e))}},scopedSlots:t._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"keyboard_arrow_right"}})]},proxy:!0},{key:"append",fn:function(){return[t._e(),o("section",{staticClass:"q-px-sm"},[o("kbd",[t._v("⌘")]),o("kbd",[t._v("⇧")]),o("kbd",[t._v("P")])])]},proxy:!0},{key:"no-option",fn:function(){return[o("q-item",[o("q-item-section",{staticClass:"text-grey"},[t._v("\n              No results\n            ")])],1)]},proxy:!0},{key:"option",fn:function(e){return[e.opt.split?o("q-separator",{attrs:{color:"secondary"}}):t._e(),e.opt.value?o("q-item",t._g(t._b({staticClass:"bg-light text-text",attrs:{clickable:""}},"q-item",e.itemProps,!1),e.itemEvents),[o("q-item-section",{attrs:{avatar:""}},[o("q-icon",{attrs:{name:e.opt.icon,size:"1.2rem"}})],1),o("q-item-section",{},[t._v("\n              "+t._s(e.opt.label)+"\n            ")]),o("q-item-section",{attrs:{side:""}},[o("section",t._l(e.opt.keys,(function(e,n){return o("kbd",{key:n},[t._v(t._s(e))])})),0)])],1):t._e()]}}]),model:{value:t.term,callback:function(e){t.term=e},expression:"term"}})],1)],1)],1)},No=[];function To(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function xo(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?To(Object(o),!0).forEach((function(e){r()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):To(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var So={name:"control-panel-modal",mixins:[ge,ve["a"]],data:function(){return{term:"",options:[]}},methods:xo({},Object(j["b"])({}),{onShow:function(){this.options=this.markdownOptions,this.$refs.select.showPopup()},commandFilter:function(t){return function(e){var o=e.label,n=e.value||"";n=o.toLowerCase()+" "+n.toLowerCase();var i=n.indexOf(t.toLowerCase());return i>=0}},filterFn:function(t,e,o){var n=this;e((function(){n.options=t?n.markdownOptions.filter(n.commandFilter(t)):n.markdownOptions}))},onSelected:function(t){t.value&&this.action("setNoteAction",t.value,t.params),this.onHide()},onTest:function(){}}),computed:xo({},Object(j["c"])({}),{markdownOptions:function(){return[{label:this.$t("note.add"),value:"create",icon:"add",keys:["⌘","N"]},{label:this.$t("action.bold"),value:"format-bold",icon:"format_bold",keys:["⌘","B"]},{label:this.$t("action.bold"),value:"format-bold",icon:"format_bold",keys:["⌘","B"]},{label:this.$t("diagram.flow"),value:"markdown-diagram",params:"flow",icon:"mdi-sitemap",keys:["⌘","B"]},{label:this.$t("diagram.sequence"),value:"markdown-diagram",params:"flow",icon:"mdi-sitemap",keys:["⌘","B"]},{label:this.$t("diagram.class"),value:"markdown-diagram",params:"flow",icon:"mdi-sitemap",keys:["⌘","B"]},{label:this.$t("diagram.state"),value:"markdown-diagram",params:"flow",icon:"mdi-sitemap",keys:["⌘","B"]},{label:this.$t("diagram.gantt"),value:"markdown-diagram",params:"flow",icon:"mdi-sitemap"},{label:"HOHO",value:"hhoo",keys:["⌘","⇧"]},{label:"HOHO",value:"hhoo",keys:["⌘","⇧"]},{label:"HOHO",value:"hhoo",keys:["⌘","⇧"]},{label:"HOHO",value:"hhoo",keys:["⌘","⇧"]},{label:"HOHO",value:"hhoo",keys:["⌘","⇧"]},{label:"HOHO",value:"hhoo",keys:["⌘","⇧"]},{label:"HOHO",value:"hhoo",keys:["⌘","⇧"]},{label:"HOHO",value:"hhoo",keys:["⌘","⇧"]}]}}),watch:{},mounted:function(){},components:{OCommonItem:et["a"]}},$o=So,Po=(o("e345"),Object(p["a"])($o,Co,No,!1,null,null,null)),Do=Po.exports;function Eo(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function Ao(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Eo(Object(o),!0).forEach((function(e){r()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):Eo(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var Mo={name:"modal-entry",data:function(){return{value:""}},props:{title:{type:String,default:"Title"}},methods:{},computed:Ao({},Object(j["c"])({comType:"comType",comConfig:"comConfig"})),watch:{comType:function(t,e){console.log("entry changed",t,e)}},mounted:function(){},components:{ShareModal:Ce,ShortcutModal:De,MediaModal:Be,PreviewModal:Ye,SearchModal:so,AuthTipsModal:bo,QuicknoteGuideModal:jo,ControlPanelModal:Do}},Qo=Mo,Ho=Object(p["a"])(Qo,ee,oe,!1,null,null,null),Io=Ho.exports,Lo=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-tabs",{ref:"tabs",staticClass:"o-editor-tabs",attrs:{align:"left"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.tabNotes,(function(e,n){return o("q-tab",{key:n,staticClass:"o-splitter-right",attrs:{name:e.id},on:{click:function(o){return t.onClickTab(e)}}},[o("div",{staticClass:"row col-12 justify-center o-tab-content"},[o("div",{staticClass:"row justify-center items-center item item-icon item-icon-left"},[99===e.type?o("img",{attrs:{src:"statics/logo.png",width:"16"}}):1===e.type?o("q-icon",{attrs:{name:"mdi-file-document-box",size:"1.2rem",color:"purple"}}):o("q-icon",{attrs:{name:"mdi-markdown",size:"1.2rem",color:"blue"}})],1),o("div",{staticClass:"row col-12 items-center item item-title"},[o("span",[t._v(t._s(e.title))])]),o("div",{staticClass:"row justify-center items-center item item-icon item-icon-right"},[99!==e.type&&0===e.state?o("div",{staticClass:"status"},[o("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{icon:"mdi-circle-medium",size:"8px",flat:"",round:""}})],1):t._e(),o("div",[99===e.type?o("span"):(e.type,o("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"btn-close",attrs:{icon:"close",size:"8px",flat:"",round:""},on:{click:function(o){return t.onClose(e.id)}}}))],1)])]),o("q-tooltip",{staticClass:"o-tooltip",attrs:{anchor:"top middle",self:"bottom middle",offset:[0,5],delay:500}},[t._v("\n      "+t._s(e.title)+"\n    ")]),o("q-menu",{attrs:{"touch-position":"","context-menu":""}},[o("q-list",{staticStyle:{"min-width":"160px"},attrs:{dense:""}},[o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},nativeOn:{click:function(e){return t.onAddNote(e)}}},[o("q-item-section",{attrs:{side:""}},[o("q-icon",{attrs:{name:"post_add",color:"purple"}})],1),o("q-item-section",[t._v(t._s(t.$t("note.add")))])],1),o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},nativeOn:{click:function(e){return t.onAddMarkdown(e)}}},[o("q-item-section",{attrs:{side:""}},[o("q-icon",{attrs:{name:"mdi-markdown-outline",color:"blue"}})],1),o("q-item-section",[t._v(t._s(t.$t("note.markdown.add")))])],1),99!==e.type?[o("q-separator"),o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},nativeOn:{click:function(o){return t.onClose(e.id)}}},[o("q-item-section",[t._v(t._s(t.$t("tab.close")))])],1),o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},nativeOn:{click:function(o){return t.onCloseOthers(e)}}},[o("q-item-section",[t._v(t._s(t.$t("tab.close.others")))])],1),o("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},nativeOn:{click:function(o){return t.onCloseRight(e)}}},[o("q-item-section",[t._v(t._s(t.$t("tab.close.right")))])],1)]:t._e()],2)],1)],1)})),1)},Ro=[];function Fo(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function Bo(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Fo(Object(o),!0).forEach((function(e){r()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):Fo(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var Vo={name:"o-editor-tabs",mixins:[ft["a"]],data:function(){return{value:""}},computed:Bo({},Object(j["c"])({isProgress:"isProgress",openedNotes:"openedNotes",currentNote:"currentNote"}),{tabNotes:function(){var t=this.openedNotes.slice(0);return t.unshift({type:99,title:this.$t("welcome"),path:"/welcome"}),t},currentNoteId:function(){return this.currentNote.id},tabSize:function(){return this.openedNotes.length}}),methods:{onClickTab:function(t){99===t.type?this.$router.push(t.path):1===t.type?this.$router.push({name:"note",params:{id:t.id}}):this.$router.push({name:"markdown",params:{id:t.id}})},onAddNote:function(){this.$store.commit("setNoteAction",(new Date).getTime()+"|note-action-add")},onAddMarkdown:function(){this.$store.commit("setNoteAction",(new Date).getTime()+"|action-add")},onClose:function(t){this.$store.commit("CLOSE_NOTE",t),t===this.currentNoteId&&this.openedNotes.length>0&&this.openNote(this.openedNotes[0]),0===this.openedNotes.length&&this.$router.push("/welcome")},onCloseOthers:function(t){this.$store.commit("CLOSE_NOTE_OTHERS",t.id),0===this.openedNotes.length?this.$router.push("/welcome"):this.openNote(t)},onCloseRight:function(t){this.$store.commit("CLOSE_NOTE_RIGHT",t.id),0===this.openedNotes.length?this.$router.push("/welcome"):this.openNote(t)},openNote:function(t){1===t.type?this.$router.push({name:"note",params:{id:t.id}}):this.$router.push({name:"markdown",params:{id:t.id}})},openTab:function(t){this.$nextTick((function(){window.dispatchEvent(new Event("resize"))}))}},watch:{currentNoteId:function(t,e){this.value=t},tabSize:function(t,e){this.openTab(t)}},mounted:function(){this.value=this.currentNoteId}},zo=Vo,Wo=(o("a4b7"),Object(p["a"])(zo,Lo,Ro,!1,null,null,null)),Go=Wo.exports,Ko=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"o-user-tour"},[o("v-tour",{attrs:{name:"welcomeTour",steps:t.welcomeSteps,options:t.options,callbacks:t.welcomeCallbacks}}),o("v-tour",{attrs:{name:"noteTour",steps:t.noteSteps,options:t.options,callbacks:t.noteCallbacks}}),o("v-tour",{attrs:{name:"markdownTour",steps:t.markdownSteps,options:t.options,callbacks:t.markdownCallbacks}}),o("v-tour",{attrs:{name:"quicknoteTour",steps:t.quicknoteSteps,options:t.options,callbacks:t.quicknoteCallbacks}})],1)},Uo=[],Jo=o("2536"),Yo=o.n(Jo),Xo=o("5d2d");function Zo(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function tn(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Zo(Object(o),!0).forEach((function(e){r()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):Zo(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}zt["a"].use(Yo.a),o("2440f");var en={name:"o-user-tour",mixins:[ve["a"]],data:function(){return{welcomeCallbacks:{onNextStep:this.nextWelcomeTour,onSkip:this.stopWelcomeTour,onStop:this.stopWelcomeTour},noteCallbacks:{onStart:this.startNoteTour,onNextStep:this.nextNoteTour,onSkip:this.stopNoteTour,onStop:this.stopNoteTour},markdownCallbacks:{onStart:this.startMarkdownTour,onNextStep:this.nextMarkdownTour,onSkip:this.stopMarkdownTour,onStop:this.stopMarkdownTour},quicknoteCallbacks:{onSkip:this.stopQuicknoteTour,onStop:this.stopQuicknoteTour}}},props:{icon:{type:String,default:""}},methods:{startTour:function(t,e){if(e){var o=Object(Xo["a"])("tour.".concat(t));if(o)return void console.log("Already read tour, ignore ...")}switch(t){case"welcome":this.$tours.welcomeTour.start();break;case"note":this.$tours.noteTour.start();break;case"markdown":this.$tours.markdownTour.start();break;case"quicknote":this.$tours.quicknoteTour.start();break}},nextWelcomeTour:function(t){console.log("nextWelcomeTour",t)},stopWelcomeTour:function(){Object(Xo["h"])("tour.welcome",1)},startNoteTour:function(){this.action("setNoteAction","note-action-menu-add")},nextNoteTour:function(t){0===t?this.action("setNoteAction","note-action-menu-info"):1===t&&this.action("setNoteAction","note-side-panel")},stopNoteTour:function(){this.action("setNoteAction","note-side-panel-off"),Object(Xo["h"])("tour.note",1)},startMarkdownTour:function(){this.action("setNoteAction","markdown-action-menu-add")},nextMarkdownTour:function(t){0===t?this.action("setNoteAction","markdown-action-menu-info"):2===t&&this.action("setNoteAction","markdown-side-panel")},stopMarkdownTour:function(){this.action("setNoteAction","markdown-side-panel-off"),Object(Xo["h"])("tour.markdown",1)},stopQuicknoteTour:function(){Object(Xo["h"])("tour.quicknote",1)},onRoute:function(t){var e=t.name;"welcome"===e?this.startTour("welcome",!0):"note"===e||"note_new"===e?this.startTour("note",!0):"markdown"===e||"markdown_new"===e?this.startTour("markdown",!0):"quicknote"!==e&&"qtag"!==e||this.startTour("quicknote",!0)}},computed:tn({},Object(j["c"])({tourAction:"tourAction"}),{options:function(){return{highlight:!0,startTimeout:500,labels:{buttonSkip:"跳过",buttonPrevious:"前一步",buttonNext:"下一步",buttonStop:"结束"}}},welcomeSteps:function(){return[{target:".welcome-step-start",header:{title:"快速开始"},content:"快捷创建笔记和Markdown笔记",params:{placement:"left"}},{target:".welcome-step-create",header:{title:"新建"},content:'<ul class="text-left"><li>笔记</li><li>Markdown笔记</li><li>笔记本</li></ul>'},{target:".welcome-step-search",content:"全文搜索：笔记本和笔记",params:{placement:"bottom"}}]},noteSteps:function(){return[{target:".note-step-add",header:{title:"添加内容"},content:"更多内容，比如：<div>数学公式、流程图等</div>",params:{placement:"left"}},{target:".note-step-info",header:{title:"笔记信息"},content:'<ul class="text-left"><li>加星</li><li>修改笔记本</li><li>标签</li></ul>',params:{placement:"left"}},{target:".note-step-side-editor",header:{title:"编辑器"},content:'<div class="text-left">所见即所得</div><div><li>Markdown行级渲染</li><li>选中内容显示快捷工具条</li></div>',params:{placement:"bottom"}},{target:".note-step-side-panel",header:{title:"侧边栏"},content:"基本信息、目录大纲和历史记录",params:{placement:"left"}}]},markdownSteps:function(){return[{target:".markdown-step-add",header:{title:"添加内容"},content:"更多内容，比如：<div>数学公式、流程图等</div>",params:{placement:"left"}},{target:".markdown-step-info",header:{title:"笔记信息"},content:'<ul class="text-left"><li>加星</li><li>修改笔记本</li><li>标签</li></ul>',params:{placement:"left"}},{target:".markdown-step-editor",header:{title:"编辑器"},content:"流畅书写Markdown，专注内容<div><li>快捷键</li><li>代码高亮</li></div>",params:{placement:"right"}},{target:".markdown-step-preview",header:{title:"实时预览"},content:"实时查看Markdown渲染效果，行级滚动同步",params:{placement:"left"}},{target:".markdown-step-side-panel",header:{title:"侧边栏"},content:"基本信息、快捷设置、目录大纲和历史记录",params:{placement:"left"}}]},quicknoteSteps:function(){return[{target:".quicknote-step-0",header:{title:"快速开始"},content:"输入文字或者粘贴，快速创建一条笔记",params:{placement:"top"}},{target:".quicknote-step-1",header:{title:"新建标签"},content:"对快速笔记进行分类",params:{placement:"bottom"}},{target:".quicknote-step-2",content:'<div class="text-left">标记颜色，用于：</div><div><li>优先级</li><li>分组</li><li>快速定位</li></div>',params:{placement:"top"}},{target:".quicknote-step-3",content:"不同视图查看快速笔记",params:{placement:"top"}}]}}),watch:{$route:function(t,e){this.onRoute(t)},tourAction:function(t,e){var o,n,i=t.split("|");i.length>=1&&(o=i[1]),i.length>=2&&(n=i[2]),this.startTour(o,n)}},mounted:function(){this.onRoute(this.$route)}},on=en,nn=(o("908c"),Object(p["a"])(on,Ko,Uo,!1,null,null,null)),an=nn.exports;function rn(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function sn(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?rn(Object(o),!0).forEach((function(e){r()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):rn(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var cn={name:"layout-console",data:function(){return{showToolbar:!0,leftDrawerOpen:!0,miniState:!1,selectedActivity:"editor",activityHovered:!1,view:"editor",naviView:"tree"}},components:{EditorToolbar:s["a"],NotebooksToolbar:f,SearchToolbar:O,QuicknoteToolbar:k["a"],MyToolbar:$,SystemToolbar:I,ShareToolbar:Y,MyNavi:st,SystemNavi:Ft,ShareNavi:te,NotebookTree:kt,QtagTree:Mt,ModalEntry:Io,OEditorTabs:Go,OUserTour:an},methods:sn({},Object(j["b"])({A_SET_ACVITITY:"A_SET_ACVITITY",setShowSidebar:"A_SET_SHOW_SIDEBAR"}),{toggleDrawer:function(){this.leftDrawerOpen=!this.leftDrawerOpen},toggleSidebar:function(){var t=!this.showSidebar;this.setShowSidebar(t),this.miniState=t,console.log("mini",this.miniState)},onActivitybarHover:function(t){this.activityHovered="disable"!==t},onActivitybarLeave:function(t){t.x>=260&&(this.activityHovered=!1)},onClickTab:function(t){this.$router.push({name:t}),this.setActivity(t),this.activityHovered=!0},setActivity:function(t){this.selectedActivity=t,this.A_SET_ACVITITY(t)},handleRoute:function(t){var e=t.path;this.showToolbar=!1,e.indexOf("welcome")>0?this.view="editor":e.indexOf("quicknote")>0?(this.view="quicknote",this.showToolbar=!0):e.indexOf("my")>0?this.view="my":e.indexOf("system")>0?this.view="system":e.indexOf("notebooks")>0?this.view="notebooks":e.indexOf("search")>0?this.view="search":e.indexOf("share")>0&&e.indexOf("notebook")>0?this.view="share-notebook":e.indexOf("share")>0&&e.indexOf("note")>0?this.view="share-note":(this.view="editor",this.showToolbar=!0,1===this.currentNote.type&&(this.showToolbar=!1)),this.setActivity(this.view)}}),computed:sn({},Object(j["c"])({isMobile:"isMobile",currentNote:"currentNote",openedNotes:"openedNotes",showSidebar:"showSidebar",setting:"setting"}),{layoutView:function(){return this.isMobile?"hHh Lpr fFf":"lHh Lpr lFf"},currentNoteType:function(){return this.currentNote.type},sidebarWidth:function(){return this.miniState?60:260},sidebarClass:function(){return this.activityHovered?"fixed-sidebar":""},showNoteTab:function(){var t=!1;return!this.isMobile&&this.openedNotes.length>0&&("editor"===this.selectedActivity||"note"===this.selectedActivity)&&this.setting.noteTab&&(t=!0),t},showHeader:function(){var t="editor"===this.view?this.openedNotes.length>0&&"welcome"!==this.$route.name&&this.showToolbar:this.showToolbar;return t},drawerSetting:function(){return this.$store.state.setting.drawer},config:function(){var t={toolbar:"editor",navi:"notebook"};switch(this.view){case"notebooks":break}return t}}),watch:{$route:function(t,e){this.handleRoute(t)},currentNoteType:function(t,e){this.showToolbar=1!==t},drawerSetting:function(t,e){this.toggleDrawer()},showSidebar:function(t,e){console.log("sidebar changed",t),this.miniState=!t}},mounted:function(){this.handleRoute(this.$route)}},ln=cn,un=(o("5263"),Object(p["a"])(ln,n,i,!1,null,null,null));e["default"]=un.exports},"3de9":function(t,e,o){},"3e46":function(t,e,o){},"4c27":function(t,e,o){"use strict";var n=o("3de9"),i=o.n(n);i.a},5263:function(t,e,o){"use strict";var n=o("6958"),i=o.n(n);i.a},6958:function(t,e,o){},"6fd2":function(t,e,o){},"759e":function(t,e,o){"use strict";var n=o("98f4"),i=o.n(n);i.a},"82b6":function(t,e,o){"use strict";var n=o("2296"),i=o.n(n);i.a},"908c":function(t,e,o){"use strict";var n=o("baf2"),i=o.n(n);i.a},"98f4":function(t,e,o){},a4b7:function(t,e,o){"use strict";var n=o("dbf6"),i=o.n(n);i.a},b6b2:function(t,e,o){},b75b:function(t,e,o){"use strict";var n=o("d978"),i=o.n(n);i.a},baf2:function(t,e,o){},d03c:function(t,e,o){},d978:function(t,e,o){},dbf6:function(t,e,o){},e205:function(t,e,o){},e345:function(t,e,o){"use strict";var n=o("6fd2"),i=o.n(n);i.a},f1a8:function(t,e,o){},f819:function(t,e,o){"use strict";var n=o("f1a8"),i=o.n(n);i.a}}]);