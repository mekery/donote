(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[36],{5620:function(o,t,e){},"5e62":function(o,t,e){"use strict";e.r(t);var n=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("q-page",{staticClass:"page-notebook"},[e("q-scroll-area",{ref:"notebooksScroll",staticClass:"notebook-wrapper"},[e("div",{staticClass:"o-cards-wrapper col-12"},[e("div",{staticClass:"o-cards row q-col-gutter-lg"},o._l(o.parentNotebooks,(function(t,n){return e("div",{key:n,staticClass:"col-md-3 col-sm-6 col-xs-12"},[e("q-card",{attrs:{square:""}},[e("q-card-section",{staticClass:"row items-center notebook-card-title"},[e("section",{staticClass:"title col"},[e("q-icon",{attrs:{name:"folder",size:"1.2rem"}}),o._v(" "+o._s(t.name)+"\n              ")],1),e("section",{staticClass:"col-auto"},[e("q-btn",{attrs:{slot:"right",icon:"menu",flat:""},slot:"right"},[e("q-menu",{ref:"itemPopover",refInFor:!0,attrs:{anchor:"bottom right",self:"top right"}},[e("div",{staticStyle:{"min-width":"200px"}},[e("q-list",{staticClass:"o-navi-list",attrs:{"no-border":"",link:"","inset-delimiter":""}},[e("o-menu-item",{attrs:{icon:"book",label:o.$t("action.edit"),"side-icon":"edit"},nativeOn:{click:function(e){return o.manageNotebook(t)}}}),e("o-menu-item",{attrs:{icon:"book",label:o.$t("action.remove"),"side-icon":"close"},nativeOn:{click:function(e){return o.beforeDelete(t)}}})],1)],1)])],1)],1)]),e("q-separator"),e("q-card-section",{staticClass:"notebook-card-content"},[e("q-list",{staticClass:"o-navi-list",attrs:{"no-border":"",link:"","inset-delimiter":""}},o._l(o.getChildNotebooks(t.id),(function(n,i){return e("o-menu-item",{key:i,attrs:{size:"2.5rem",icon:"book",label:n.name,"side-icon":"menu",childmenu:""},nativeOn:{dblclick:function(e){n.parentName=t.name,o.manageNotebook(n)}}},[e("q-menu",{ref:"subitemPopover",refInFor:!0,attrs:{anchor:"bottom right",self:"top right"}},[e("div",{staticStyle:{"min-width":"200px"}},[e("q-list",{staticClass:"o-navi-list",attrs:{"no-border":"",link:"","inset-delimiter":""}},[e("o-menu-item",{attrs:{icon:"book",label:o.$t("action.edit"),"side-icon":"edit"},nativeOn:{click:function(e){n.parentName=t.name,o.manageNotebook(n)}}}),e("o-menu-item",{attrs:{icon:"book",label:o.$t("action.remove"),"side-icon":"close"},nativeOn:{click:function(t){return o.beforeDelete(n)}}})],1)],1)])],1)})),1)],1),e("q-separator"),e("q-card-actions",{staticClass:"o-actions",attrs:{align:"center"}},[e("q-btn",{attrs:{flat:"",color:"default",icon:"add"},on:{click:function(e){return o.manageNotebook({parent:t.id,parentName:t.name})}}},[o._v(o._s(o.$t("notebook")))])],1)],1)],1)})),0)])]),e("section",{staticClass:"notebook-footer"},[e("div",{staticClass:"row justify-center o-actions"},[e("q-btn",{attrs:{icon:"reply",color:"blue-grey"},on:{click:function(t){return o.$router.push("/editor")}}},[o._v(o._s(o.$t("action.back")))]),e("q-btn",{attrs:{icon:"add",color:"primary"},on:{click:function(t){return o.manageNotebook({})}}},[o._v(o._s(o.$t("notebook.addgroup")))])],1)]),e("section",[e("o-side-dialog",{attrs:{title:"Notebook",contentCss:{padding:"20px",height:"260px",width:"500px"},show:o.show,actionVisible:!0},on:{show:o.onModalOpen,close:function(t){return o.showNotebook(!1)},confirm:o.saveNotebook}},[e("template",{slot:"content"},[o.notebook.parent?e("div",{staticClass:"fields"},[e("q-select",{attrs:{options:o.parentOptions,label:o.$t("notebook.group"),"map-options":""},scopedSlots:o._u([{key:"before",fn:function(){return[e("q-icon",{attrs:{name:"folder"}})]},proxy:!0}],null,!1,4025712507),model:{value:o.notebook.parent,callback:function(t){o.$set(o.notebook,"parent",t)},expression:"notebook.parent"}}),e("q-input",{ref:"notebookName",attrs:{label:o.$t("notebook.title")},on:{keyup:function(t){return!t.type.indexOf("key")&&o._k(t.keyCode,"enter",13,t.key,"Enter")?null:o.saveNotebook(t)}},scopedSlots:o._u([{key:"before",fn:function(){return[e("q-icon",{attrs:{name:"book"}})]},proxy:!0}],null,!1,1606455044),model:{value:o.notebook.name,callback:function(t){o.$set(o.notebook,"name",t)},expression:"notebook.name"}})],1):e("div",{staticClass:"fields"},[e("q-input",{ref:"notebookGroup",attrs:{label:o.$t("notebook.group"),autofocus:!0},on:{keyup:function(t){return!t.type.indexOf("key")&&o._k(t.keyCode,"enter",13,t.key,"Enter")?null:o.saveNotebook(t)}},scopedSlots:o._u([{key:"before",fn:function(){return[e("q-icon",{attrs:{name:"folder"}})]},proxy:!0}]),model:{value:o.notebook.name,callback:function(t){o.$set(o.notebook,"name",t)},expression:"notebook.name"}})],1)])],2)],1)],1)},i=[],r=(e("8e6e"),e("cadf"),e("06db"),e("456d"),e("28a5"),e("ac4d"),e("8a81"),e("ac6a"),e("c47a")),a=e.n(r),s=(e("7f7f"),e("fbe4")),c=e("a54b"),l=e("625b"),b=e("787d"),u=e("2f62"),f=e("ed08"),d=e("b0b9"),k=e("6eb0");function p(o,t){var e=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),e.push.apply(e,n)}return e}function h(o){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?p(Object(e),!0).forEach((function(t){a()(o,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(e)):p(Object(e)).forEach((function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(e,t))}))}return o}var m={name:"notebook",data:function(){return{terms:"",showSearch:!1,notebook:{id:"",name:"Notebook",parent:"",parentName:""},show:!1}},components:{BaseToolbar:s["a"],OMenuItem:c["a"],OCommonDialog:l["a"],OSideDialog:b["a"]},methods:{handleAction:function(o,t){switch(o){case"action-add-notebook":this.manageNotebook({});break}},getChildNotebooks:function(o){function t(t){return t.parent===o}return this.notebooks.filter(t).sort(this.sortNotebook)},getChildNotes:function(o){function t(t){return t.notebook===o}return this.notes.filter(t)},sortNotebook:function(o,t){return o.name&&t.name&&o.name.toLowerCase()<t.name.toLowerCase()?-1:1},showNotebook:function(o){this.show=o},manageNotebook:function(o){o.id&&(o.parent?this.$refs.subitemPopover.forEach((function(o){o.hide()})):this.$refs.itemPopover.forEach((function(o){o.hide()}))),this.notebook={id:o.id,name:o.name,parent:o.parent},this.showNotebook(!0)},onModalOpen:function(){this.notebook.parent?this.$refs.notebookName.focus():this.$refs.notebookGroup.focus()},saveNotebook:function(){this.notebook.id?this.updateNotebook():this.createNotebook(),this.show=!1},createNotebook:function(){var o=this,t=Object(f["b"])(),e=this.notebook.parent?this.notebook.parent:"",n={id:t,parent:e,name:this.notebook.name};Object(k["d"])(n,!1).then((function(t){console.log("save notebook",t),o.loadNotebooks()}))},updateNotebook:function(){var o=this,t=this.notebook.parent?this.notebook.parent:"";Object(k["e"])({id:this.notebook.id,name:this.notebook.name,parent:t}).then((function(t){o.loadNotebooks()}))},beforeDelete:function(o){var t=this;if(o.id)if(o.parent){this.$refs.subitemPopover.forEach((function(o){o.hide()}));var e=this.getChildNotes(o.id);if(e.length>0)return void Object(d["f"])("Cannot remove if it has notes.")}else{this.$refs.itemPopover.forEach((function(o){o.hide()}));var n=this.getChildNotebooks(o.id);if(n.length>0)return void Object(d["f"])("Cannot remove if it has children notebooks.")}this.$q.dialog({title:"Confirm",message:"Are you sure remove?",ok:"Yes",cancel:"No"}).onOk((function(){t.removeNotebook(o)}))},removeNotebook:function(o){var t=this,e=o.id,n=this.currentNotebook.id;Object(k["c"])(o).then((function(o){t.loadNotebooks(),e===n&&t.$store.commit("SET_CURRENT_NOTEBOOK_ID","")}))},loadNotebooks:function(){this.$store.dispatch("GetNoteBooks").then((function(o){})).catch((function(o){console.error(o)}))}},computed:h({},Object(u["c"])({currentNotebook:"currentNotebook",notebooks:"notebooks",parentNotebooks:"parentNotebooks",notes:"notes"}),{noteAction:function(){return this.$store.state.note.action},parentOptions:function(){var o=[],t=!0,e=!1,n=void 0;try{for(var i,r=this.parentNotebooks[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value,s={label:a.name,value:a.id};o.push(s)}}catch(c){e=!0,n=c}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}return console.log("opotions",o),o}}),watch:{noteAction:function(o,t){var e,n,i=o.split("|");i.length>=1&&(e=i[1]),i.length>=2&&(n=i[2]),this.handleAction(e,n)}},created:function(){this.$emit("viewChanged","notebooks")},mounted:function(){this.loadNotebooks()}},v=m,N=(e("645d"),e("2877")),g=Object(N["a"])(v,n,i,!1,null,null,null);t["default"]=g.exports},"645d":function(o,t,e){"use strict";var n=e("5620"),i=e.n(n);i.a}}]);