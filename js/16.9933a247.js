(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{"1b75":function(t,e,o){"use strict";var n=o("8aaf"),a=o.n(n);a.a},"8aaf":function(t,e,o){},c316:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-page",{staticClass:"page-quicknote row",on:{paste:function(e){return e.stopPropagation(),t.onPaste(e)}}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.showProgress,expression:"showProgress"}],staticClass:"topProgress"},[o("div",{staticClass:"progress-bg bg-primary"}),o("div",{staticClass:"progress-text"},[o("span",{staticClass:"text-primary"},[t._v(t._s(t.$t("label.refresh")))]),o("q-spinner",{staticStyle:{"margin-left":"1rem"},attrs:{color:"primary",size:36}})],1)]),o("q-scroll-area",{ref:"qnoteScroll",staticClass:"quicknote-wrapper",class:t.style},[o("q-scroll-observer",{on:{scroll:t.onScroll}}),o("div",{staticClass:"o-cards-wrapper col-12 preview"},["list"==t.view?o("div",{staticClass:"o-qnote-list ",on:{paste:function(e){return e.stopPropagation(),t.onPaste(e)}}},[t.qnoteMap.length>0?o("q-list",{ref:"micle",attrs:{"no-border":""}},[t._l(t.qnoteMap,(function(e,n){return[o("q-item",{key:n,staticClass:"qnote-starter"},[o("div",{staticClass:"o-date-divider"},[o("hr"),o("div",{staticClass:"o-date-wrapper"},[o("span",[t._v(t._s(e.date))])])])]),t._l(e.list,(function(e){return o("section",{key:e.id,staticClass:"row col-12 ",attrs:{id:e.id,multiline:""}},[o("section",{staticClass:"col-12 "},[o("q-item",{staticClass:"qnote-item"},[o("q-item-section",{attrs:{avatar:""}},[o("section",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"row justify-center items-center relative-position action",class:"bg-"+t.colorName(e)+" text-white",attrs:{color:t.colorName(e)}},[o("q-icon",{attrs:{name:t.typeClass(e.type)}}),o("q-menu",{ref:"menuPopover",refInFor:!0,staticClass:"shadow-1",attrs:{anchor:"bottom left",self:"top left"}},[o("div",{staticStyle:{"min-width":"200px"}},[o("o-qnote-menu",{attrs:{data:e},on:{edit:t.editQNote,remove:t.beforeDelete,card:t.generateCard,mark:t.markQNote,preview:t.onPreview}})],1)])],1)]),o("q-item-section"),o("q-item-section",{attrs:{side:""}},[o("q-item-label",{staticClass:"o-qnote-time"},[o("span",[t._v(t._s(t._f("formatTime")(e.addtime,"{h}:{i}"))+"\n                        "),o("q-tooltip",{staticClass:"o-tooltip",attrs:{anchor:"top middle",self:"bottom left",offset:[0,8]}},[t._v("\n                          "+t._s(e.addtime)+"\n                        ")])],1)])],1)],1)],1),o("section",{staticClass:"col-12 qnote-item"},[o("q-item-section",[o("q-item-label",["IMAGE"===t.typeText(e.type)?o("section",{staticClass:"type-image"},[o("img",{attrs:{src:e.url,alt:e.text,title:e.text},on:{dblclick:function(o){return t.onPreview(e)}}})]):"VIDEO"===t.typeText(e.type)?o("section",{staticClass:"type-video"},[o("video",{attrs:{src:e.url,controls:"controls",width:"100%",height:"90%"},on:{dblclick:function(o){return t.onPreview(e)}}})]):"FILE"===t.typeText(e.type)?o("section",{staticClass:"type-link"},[o("a",{attrs:{href:e.url,download:"File"}},[o("q-icon",{attrs:{name:"attachment",size:"36px"}}),o("span",[t._v("File Attachment")])],1)]):o("section",{domProps:{innerHTML:t._s(t.renderMarkdown(e.text))}}),e.attachment.type?o("section",{staticClass:"attachment"},[e.attachment.title?o("header",[t._v(t._s(e.attachment.title))]):t._e(),o("section",{staticClass:"row col-12"},[o("div",{staticClass:"col-12"},[o("img",{attrs:{src:e.attachment.thumb}})]),o("div",{staticClass:"col-12 text-grey attachment-text"},[o("div",[t._v(t._s(e.attachment.description))]),o("div",{staticClass:"q-mt-sm"},[t._v(t._s(e.attachment.content)+" ...")])])])]):t._e()])],1)],1)])}))]}))],2):o("section",{staticClass:"row justify-center"},[t._v("\n          No more data\n        ")])],1):o("div",{staticClass:"o-cards row",on:{paste:function(e){return e.stopPropagation(),t.onPaste(e)}}},[t._l(t.qnoteMap,(function(e,n){return[o("div",{key:n,staticClass:"col-12",staticStyle:{position:"relative",width:"100%",height:"50px","margin-top":"20px"}},[o("div",{staticClass:"o-date-divider"},[o("hr"),o("div",{staticClass:"o-date-wrapper"},[o("span",[t._v(t._s(e.date))])])])]),t._l(e.list,(function(e){return o("div",{key:e.id,staticClass:"col-lg-3 col-md-3 col-sm-12 col-xs-12"},[o("q-card",{staticClass:"shadow-1 text-blue-grey",attrs:{square:""}},[o("q-card-section",{staticClass:"row justify-between items-center o-card-title"},[o("div",[o("q-icon",{attrs:{name:t.typeClass(e.type),size:"1.5rem"}}),o("span",[t._v(t._s(t.typeText(e.type)))])],1),o("q-btn",{attrs:{icon:"menu",color:"blue-grey-3",flat:""}},[o("q-menu",{ref:"menuPopover",refInFor:!0,staticClass:"shadow-1",attrs:{anchor:"bottom left",self:"top left"}},[o("div",{staticStyle:{"min-width":"200px"}},[o("o-qnote-menu",{attrs:{data:e},on:{edit:t.editQNote,remove:t.beforeDelete,mark:t.markQNote,preview:t.onPreview}})],1)])],1)],1),o("q-card-section",{staticClass:"text-blue-grey-9 qnote-content",class:"bg-"+t.colorName(e)+"-2"},["IMAGE"===t.typeText(e.type)?o("section",{staticClass:"row justify-center"},[o("section",{staticClass:"type-image self-center"},[o("img",{attrs:{src:e.url,alt:e.text,title:e.text},on:{dblclick:function(o){return t.onPreview(e)}}})])]):"VIDEO"===t.typeText(e.type)?o("section",{staticClass:"type-video"},[o("video",{attrs:{src:e.url,controls:"controls",width:"100%",height:"90%"},on:{dblclick:function(o){return t.onPreview(e)}}})]):"FILE"===t.typeText(e.type)?o("section",{staticClass:"type-link"},[o("a",{staticClass:"text-primary",attrs:{href:e.url,download:"File"}},[o("q-icon",{attrs:{name:"attachment",size:"36px"}}),o("span",[t._v("File Attachment")])],1)]):o("section",{staticClass:"text-container",domProps:{innerHTML:t._s(t.renderMarkdown(e.text))}})]),o("q-card-actions",{staticClass:"o-actions",attrs:{align:"between"}},[o("q-btn",{attrs:{flat:"",color:"grey-6"}},[t._v(t._s(t._f("formatTime")(e.addtime,"{h}:{i}"))+"\n                  "),o("q-tooltip",{staticClass:"o-tooltip",attrs:{anchor:"top middle",self:"bottom middle",offset:[0,8]}},[t._v("\n                    "+t._s(e.addtime)+"\n                  ")])],1),o("q-btn",{attrs:{flat:"",color:t.colorName(e),icon:"brightness_1"}})],1)],1)],1)}))]}))],2)])],1),o("transition",{attrs:{"enter-active-class":"animated slideInUp","leave-active-class":"animated slideOutDown",appear:""}},[t.showInput?o("section",{staticClass:"quicknote-editor"},[o("div",{staticClass:"row col-12 justify-between toolbar"},[o("div",[o("q-btn",{attrs:{icon:"attachment",flat:""}},[o("input",{staticClass:"o-input-file",attrs:{type:"file"},on:{change:t.onFileChanged}}),o("q-tooltip",{staticClass:"o-tooltip",attrs:{anchor:"top middle",self:"bottom middle",offset:[0,8]}},[t._v("\n              "+t._s(t.$t("action.upload.file"))+"\n            ")])],1),o("q-btn",{attrs:{icon:"add",flat:""}},[o("q-tooltip",{staticClass:"o-tooltip",attrs:{anchor:"top middle",self:"bottom middle",offset:[0,8]}},[t._v("\n              "+t._s(t.$t("action.add"))+"\n            ")])],1)],1),o("div",[o("q-btn",{staticClass:"o-text-active",attrs:{icon:"close",flat:""},on:{click:function(e){t.showInput=!1}}})],1)]),o("div",{staticClass:"editor"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],ref:"editor",attrs:{id:"editor",tabindex:"1",placeholder:t.$t("label.sendnote"),rows:"4",autofocus:!0},domProps:{value:t.text},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.stopPropagation(),t.onSubmit(e))},paste:function(e){return e.stopPropagation(),t.onPasteInEditor(e)},input:function(e){e.target.composing||(t.text=e.target.value)}}})])]):t._e()]),o("section",[o("o-file-upload",{attrs:{title:t.$t("action.upload"),contentCss:{padding:"20px",minHeight:"60vh",minWidth:"50vw"},show:t.showUploader,file:t.file},on:{close:function(e){t.showUploader=!1},uploaded:t.onFileUploaded}}),o("o-common-modal",{attrs:{title:"Quick Note",contentStyle:{padding:"20px",height:"500px",width:"800px"},show:t.showEditor,actionVisible:!0},on:{show:t.onEditorModalOpen,close:function(e){t.showEditor=!1},confirm:t.update}},[o("template",{slot:"content"},[o("div",{staticClass:"fields"},[o("q-select",{attrs:{options:t.qtagOptions,label:t.$t("label.qtag"),"use-input":"","input-debounce":"0",filled:"","map-options":"","emit-value":""},on:{filter:t.filterFn},scopedSlots:t._u([{key:"before",fn:function(){return[o("q-icon",{attrs:{name:"bookmark"}})]},proxy:!0}]),model:{value:t.qnote.qtag,callback:function(e){t.$set(t.qnote,"qtag",e)},expression:"qnote.qtag"}}),o("q-input",{ref:"qnoteText",attrs:{type:"textarea",rows:5,label:t.$t("label.content")},scopedSlots:t._u([{key:"before",fn:function(){return[o("q-icon",{attrs:{name:"view_headline"}})]},proxy:!0}]),model:{value:t.qnote.text,callback:function(e){t.$set(t.qnote,"text",e)},expression:"qnote.text"}})],1)])],2),o("o-side-dialog",{attrs:{title:"Quick Note",contentStyle:{width:"600px"},show:t.showSideDialog,actionVisible:!0},on:{show:t.onSideDialogOpen,close:function(e){t.showSideDialog=!1},confirm:t.update}},[o("template",{slot:"content"},[o("div",{staticClass:"fields"},[o("q-select",{attrs:{options:t.qtagOptions,label:t.$t("label.qtag"),"use-input":"","input-debounce":"0",filled:"","map-options":"","emit-value":""},on:{filter:t.filterFn},scopedSlots:t._u([{key:"before",fn:function(){return[o("q-icon",{attrs:{name:"bookmark"}})]},proxy:!0}]),model:{value:t.qnote.qtag,callback:function(e){t.$set(t.qnote,"qtag",e)},expression:"qnote.qtag"}}),o("q-input",{ref:"qnoteText",staticClass:"q-mt-md content-textarea",attrs:{type:"textarea",rows:5,label:t.$t("label.content"),autofocus:"",filled:"",autogrow:""},scopedSlots:t._u([{key:"before",fn:function(){return[o("q-icon",{attrs:{name:"view_headline"}})]},proxy:!0}]),model:{value:t.qnote.text,callback:function(e){t.$set(t.qnote,"text",e)},expression:"qnote.text"}}),o("q-field",{attrs:{borderless:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"access_time"}})]},proxy:!0},{key:"control",fn:function(){return[o("div",{attrs:{tabindex:"0"}},[t._v(t._s(t.qnote.addtime))])]},proxy:!0}])})],1)])],2),o("o-side-dialog",{attrs:{title:"生成卡片","content-class":"qnote-card",contentStyle:{width:"375px"},show:t.showCard,actionVisible:!1,"confirm-label":"下载"},on:{show:t.onPrepareCard,close:function(e){t.showCard=!1,t.cardImg=""},confirm:t.onDownloadCard}},[o("template",{slot:"content"},[o("q-scroll-area",{staticClass:"scroll-area-content"},[t.cardImg?o("section",{staticClass:"image"},[o("img",{attrs:{src:t.cardImg}})]):o("section",{staticClass:"full-height snapshot preview"},[t.cardData.text?o("section",{staticClass:"qnote-container",domProps:{innerHTML:t._s(t.renderMarkdown(t.cardData.text))}}):t._e(),o("section",{staticClass:"row col-12 justify-center q-pa-md logo"},[o("img",{attrs:{src:"statics/logo.png",height:"20"}}),o("span",{staticClass:"q-ml-xs text-grey"},[t._v(t._s(t.$t("app.name")))])])])])],1),o("template",{slot:"actions"},[o("q-btn",{staticClass:"col-6",attrs:{color:"primary",label:"下载",loading:t.cardLoading},on:{click:t.onDownloadCard}})],1)],2)],1),t._e()],1)},a=[],s=(o("8e6e"),o("cadf"),o("06db"),o("456d"),o("c47a")),i=o.n(s),r=o("967e"),c=o.n(r),l=(o("96cf"),o("fa84")),d=o.n(l),u=(o("28a5"),o("7f7f"),o("a481"),o("ac4d"),o("8a81"),o("ac6a"),o("a026")),f=o("fbe4"),h=o("f94c"),p=o("92a8"),m=o("5777"),v=o("787d"),g=o("6907"),w=o("a43c"),b=o("ed08"),y=o("8f85"),q=o("2f62"),x=o("3ba6"),C=o("c1df"),k=o.n(C),T=o("bc4d"),_=o.n(T),P=o("a072"),O=o.n(P),S=o("610c"),D=o.n(S),N=o("362d"),E=o.n(N),M=o("bcf0"),$=o.n(M);function I(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function Q(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?I(Object(o),!0).forEach((function(e){i()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):I(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var j=o("d4cd")({html:!0,linkify:!0,typographer:!0});j.use(_.a,{attrs:{target:"_blank",rel:"noopener"}}).use(O.a).use(D.a).use(E.a).use($.a);var F=o("c0e9"),L={name:"quicknote",mixins:[x["a"]],data:function(){return{view:"list",showMenu:!1,leftDrawerOpen:!0,terms:"",showSearch:!1,showEditor:!1,showInput:!1,showSideDialog:!1,currentItem:{},qtagNeedle:"",isPinned:!1,isShowNoteList:!1,contentClass:"col-sm-12 col-md-12",leftPanePercent:50,parentName:"parent",notebookName:"note",colors:g["a"],qnote:{id:"",text:"",qtag:""},text:"",isScrolled:!1,file:{},showUploader:!1,preview:{show:!1,data:{}},showProgress:!1,showCard:!1,cardData:{},cardImg:"",cardLoading:!1,fabTooltip:!1,scrollPosition:0}},components:{BaseToolbar:f["a"],OCommonModal:h["a"],OFileUpload:m["a"],OQnoteMenu:p["a"],OSideDialog:v["a"]},filters:{formatTime:function(t,e){return Object(b["a"])(t,e)}},methods:{onSubmit:function(t){if(!(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey))return this.text.trim()?(this.sendTextMessage(this.text),!1):(console.log("text",this.text),void(this.text=""));t.shiftKey||(this.text+="\n")},onPaste:function(t){var e=t.clipboardData||t.originalEvent.clipboardData||window.clipboardData,o=e.items,n=!0,a=!1,s=void 0;try{for(var i,r=o[Symbol.iterator]();!(n=(i=r.next()).done);n=!0){var c=i.value;if("string"===c.kind&&"text/plain"===c.type){var l=e.getData(c.type);this.sendTextMessage(l);break}if("file"===c.kind){this.file=c.getAsFile(),this.showUploader=!0;break}}}catch(d){a=!0,s=d}finally{try{n||null==r.return||r.return()}finally{if(a)throw s}}},onPasteInEditor:function(){},onFileChanged:function(t){var e=t.target.files[0];this.file=e,this.showUploader=!0},onFileUploaded:function(t,e){this.showUploader=!1,this.sendFileMessage(t,e)},sendTextMessage:function(t){if(t=t.replace(/^\n+|\n+$/g,""),!t)return!1;var e=this.currentQTag.id?this.currentQTag.id:"default";"all"!==e&&"star"!==e||(e="default");var o={id:Object(b["b"])(),color:0,colorName:"grey",caddtime:(new Date).getTime(),state:0,star:0,text:t,qtag:e,type:"text"};this.sendMessage(o)},sendFileMessage:function(t,e){console.log("type",t);var o=this.currentQTag.id?this.currentQTag.id:"default";"all"!==o&&"star"!==o||(o="default");var n={id:Object(b["b"])(),color:0,colorName:"grey",caddtime:(new Date).getTime(),state:0,star:0,text:"File",qtag:o,type:this.fileType(t),url:e};this.sendMessage(n)},sendMessage:function(t){this.saveMessage(t)},saveMessage:function(t){var e=this;Object(w["a"])(t,!1).then((function(t){e.$store.commit("ADD_QNOTE",t.data),e.scrollTo(0),e.postSave()}))},postSave:function(){this.qnote={id:"",text:"",qtag:""},this.text=""},editQNote:function(t){this.$refs.menuPopover.forEach((function(t){t.hide()})),this.showSideDialog=!0,this.qnote=t,this.showMenu=!1},update:function(){var t=this;Object(w["e"])(this.qnote).then((function(e){t.$store.commit("UPDATE_QNOTE",e.data),t.postSave()}))},beforeDelete:function(t){var e=this;this.$refs.menuPopover.forEach((function(t){t.hide()})),this.$q.dialog({title:"Confirm",message:"Are you sure remove this item?",ok:"Yes",cancel:"No"}).onOk((function(){e.remove(t)}))},remove:function(t){var e=this;Object(w["b"])({id:t.id}).then((function(o){e.$store.commit("REMOVE_QNOTE",t.id)})),this.showMenu=!1},generateCard:function(t){this.showCard=!0,this.cardData=t},onPrepareCard:function(){var t=this;this.cardLoading=!0,setTimeout((function(){t.onSnapshot()}),100)},onSnapshot:function(){var t=this,e=document.querySelector(".snapshot");console.log("onSnapshot",e),F(e,{allowTaint:!0,trainTest:!0,logging:!1}).then((function(e){var o=e.toDataURL("image/png",.6);t.cardImg=o,t.notifySuccess("图片生成成功"),t.cardLoading=!1})).catch((function(e){console.log("html2canvas",e),t.notifyWarning("图片生成失败"),t.cardLoading=!1}))},onDownloadCard:function(){this.notifyWarning("右键复制或保存")},mark:function(t,e){console.log("color",t,e)},markQNote:function(t,e){var o=this;this.$refs.menuPopover.forEach((function(t){t.hide()})),Object(w["e"])({id:e.id,color:t.value,colorName:t.name}).then((function(t){o.$store.commit("UPDATE_QNOTE",t.data)})),this.showMenu=!1},colorName:function(t){var e=t.colorName;if(!e){var o=Object(g["d"])(t.color);e=o.name}return e},messageTime:function(t,e){var o=Math.floor(t/1e3);return k.a.unix(o).format(e)},renderMarkdown:function(t){var e=this,o=j.render(t),n="";return o.trim().split("\n").forEach((function(t,o){n+=t,e.isInline(t)?t.indexOf("</i>")>=0&&(n+="<br>"):n+="<br>"})),n},isInline:function(t){for(var e=["<td","td>","<th","th>","<tr","tr>","<tbody","tbody>","<thead","thead>","<table","table>","<ul","ul>","<li","li>","<h1","h1>","<h2","h2>","<h3","h3>","<h4","h4>","<h5","h5>","</p>","<blockquote","blockquote>","<pre","pre>"],o=0;o<e.length;o++)if(t.indexOf(e[o])>=0)return!0;return!1},handleAction:function(t){switch(t){case"view-list":this.view="list";break;case"view-card":this.view="card";break;case"action-add":this.showInput=!0;break;case"action-paste":this.onPasteContent();break}},onShowMenu:function(t,e){this.currentItem=e,this.showMenu=!0,console.log("popover",t,t.target);var o=this.$refs.menuPopover.$el;console.log("el",o.offsetTop,o.attributes)},onSideDialogOpen:function(){console.log("show"),this.$refs.qnoteText.focus()},filterQTag:function(t){var e=this.currentQTag.id;return e||(e="all"),"all"===e||("star"===e?1===t.star:t.qtag===e)},filterColor:function(t){var e=this.currentColor.value;return!e||0===e||t.color===e},filterSearch:function(t){var e=this.searchTerms,o=t.text.toLowerCase(),n=o.indexOf(e.toLowerCase());return e.length>=1?n>=0:0===n},sortQNote:function(t,e){return t.caddtime<=e.caddtime?-1:1},sortQNoteByMark:function(t,e){return t.color>=e.color?-1:1},scrollTo:function(t){t||(t=this.scrollHeight()),this.$refs.qnoteScroll.setScrollPosition(t,10)},scrollHeight:function(){var t=0,e=document.querySelector(".o-cards-wrapper");return e&&(t=e.scrollHeight),t},onEditorModalOpen:function(){this.$refs.qnoteText.focus()},colorClass:function(t,e){var o=this.colorName(t);return e||(e="-bg"),o+e},typeClass:function(t){switch(t.toLowerCase()){case"image":return"image";case"video":return"videocam";case"file":return"attachment";default:return"title"}},typeText:function(t){switch(t.toLowerCase()){case"image":return"IMAGE";case"video":return"VIDEO";case"file":return"FILE";case"information":return"TEXT";default:return"TEXT"}},fileType:function(t){switch(t){case 0:return"file";case 1:return"image";case 2:return"video";default:return"file"}},onPreview:function(t){if(this.$refs.menuPopover.forEach((function(t){t.hide()})),"text"!==t.type.toLowerCase()){var e={id:t.id,type:t.type,url:t.url,title:""};Object(y["a"])({type:"preview",data:e})}},onScroll:function(t){var e=this;this.isScrolled&&0===t.position&&"up"===t.direction&&(this.showProgress=!0,setTimeout((function(){e.loadQNotes("refresh")}),1e3)),this.isScrolled=!0,t.directionChanged&&(this.scrollPosition=t.position);var o=0;this.scrollPosition>0&&("up"===t.direction?(o=this.scrollPosition-t.position,o>100&&(this.showInput=!1)):(o=t.position-this.scrollPosition,o>100&&(this.showInput=!0)))},handleRoute:function(t){this.isScrolled=!1,"qtag"===t.name&&this.loadQNotes("latest")},loadQNotes:function(t){var e=this,o="latest"===t?0:this.scrollHeight();this.showProgress=!0,this.$store.dispatch("QueryQNote",t).then((function(t){e.showProgress=!1;var n=e;u["a"].nextTick((function(){if(t&&t.length>0){var e=n.scrollHeight();n.$store.commit("SET_QNOTE_TOPID");var a=e-o;a<=0&&(a=100),n.scrollTo(a)}n.groupByDate(n.qnoteList)}))})).catch((function(t){e.showProgress=!1,console.warn(t.message)}))},groupByDate:function(t){var e=!0,o=!1,n=void 0;try{for(var a,s=t[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var i=a.value;i.date=Object(b["c"])(i.addtime,"{y}-{m}-{d}")}}catch(l){o=!0,n=l}finally{try{e||null==s.return||s.return()}finally{if(o)throw n}}function r(t){var e=[];return t.forEach((function(t,o){var n=-1,a=e.some((function(e,o){if(t.date===e.date)return n=o,!0}));a?e[n].list.push(t):e.push({date:t.date,list:[t]})})),e}var c=r(t);return c},filterFn:function(t,e){var o=this;e((function(){o.qtagNeedle=t?t.toLowerCase():""}))},onFabShow:function(){var t=this;console.log("show"),setTimeout((function(){t.fabTooltip=!0}),300)},onFabHide:function(){console.log("hide"),this.fabTooltip=!1},onShowEditor:function(){var t=this;this.showInput=!0,setTimeout((function(){t.$refs.editor.focus()}),10)},onPasteContent:function(){this.pasteCommon()},pasteText:function(){var t=this;navigator.clipboard.readText().then((function(e){e&&t.sendTextMessage(e)})).catch((function(t){console.error("Failed to read clipboard contents: ",t)}))},pasteCommon:function(){var t=this;return d()(c.a.mark((function e(){var o,n,a,s,i,r,l,d,u,f,h,p,m,v,g,w;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.read();case 3:o=e.sent,n=!0,a=!1,s=void 0,e.prev=7,i=o[Symbol.iterator]();case 9:if(n=(r=i.next()).done){e.next=55;break}l=r.value,e.prev=11,d=!0,u=!1,f=void 0,e.prev=15,h=l.types[Symbol.iterator]();case 17:if(d=(p=h.next()).done){e.next=33;break}return m=p.value,e.next=21,l.getType(m);case 21:if(v=e.sent,"text/plain"!==m){e.next=29;break}return e.next=25,v.text();case 25:g=e.sent,t.sendTextMessage(g),e.next=30;break;case 29:m.indexOf("image")>=0&&(w=new window.File([v],"file",{type:m}),t.file=w,t.showUploader=!0);case 30:d=!0,e.next=17;break;case 33:e.next=39;break;case 35:e.prev=35,e.t0=e["catch"](15),u=!0,f=e.t0;case 39:e.prev=39,e.prev=40,d||null==h.return||h.return();case 42:if(e.prev=42,!u){e.next=45;break}throw f;case 45:return e.finish(42);case 46:return e.finish(39);case 47:e.next=52;break;case 49:e.prev=49,e.t1=e["catch"](11),console.error(e.t1,e.t1.message);case 52:n=!0,e.next=9;break;case 55:e.next=61;break;case 57:e.prev=57,e.t2=e["catch"](7),a=!0,s=e.t2;case 61:e.prev=61,e.prev=62,n||null==i.return||i.return();case 64:if(e.prev=64,!a){e.next=67;break}throw s;case 67:return e.finish(64);case 68:return e.finish(61);case 69:e.next=75;break;case 71:e.prev=71,e.t3=e["catch"](0),console.error(e.t3,e.t3.message),t.notifyWarning("hoho: "+e.t3.message);case 75:case"end":return e.stop()}}),e,null,[[0,71],[7,57,61,69],[11,49],[15,35,39,47],[40,,42,46],[62,,64,68]])})))()}},computed:Q({},Object(q["c"])({qnoteAction:"qnoteAction",qnotes:"qnotes",searchTerms:"searchTerms",currentQTag:"currentQTag",currentColor:"currentColor",qtags:"qtags",topId:"topId"}),{qnoteList:function(){return this.qnotes.filter(this.filterQTag).filter(this.filterColor).filter(this.filterSearch)},qnoteMap:function(){return this.groupByDate(this.qnoteList)},qtagOptions:function(){var t=this,e=[];e.push({label:"Default",value:"default"});var o=!0,n=!1,a=void 0;try{for(var s,i=this.qtags[Symbol.iterator]();!(o=(s=i.next()).done);o=!0){var r=s.value,c={label:r.name,value:r.id};e.push(c)}}catch(d){n=!0,a=d}finally{try{o||null==i.return||i.return()}finally{if(n)throw a}}var l=this.qtagNeedle?e.filter((function(e){return e.label.toLowerCase().indexOf(t.qtagNeedle)>-1})):e;return l},style:function(){return this.showInput?"":"without-editor"}}),watch:{$route:function(t,e){this.handleRoute(t)},qnoteAction:function(t,e){var o,n,a=t.split("|");a.length>=1&&(o=a[1]),a.length>=2&&(n=a[2]),this.handleAction(o,n)}},created:function(){this.$emit("viewChanged","notebooks")},mounted:function(){this.loadQNotes("latest")}},A=L,U=(o("1b75"),o("2877")),H=Object(U["a"])(A,n,a,!1,null,null,null);e["default"]=H.exports}}]);