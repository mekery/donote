(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[25],{"482d":function(e,t,n){"use strict";var o=n("fcc1"),r=n.n(o);r.a},d610:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("o-share-page",{staticClass:"row col-12 page-share-note note-editor",attrs:{footer:""}},[n("section",{staticClass:"tiptop tiptap-editor"},[n("q-scroll-area",{ref:"editorScroll",staticClass:"editor-scroll-area",class:"view-"+e.view},[n("q-scroll-observer",{on:{scroll:e.onScroll}}),n("editor-content",{staticClass:"editor__content",attrs:{editor:e.editor}}),n("o-share-info")],1)],1)])},r=[],i=(n("8e6e"),n("cadf"),n("06db"),n("456d"),n("28a5"),n("ac4d"),n("8a81"),n("ac6a"),n("7f7f"),n("c47a")),a=n.n(i),c=n("348e"),s=n("d74e"),l=n("cd42"),u=n("f23d"),d=n("332f"),h=n.n(d),f=n("4dd1"),p=n.n(f),w=n("ee8c"),b=n.n(w),v=n("cfb4"),g=n("4d48"),O=n("34cf"),y=n("5e18"),m=n("65ab"),S=n("fc74"),j=n.n(S),k=n("59a1"),T=n.n(k),C=n("64303"),N=n.n(C),E=n("ffe3"),_=n.n(E),P=n("37d9"),M=n.n(P),x=function(e){function t(){return j()(this,t),N()(this,_()(t).apply(this,arguments))}return M()(t,e),T()(t,[{key:"schema",get:function(){return{attrs:{level:{default:1},id:{default:""}},content:"inline*",group:"block",defining:!0,draggable:!1,parseDOM:this.options.levels.map((function(e){return{tag:"h".concat(e),getAttrs:function(t){return{level:e}}}})),toDOM:function(e){var t=e.attrs.id||A(),n=["h".concat(e.attrs.level),{id:t},0];return e.attrs.id=t,n}}}}]),t}(u["i"]);function A(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="",e.join("").substr(0,6)}var $=n("fd67"),D=n("0143"),q=n("0faa"),H=n("e73a"),J=n("2f62"),R=n("b35e"),z=n("3ac3"),B=n("ed08");function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U={name:"share-note",mixins:[R["a"],z["a"]],data:function(){return{view:"page",id:"",notebook:"default",isNew:!1,isLoading:!1,json:{},html:"",editor:null,linkUrl:null,linkMenuIsActive:!1,scrollHeight:0,focusOffsetTop:0,focusOffsetWidth:0,selectedCellSize:0}},components:{EditorContent:l["c"],EditorMenuBar:l["d"],EditorMenuBubble:l["e"],OSharePage:c["a"],OShareInfo:s["a"]},methods:L({},Object(J["b"])({getShareNote:"A_GET_SHARE_NOTE"}),{initEditor:function(){var e=this;this.editor=new l["b"]({extensions:[new v["a"],new g["a"],new O["a"],new y["a"],new m["a"],new u["a"],new u["c"],new u["e"],new u["f"]({languages:{java:h.a,javascript:p.a,css:b.a}}),new u["h"],new x({levels:[1,2,3,4,5]}),new u["o"],new u["p"],new u["n"],new u["b"],new u["d"],new u["m"],new u["r"],new u["z"],new u["j"],new u["w"]({nested:!0}),new u["x"],new u["s"]({resizable:!0}),new u["u"],new u["t"],new u["v"],new u["q"]({showOnlyCurrent:!1,emptyNodeText:function(t){return"title"===t.type.name?e.$t("label.title"):"Note Content"}}),new u["g"]({className:"has-focus",nested:!0}),new u["k"],new u["y"]({node:"paragraph",notAfter:["paragraph"]}),new u["l"],new $["a"],new D["a"],new q["a"],new H["a"]],editable:!1,content:"",onUpdate:function(t){t.state;var n=t.getJSON,o=t.getHTML;e.json=n(),e.html=o()},onTransaction:function(t){var n=t.state;e.updateToc(n.doc.content.content)}})},setContent:function(){this.editor.setContent(this.json,!0),this.editor.focus()},cleanContent:function(){this.editor.clearContent(!1),this.editor.focus()},updateToc:function(e){var t=[],n={},o=!0,r=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var s=a.value;if("title"===s.type.name)n={key:"title",type:"title",level:1,label:s.content&&s.content.content&&s.content.content[0]?s.content.content[0].text:""};else if("heading"===s.type.name){var l={key:s.attrs.id||Object(B["b"])(),type:"heading",level:s.attrs.level,label:s.content&&s.content.content&&s.content.content[0]?s.content.content[0].text:""};t.push(l)}}}catch(h){r=!0,i=h}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}var u={children:[]};t.forEach((function(e){if(!(e.level<1||e.level>6)){for(var t=1,n=u;t<e.level;t++)0===n.children.length&&n.children.push({label:"",heading:{},children:[]}),n=n.children[n.children.length-1];n.children.push({key:e.key,type:e.type,label:e.label,heading:e,children:[]})}}));var d=u.children;d&&d.length>0?(n.children=d[0].children,d[0]=n,this.$store.commit("M_SET_NOTE_TOC",d)):this.$store.commit("M_SET_NOTE_TOC",[])},onTocClick:function(e){var t='[id="'.concat(e,'"]'),n=document.querySelector(t);if(n){var o=n.offsetTop+50;this.$refs.editorScroll.setScrollPosition(o,200)}else"title"===e&&this.$refs.editorScroll.setScrollPosition(0,200)},onScroll:function(e){this.scrollHeight=e.position},loadShareNote:function(e){var t=this;e&&this.getShareNote(e).then((function(e){t.json=JSON.parse(e.source),t.setContent()}))},onAction:function(e,t){switch(e){case"note-action-view":this.onToggleView();break;case"note-action-export-pdf":case"note-action-print":this.onPrint();break;case"note-toc-id":this.onTocClick(t);break}return!1},handleRoute:function(e,t){"share-note"===e.name&&this.loadShareNote(e.params.id)}}),computed:L({},Object(J["c"])({currentNote:"currentNote",shareNote:"shareNote",shareStatus:"shareStatus"})),watch:{$route:function(e,t){this.handleRoute(e,t)},noteAction:function(e,t){var n,o,r=e.split("|");r.length>=1&&(n=r[1]),r.length>=2&&(o=r[2]),this.onAction(n,o)}},mounted:function(){this.initEditor(),this.handleRoute(this.$route)}},G=U,V=(n("482d"),n("2877")),W=Object(V["a"])(G,o,r,!1,null,null,null);t["default"]=W.exports},fcc1:function(e,t,n){}}]);