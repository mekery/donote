(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{"07be":function(t,e,i){"use strict";var a=i("a582"),n=i.n(a);n.a},"4b02":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-page",{staticClass:"page-my-media row"},[i("q-scroll-area",{ref:"qnoteScroll",staticClass:"o-scroll-wrapper"},[i("div",{staticClass:"o-cards-wrapper col-12"},[i("div",{staticClass:"o-cards row"},[i("div",{staticClass:"col-md-2 col-sm-12 col-xs-12"},[i("q-card",{attrs:{square:""}},[i("q-card-section",[i("div",{staticClass:"row justify-center items-center title"},[t._v("\n                "+t._s(t.$t("label.media"))+"\n              ")])]),i("q-separator"),i("q-card-section",[i("q-list",{staticClass:"o-navi-list",attrs:{"no-border":"",link:"","inset-delimiter":""}},[i("o-common-item",{attrs:{icon:"apps",label:t.$t("label.all"),active:t.actives["9"]},nativeOn:{click:function(e){t.toggleType("9",t.$t("label.all"))}}}),i("o-common-item",{attrs:{icon:"image",label:t.$t("label.picture"),active:t.actives["1"]},nativeOn:{click:function(e){t.toggleType("1",t.$t("label.picture"))}}}),i("o-common-item",{attrs:{icon:"mdi-video",label:t.$t("label.video"),active:t.actives["2"]},nativeOn:{click:function(e){t.toggleType("2",t.$t("label.video"))}}}),i("o-common-item",{attrs:{icon:"mdi-file-document-box",label:t.$t("label.file"),active:t.actives["0"]},nativeOn:{click:function(e){t.toggleType("0",t.$t("label.file"))}}})],1)],1)],1),i("div",{staticClass:"o-file-intpu-wrapper",staticStyle:{width:"100%",padding:"6px"}},[i("div",{staticClass:"q-btn inline relative-position q-btn-item non-selectable\n                        q-btn-rectangle q-focusable q-hoverable bg-teal-5 text-white"},[i("div",{staticClass:"q-focus-helper"}),i("div",{staticClass:"q-btn-inner row col items-center justify-center"},[i("div",{staticStyle:{padding:"4px 0"}},[t._v(t._s(t.$t("action.upload.file")))])]),i("input",{staticClass:"o-input-file",attrs:{type:"file"},on:{change:t.onFileChanged}})])])],1),i("div",{staticClass:"col-md-10 col-sm-12 col-xs-12"},[i("q-card",{attrs:{square:""}},[i("q-card-section",[t.metas.length>0?i("div",{staticClass:"o-cards o-image-cards row"},t._l(t.metas,(function(e){return i("div",{key:e.id,staticClass:"col-md-3 col-sm-6 col-xs-12"},[i("q-card",{staticClass:"shadow-1",attrs:{square:""},nativeOn:{click:function(i){return t.onPreview(e)}}},[i("q-card-section",{staticStyle:{height:"135px"}},[i("q-img",{attrs:{src:t.coverUrl(e.type,e.path)?t.coverUrl(e.type,e.path):"statics/logo.png"}},[t.showOverlay?i("div",{staticClass:"absolute-bottom text-subtitle2 text-center"},[t._v("\n                          "+t._s(e.name)+"\n                        ")]):t._e()])],1)],1)],1)})),0):i("div",{staticClass:"q-pa-lg"},[t._v("\n                No files, you can upload right now.\n              ")])])],1),i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-9"},[i("q-pagination",{attrs:{color:"primary",min:1,max:t.pagination.total,"max-pages":10,"boundary-links":"","direction-links":""},nativeOn:{click:function(e){return t.onPagination(e)}},model:{value:t.pagination.current,callback:function(e){t.$set(t.pagination,"current",e)},expression:"pagination.current"}})],1),i("div",{staticClass:"col-md-3",staticStyle:{"text-align":"right"}},[i("q-toggle",{attrs:{label:t.$t("label.title")},model:{value:t.showOverlay,callback:function(e){t.showOverlay=e},expression:"showOverlay"}})],1)])],1)])])]),i("section",[i("o-file-upload",{attrs:{title:t.$t("action.upload"),contentCss:{padding:"20px",height:"60vh",width:"50vw"},show:t.showUploader,file:t.file},on:{close:function(e){t.showUploader=!1},uploaded:t.onFileUploaded}})],1)],1)},n=[],o=(i("8e6e"),i("8a81"),i("ac6a"),i("cadf"),i("06db"),i("456d"),i("c47a")),s=i.n(o),l=(i("7f7f"),i("5777")),c=i("916d"),r=i("a002"),d=i("5f87"),p=i("8f85"),u=i("2f62");function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function v(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach((function(e){s()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var f={name:"my-media",data:function(){return{media:[],actives:{9:!0},activeGroup:"All",metas:[],query:{pagesize:12,pageindex:1,condition:{uid:"",type:""}},pagination:{pagesize:12,current:1,total:0},currentPage:1,domain:{file:"https://dnfile-1251833402.cossh.myqcloud.com/",photo:"https://dnphoto-1251833402.cossh.myqcloud.com/",video:"https://dnvideo-1251833402.cossh.myqcloud.com/"},showOverlay:!1,showUploader:!1,url:"",file:{},preview:{data:{}}}},components:{OFileUpload:l["a"],OCommonItem:c["a"]},methods:{queryFileMeta:function(){var t=Object(d["e"])();if(t){var e=this;this.query.condition.uid=t,this.query.pageindex=this.pagination.current,Object(r["b"])(this.query,!1).then((function(t){var i=t.data;e.metas=i.list,e.pagination.total=parseInt(i.total/e.pagination.pagesize),i.total%e.pagination.pagesize!==0&&(e.pagination.total+=1)})).catch((function(){e.metas=[],e.pagination.total=0}))}else this.metas=[]},toggleType:function(t,e){this.actives={},this.actives[t]=!0,this.activeGroup=e,this.query.condition.type="9"!==t?parseInt(t):"",this.pagination.current=1,this.queryFileMeta()},coverUrl:function(t,e){var i="";return 1===t&&(i=this.domain.photo+e),i},fileUrl:function(t,e){switch(t){case 0:return this.domain.file+e;case 1:return this.domain.photo+e;case 2:return this.domain.video+e;default:return this.domain.file+e}},typeName:function(t){switch(t){case 0:return"file";case 1:return"image";case 2:return"video";default:return"file"}},onPagination:function(){this.queryFileMeta()},onPreview:function(t){var e={id:t.id,type:this.typeName(t.type),url:this.fileUrl(t.type,t.path),title:t.name};Object(p["a"])({type:"preview",data:e}),this.preview.data=e},onModalClose:function(){this.preview.show=!1},onDownload:function(){var t=this.preview.data.url;1===this.preview.data.type?window.open(t):window.location=t},onFileChanged:function(t){var e=t.target.files[0];this.file=e,this.showUploader=!0},onFileUploaded:function(t,e){this.showUploader=!1,this.queryFileMeta()},handleRoute:function(t){var e=t.name;"media"===e&&this.queryFileMeta()}},computed:v({},Object(u["c"])({setting:"setting"})),watch:{$route:function(t,e){this.handleRoute(t)}},created:function(){},mounted:function(){this.queryFileMeta()}},m=f,g=(i("07be"),i("2877")),y=Object(g["a"])(m,a,n,!1,null,null,null);e["default"]=y.exports},a582:function(t,e,i){}}]);