(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"78a0":function(e,t,o){"use strict";var n=o("fe48"),r=o.n(n);r.a},a221:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("auth-page",{staticClass:"page-auth-signin",attrs:{title:e.$t("label.signin")}},[o("template",{slot:"content"},[o("section",{staticClass:"row q-mb-md methods o-tabs with-bottom-border",class:e.isMobile?"":"q-pt-md"},[o("q-tabs",{staticClass:"text-white",attrs:{align:"left",shrink:""},on:{input:e.onMethodChanged},model:{value:e.method,callback:function(t){e.method=t},expression:"method"}},[o("q-tab",{attrs:{name:"phone",label:e.$t("label.phone")}}),o("q-tab",{attrs:{name:"email",label:e.$t("label.email")}})],1)],1),o("div",{staticClass:"fields"},["phone"===e.method?o("div",{staticClass:"row justify-between items-start q-col-gutter-x-sm"},[o("q-input",{staticClass:"col-12",attrs:{label:e.$t("label.phone"),"error-message":"Required.","bottom-slots":"",standout:"",clearable:"",error:e.$v.form.phone.$error},on:{blur:e.$v.form.phone.$touch},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1):o("q-input",{attrs:{label:e.$t("label.email"),"error-message":"Required.","bottom-slots":"",standout:"",clearable:"",error:e.$v.form.email.$error},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSignin(t)}},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),o("q-input",{attrs:{type:"password",label:e.$t("label.password"),"error-message":"Required.","bottom-slots":"",standout:"",clearable:"",error:e.$v.form.password.$error},on:{blur:e.$v.form.password.$touch,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSignin(t)}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),o("div",{staticClass:"row justify-end reset"},[o("q-btn",{staticClass:"text-white",attrs:{label:e.$t("label.forget"),flat:""},on:{click:function(t){return e.$router.push("/auth/reset")}}})],1),o("div",{staticClass:"actions row justify-center"},[o("q-btn",{staticClass:"action color-button",attrs:{label:e.$t("label.signin"),loading:e.spinner},on:{click:e.onSignin}},[o("q-spinner-ios",{attrs:{slot:"loading"},slot:"loading"})],1)],1),e._e()]),o("template",{slot:"footer"},[o("section",{staticClass:"row justify-center items-center full-height"},[o("q-btn",{staticClass:"action",attrs:{color:"secondary",label:"还没账号？免费注册",flat:""},on:{click:function(t){return e.$router.push("/auth/signup")}}})],1)])],2)},r=[],a=(o("8e6e"),o("8a81"),o("ac6a"),o("cadf"),o("06db"),o("456d"),o("c47a")),i=o.n(a),s=o("6907"),l=o("ed08"),c=o("5f87"),m=o("b0b9"),u=o("f7d9"),h=o("b5ae"),f=o("f095"),p=o("2f62"),b=o("b35e");function d(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function g(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?d(Object(o),!0).forEach((function(t){i()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):d(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var w={name:"auth-signin",mixins:[b["a"]],data:function(){return{method:"phone",remember:!0,form:{email:"user@example.com",phone:"",password:""},spinner:!1,countryCode:"86",countryCodes:s["b"]}},validations:{form:{email:{required:h["required"],email:h["email"]},phone:{required:h["required"]},password:{required:h["required"],minLength:Object(h["minLength"])(6),maxLength:Object(h["maxLength"])(22)}}},components:{AuthPage:f["a"]},methods:g({},Object(p["b"])(["Login","A_FRESH_CLIENT_ID","A_LOG_EVENT"]),{onMethodChanged:function(e){"phone"===this.method?(this.form.email="user@example.com",this.form.phone=""):"email"===this.method&&(this.form.email="",this.form.phone="phone")},onSignin:function(){this.$v.form.$touch(),this.$v.form.$error?Object(m["f"])("Please review fields again."):this.signin()},signin:function(){var e=this,t="",o="";switch(this.method){case"phone":t=this.form.phone,o="".concat(this.countryCode,"-").concat(this.form.phone);break;case"email":t=this.form.email,o=this.form.email;break}var n={username:o,password:Object(l["d"])("SHA-1",this.form.password)};this.A_FRESH_CLIENT_ID(),this.spinner=!0,this.Login(n).then((function(o){e.A_LOG_EVENT({category:"user",action:"signin",label:e.method,value:1}),o.account=t,e.postSignin(o)})).catch((function(t){e.A_LOG_EVENT({category:"user",action:"signin",label:e.method,value:0}),t.response&&Object(m["f"])(e.$t("msg.incorrectAccount")),e.spinner=!1}))},postSignin:function(e){e&&e.uid&&(localStorage.setItem("ACCOUNT",e.account),localStorage.setItem("METHOD",this.method),this.$router.push("/editor"),Object(m["e"])("Welcome")),this.form={account:"",password:""},this.spinner=!1,Object(u["a"])()},load:function(){var e=localStorage.getItem("METHOD");if(e){var t=Object(c["b"])();t&&("phone"===e?(this.form.phone=t,this.form.email="user@example.com"):"email"===e&&(this.form.email=t,this.form.phone="phone"),this.method=e)}}}),computed:{methodsGlobal:function(){return[{label:"Phone",value:"phone",icon:"smartphone"},{label:"Email",value:"email",icon:"email"},{label:"Google",value:"google",icon:"mdi-google"},{label:"Twitter",value:"twitter",icon:"mdi-twitter"},{label:"Facebook",value:"facebook",icon:"mdi-facebook"}]},methodsCn:function(){return[{label:this.$t("label.phone"),value:"phone",icon:"smartphone"},{label:this.$t("label.email"),value:"email",icon:"email"}]}},watch:{$route:function(e,t){}},created:function(){},mounted:function(){this.load()}},v=w,O=(o("78a0"),o("2877")),$=Object(O["a"])(v,n,r,!1,null,null,null);t["default"]=$.exports},fe48:function(e,t,o){}}]);