(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[24],{"2ba1":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("o-share-page",{staticClass:"row col-12 page-share-markdown"},[o("section",{staticClass:"col-xs-12 col-sm-12 col-md-12"},[o("split-pane",{staticClass:"share-note",attrs:{"min-percent":0,defaultPercent:e.leftPanePercent,split:"vertical"}},[o("template",{slot:"paneL"},[o("section",{attrs:{id:"editor"}},[o("section",{staticClass:"component-code content-container",on:{mouseenter:function(t){return e.onMouseEnter("editor")},mouseleave:function(t){return e.onMouseLeave("editor")}}},[o("codemirror",{ref:"codemirror",staticClass:"editor",attrs:{id:"codemirror",options:e.editorOption,hint:!0},on:{input:e.onEditorChanged,scroll:e.onEditorScroll},model:{value:e.source,callback:function(t){e.source=t},expression:"source"}})],1)])]),o("template",{slot:"paneR"},[o("section",{staticClass:"preview",on:{mouseenter:function(t){return e.onMouseEnter("preview")},mouseleave:function(t){return e.onMouseLeave("preview")}}},[e.printable?o("section",[o("article",[o("vue-markdown",{attrs:{source:e.source,postTocRender:e.postTocRender,tocFirstLevel:2}})],1)]):o("section",{staticClass:"component-preview content-container"},[o("q-scroll-area",{ref:"sharePreviewScroll",staticStyle:{width:"100%",height:"100%"}},[o("q-scroll-observer",{on:{scroll:e.onPreviewScroll}}),o("article",{attrs:{id:"markdown-preview"}},[o("vue-markdown",{attrs:{source:e.source,postTocRender:e.postTocRender,tocFirstLevel:2}})],1),o("o-share-info")],1)],1)]),o("section")])],2)],1)])},n=[],i=(o("8e6e"),o("cadf"),o("06db"),o("456d"),o("28a5"),o("ac4d"),o("8a81"),o("ac6a"),o("7f7f"),o("c47a")),c=o.n(i),s=o("8f94"),a=(o("1ef7"),o("31c5"),o("a7be"),o("7393"),o("0109"),o("d2e8"),o("ed9c"),o("4659"),o("01cb"),o("eb8f"),o("bbca"),o("d5db"),o("959b"),o("5f53"),o("9a48"),o("a026")),l=o("0920"),u=o("640f"),f=o("348e"),d=o("d74e"),h=o("2f62"),p=o("097f"),m=o("dcc5");function v(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function b(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?v(Object(o),!0).forEach((function(t){c()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):v(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}a["a"].use(l["a"]);var w=null,S={name:"share-markdown",mixins:[m["a"]],data:function(){return{source:"# New Note",editorOption:{tabSize:4,mode:{name:"markdown",json:!0},theme:"neat",line:!0,lineWrapping:!0,lineNumbers:!0,keyMap:"sublime",extraKeys:{Enter:"newlineAndIndentContinueMarkdownList"},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],styleActiveLine:!0,styleSelectedText:!0,scrollbarStyle:"native",tabindex:1,autofocus:!1},leftPanePercent:0,currentLineNumber:1,isEditorScroll:!1,isPreviewScroll:!1,selected:"",printable:!1}},components:{codemirror:s["codemirror"],CodeMirror:s["CodeMirror"],SplitPane:u["a"],OSharePage:f["a"],OShareInfo:d["a"]},computed:b({},Object(h["c"])({toc:"toc",currentNote:"currentNote",shareStatus:"shareStatus"}),{tocTree:function(){return a["a"].nextTick((function(){})),this.toc},lineNumber:function(){return this.setting.isLineNumber},syntaxTheme:function(){return this.setting.syntaxTheme},cm:function(){return this.$refs.codemirror.codemirror},noteAction:function(){return this.$store.state.note.action},revision:function(){return this.currentNote.revision},sideMenus:function(){return[{label:this.$t("label.toc"),value:"toc",icon:"mdi-file-tree"},{label:this.$t("label.basic"),value:"basic",icon:"info"}]}}),methods:b({},Object(h["b"])({getShareNote:"A_GET_SHARE_NOTE",setShareNoteLine:"A_SET_SHARE_NOTE_LINE",shareNoteLine:"shareNoteLine"}),{refreshEditor:function(){var e=this;setTimeout((function(){e.cm.refresh(),e.cm.focus()}),10)},loadShareNote:function(e){var t=this;e&&this.getShareNote(e).then((function(e){t.source=e.source,t.refreshEditor()}))},handleRoute:function(e,t){var o=e.name;"share-markdown"===o&&this.loadShareNote(e.params.id)},action:function(e){e=(new Date).getTime()+"|"+e,w.$store.commit("setNoteAction",e)},handleAction:function(e,t){switch(console.log("handleAction",e,t),e){case"view-edit":this.leftPanePercent=100,this.refreshEditor();break;case"view-live":var o=(new Date).getTime(),r=o/999999999999999;this.leftPanePercent=50+r;break;case"view-preview":this.leftPanePercent=0,this.scrollToLine(this.shareNoteLine);break;case"action-print":case"action-export":this.print();break;case"action-export-md":Object(p["d"])(this.source);break;case"action-export-html":Object(p["b"])(this.source);break;case"action-toc":this.scrollToLine(t);break}},print:function(){var e=this;setTimeout((function(){e.printable=!0,e.$nextTick((function(){window.print(),e.printable=!1}))}),1e3)},onMouseEnter:function(e){"editor"===e?this.isEditorScroll=!0:"preview"===e&&(this.isPreviewScroll=!0)},onMouseLeave:function(e){"editor"===e?this.isEditorScroll=!1:"preview"===e&&(this.isPreviewScroll=!1)},onEditorChanged:function(){a["a"].nextTick((function(){document.getElementsByTagName("a")}))},onEditorScroll:function(){if(!this.isPreviewScroll){var e=this.cm,t=e.getScrollInfo(),o=e.coordsChar({left:t.left,top:t.top},"local").line+1;this.setShareNoteLine(o);var r='[data-source-line="'+o+'"]',n=document.querySelector(r);if(n){var i=n.offsetTop,c=n.offsetParent;c&&"TABLE"===c.tagName&&(i+=c.offsetTop+31),this.$refs.sharePreviewScroll.setScrollPosition(i,200)}}},onPreviewScroll:function(e){if(!this.isEditorScroll){for(var t,o=this.cm,r=0,n=e.position,i=document.querySelectorAll("[data-source-line]"),c=0;c<i.length;c++){var s=i[c],a=parseInt(s.attributes["data-source-line"].value);if(s){var l=s.offsetTop,u=s.offsetParent;if(u&&"TABLE"===u.tagName&&(l+=u.offsetTop),l>=n-20){r=a,t=s;break}}}if(this.setShareNoteLine(r),r>=0&&t){var f=o.charCoords({line:r-1,ch:0},"local");o.scrollTo(0,f.top)}}},scrollToLine:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=this.cm,r=e,n=t?0:200,i='[data-source-line="'+r+'"]',c=document.querySelector(i);if(c){var s=c.offsetTop,a=c.offsetParent;a&&"TABLE"===a.tagName&&(s+=a.offsetTop+31),this.$refs.sharePreviewScroll.setScrollPosition(s,n)}if(r=e,r>=0&&c){var l=o.charCoords({line:r-1,ch:0},"local");o.scrollTo(0,l.top)}},tocScroll:function(e){this.isEditorScroll=!0;var t=this.cm,o=e,r='[data-source-line="'+o+'"]',n=document.querySelector(r);if(n){var i=n.offsetTop,c=n.offsetParent;c&&"TABLE"===c.tagName&&(i+=c.offsetTop+31),this.$refs.sharePreviewScroll.setScrollPosition(i,200)}if(this.isPreviewScroll=!0,o=e,o>=0&&n){var s=t.charCoords({line:o-1,ch:0},"local");t.scrollTo(0,s.top)}},postTocRender:function(e){},onTocClick:function(){this.scrollToLine(this.selected)}}),watch:{$route:function(e,t){this.handleRoute(e,t)},noteAction:function(e,t){var o,r,n=e.split("|");n.length>=1&&(o=n[1]),n.length>=2&&(r=n[2]),this.handleAction(o,r)}},mounted:function(){w=this,this.handleRoute(this.$route)}},T=S,P=(o("ef5e"),o("2877")),g=Object(P["a"])(T,r,n,!1,null,null,null);t["default"]=g.exports},"6a71":function(e,t,o){},ef5e:function(e,t,o){"use strict";var r=o("6a71"),n=o.n(r);n.a}}]);