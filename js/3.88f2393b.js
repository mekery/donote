(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{5916:function(t,e,o){},6103:function(t,e,o){"use strict";var n=o("c2f1"),i=o.n(n);i.a},"73de":function(t,e,o){},"763f":function(t,e,o){"use strict";var n=o("5916"),i=o.n(n);i.a},"8a906":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-page",{staticClass:"page-editor-home row col-12",class:t.styles},[o("section",{class:t.contentClass},[o("m-editor-welcome",{directives:[{name:"show",rawName:"v-show",value:"welcome"===t.view,expression:"view==='welcome'"}]}),o("m-markdown-editor",{directives:[{name:"show",rawName:"v-show",value:"markdown"===t.view,expression:"view==='markdown'"}]}),o("m-note-editor",{directives:[{name:"show",rawName:"v-show",value:"note"===t.view,expression:"view==='note'"}]})],1)])},i=[],r=(o("8e6e"),o("8a81"),o("ac6a"),o("cadf"),o("06db"),o("456d"),o("28a5"),o("7f7f"),o("c47a")),s=o.n(r),a=o("a026"),c=o("c28b"),l=o.n(c),u=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("split-pane",{staticClass:"component-editor",attrs:{"min-percent":0,defaultPercent:t.leftPanePercent,split:"vertical"},on:{resize:t.onResize},nativeOn:{paste:function(e){return t.onPaste(e)}}},[o("template",{slot:"paneL"},[o("section",{attrs:{id:"editor"}},[o("section",{staticClass:"component-code content-container",on:{mouseenter:function(e){return t.onMouseEnter("editor")},mouseleave:function(e){return t.onMouseLeave("editor")}}},[o("codemirror",{ref:"codemirror",staticClass:"editor",attrs:{id:"codemirror",options:t.editorOption,hint:!0},on:{input:t.onEditorChanged,scroll:t.onEditorScroll},model:{value:t.source,callback:function(e){t.source=e},expression:"source"}})],1)])]),o("template",{slot:"paneR"},[o("section",{staticClass:"preview",on:{mouseenter:function(e){return t.onMouseEnter("preview")},mouseleave:function(e){return t.onMouseLeave("preview")}}},[t.printable?o("section",[o("article",{staticStyle:{padding:"0 10px"}},[o("vue-markdown",{attrs:{source:t.source,postTocRender:t.postTocRender,tocFirstLevel:2}})],1)]):o("section",{staticClass:"component-preview content-container"},[o("q-scroll-area",{ref:"previewScroll",staticStyle:{width:"100%",height:"100%"}},[o("q-scroll-observer",{on:{scroll:t.onPreviewScroll}}),o("article",{staticStyle:{padding:"0 10px"},attrs:{id:"markdown-preview"}},[o("vue-markdown",{attrs:{source:t.source,postTocRender:t.postTocRender,tocFirstLevel:2}})],1)],1)],1),t.printable?t._e():o("div",[t._e()])]),o("section",[o("q-dialog",{ref:"rightSideMenuModal",staticClass:"sidePanel",attrs:{position:"right","content-class":"editor-side-panel",square:""}},[o("q-layout",{staticClass:"bg-white",staticStyle:{"min-width":"300px"},attrs:{view:"lhh lpR fff"}},[o("q-header",{staticClass:"bg-white"},[o("q-toolbar",[o("q-toolbar-title",[o("q-btn-toggle",{attrs:{color:"blue-grey-5","toggle-color":"primary",options:t.sideMenus},on:{input:t.onSideViewChanged},model:{value:t.sideView,callback:function(e){t.sideView=e},expression:"sideView"}})],1),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close",color:"primary"}})],1)],1),o("q-page-container",[o("q-page",[o("section",{staticClass:"row col-12 content o-full",staticStyle:{position:"absolute"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:"basic"==t.sideView,expression:"sideView=='basic'"}],staticClass:"col-12"},[o("q-list",{attrs:{"no-border":"",link:"","inset-delimiter":""}},[o("q-item-label",{staticClass:"text-uppercase text-blue-grey-5 q-pa-md"},[t._v(t._s(t.$t("label.shareExport")))]),o("o-common-item",{attrs:{icon:"share",label:t.$t("action.share")},nativeOn:{click:function(e){return t.handleAction("action-share")}}}),o("o-common-item",{attrs:{icon:"mdi-file-pdf-box",label:t.$t("action.pdf")},nativeOn:{click:function(e){return t.handleAction("action-export")}}}),o("o-common-item",{attrs:{icon:"mdi-markdown",label:t.$t("action.exportMd")},nativeOn:{click:function(e){return t.handleAction("action-export-md")}}}),o("o-common-item",{attrs:{icon:"mdi-language-html5",label:t.$t("action.exportHtml")},nativeOn:{click:function(e){return t.handleAction("action-export-html")}}})],1),o("q-list",{attrs:{"no-border":"",link:"","inset-delimiter":""}},[o("q-item-label",{staticClass:"text-uppercase text-blue-grey-5 q-pa-md"},[t._v(t._s(t.$t("label.help")))]),o("o-common-item",{attrs:{icon:"widgets",label:t.$t("action.shortcut")},nativeOn:{click:function(e){return t.handleAction("action-shortcut")}}}),o("o-common-item",{attrs:{icon:"help",label:t.$t("action.guide")},nativeOn:{click:function(e){return t.handleAction("action-guide")}}}),o("o-common-item",{attrs:{icon:"font_download",label:t.$t("action.faq")},nativeOn:{click:function(e){return t.handleAction("action-faq")}}}),o("o-common-item",{attrs:{icon:"info",label:t.$t("action.about")},nativeOn:{click:function(e){return t.handleAction("action-about")}}})],1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:"toc"==t.sideView,expression:"sideView=='toc'"}],staticStyle:{width:"100%",height:"100%"}},[o("q-scroll-area",{ref:"tocScroll",staticStyle:{width:"100%",height:"100%"}},[o("q-tree",{ref:"tocTree",attrs:{nodes:t.tocTree,selected:t.selected,"node-key":"key","default-expand-all":"",color:"grey-5",id:"tocTree"},on:{"update:selected":function(e){t.selected=e}},nativeOn:{click:function(e){return t.onTocClick()}},scopedSlots:t._u([{key:"header-heading",fn:function(e){return o("div",{staticClass:"row items-center",attrs:{"data-source-line":e.node.heading.lineNumber},nativeOn:{click:function(o){return t.onTocClick(e.node)}}},[o("div",{nativeOn:{click:function(o){return t.onTocClick(e.node)}}},[t._v(t._s(e.node.label))])])}}])})],1)],1)])])],1)],1)],1),o("o-file-upload",{attrs:{title:t.$t("action.upload"),contentCss:{padding:"20px",height:"60vh",width:"50vw"},show:t.modal.uploader,file:t.pasteFile},on:{close:function(e){return t.onModalClose("uploader")},uploaded:t.onFileUploaded}})],1)])],2)},d=[],h=(o("ac4d"),o("b54a"),o("48c0"),o("8f94")),f=(o("1ef7"),o("31c5"),o("a7be"),o("7393"),o("0109"),o("d2e8"),o("ed9c"),o("4659"),o("01cb"),o("eb8f"),o("bbca"),o("d5db"),o("959b"),o("5f53"),o("9a48"),o("0920")),m=o("640f"),b=o("ce81"),p=o("5777"),v=o("3374"),w=o("916d"),g=o("2f62"),k=o("7fcb"),N=o("097f"),O=o("ed08"),y=o("8f85"),C=o("b0b9"),S=o("dcc5");function E(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function T(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?E(Object(o),!0).forEach((function(e){s()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):E(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}a["a"].use(f["a"]);var _=null,$={name:"markdown-editor",mixins:[S["a"]],data:function(){return{id:"",notebook:"default",source:"# New Markdown",editorOption:{tabSize:4,mode:{name:"markdown",json:!0},theme:"freshcut",line:!0,lineWrapping:!0,lineNumbers:!0,keyMap:"sublime",extraKeys:{Enter:"newlineAndIndentContinueMarkdownList","Ctrl-F":function(){_.action("action-find")},"Cmd-F":function(){_.action("action-find")},"Shift-Ctrl-S":function(){_.action("action-share")},"Ctrl-S":function(){_.save()},"Cmd-S":function(){_.save()},"Ctrl-B":function(){_.action("format-bold")},"Cmd-B":function(){_.action("format-bold")},"Ctrl-I":function(){_.action("format-italic")},"Cmd-I":function(){_.action("format-italic")},"Ctrl-Q":function(){_.quote()},"Ctrl-K":function(){_.code()},"Cmd-K":function(){_.code()},"Ctrl-L":function(){_.action("action-link")},"Cmd-L":function(){_.action("action-link")},"Ctrl-G":function(){_.action("action-picture")},"Cmd-G":function(){_.action("action-picture")},"Ctrl-R":function(){_.horizontal()},"Cmd-R":function(){_.horizontal()},"Ctrl-P":function(){_.print()},"Cmd-P":function(){_.print()}},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],styleActiveLine:!0,styleSelectedText:!0,scrollbarStyle:"native",tabindex:1,autofocus:!1},leftPanePercent:50,currentLineNumber:1,isEditorScroll:!1,isPreviewScroll:!1,sideView:"basic",modal:{uploader:!1},selected:"",pasteFile:{},printable:!1,isNew:!1,isLoading:!1}},components:{codemirror:h["codemirror"],CodeMirror:h["CodeMirror"],SplitPane:m["a"],OMedia:b["a"],OFileUpload:p["a"],OMarkdownArticle:v["a"],OCommonItem:w["a"]},computed:T({},Object(g["c"])({isMobile:"isMobile",currentNotebookId:"currentNotebookId",setting:"setting",toc:"toc",currentMedia:"currentMedia",currentNote:"currentNote",openedNotes:"openedNotes"}),{tocTree:function(){return a["a"].nextTick((function(){})),this.toc},lineNumber:function(){return this.setting.isLineNumber},syntaxTheme:function(){return this.setting.syntaxTheme},cm:function(){return this.$refs.codemirror.codemirror},noteAction:function(){return this.$store.state.note.action},revision:function(){return this.currentNote.revision},sideMenus:function(){return[{label:this.$t("label.basic"),value:"basic",icon:"info"},{label:this.$t("label.toc"),value:"toc",icon:"format_align_justify"}]}}),methods:T({},Object(g["b"])({SaveNote:"SaveNote",GetNoteLine:"GetNoteLine",SetNoteLine:"SetNoteLine",A_QUERY_RECENT_NOTE:"A_QUERY_RECENT_NOTE"}),{refreshEditor:function(){var t=this;setTimeout((function(){t.cm.refresh(),t.cm.focus()}),10)},create:function(){var t=this;if("New Markdown"===this.currentNote.title)this.loadNote(this.currentNote.id),this.$router.push({name:"markdown_new"});else{this.isNew=!0,this.source="# New Markdown",this.notebook="",this.id="";var e=this;this.$nextTick((function(){t.save((function(t){e.openNote(t),e.isNew=!1,e.$router.push({name:"markdown",params:{id:t.id}})}),!1)}))}},save:function(t){var e=this,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=_.cm.doc.getValue();if(n){var i=this,r=this.id?this.id:Object(O["b"])(),s=this.notebook?this.notebook:this.currentNotebookId;this.SaveNote({id:r,notebook:s,draft:n,state:0,isSync:o}).then((function(n){o&&(e.id?Object(C["e"])(i.$t("note.tip.synced"),0,"top"):Object(C["d"])(i.$t("note.tip.created"),0,"top")),e.postLoadNote(n),e.openNote(n),t&&t(n)})).catch((function(t){t.message.indexOf("Cancel")>=0?i.$q.notify({color:"amber-10",icon:"warning",message:i.$t("note.tip.signin"),detail:i.$t("note.tip.signinDetail"),timeout:6e3,position:"top",actions:[{label:i.$t("label.signin"),icon:"input",handler:function(){i.$router.push("/auth/signin")}},{label:i.$t("action.close"),icon:"close",handler:function(){}}]}):console.log(t)}))}},remove:function(){this.id="",this.source="",this.notebook=""},loadNote:function(t){var e=this,o=this;this.isLoading=!0,Object(k["a"])(t).then((function(n){e.notebook=n.notebook,e.source=n.draft,e.postLoadNote(n),e.openNote(n),e.$nextTick((function(){o.isLoading=!1,o.restoreScroll(t)}))}))},restoreScroll:function(t){var e=this;this.GetNoteLine(t).then((function(t){t&&e.scrollToLine(t,!0)}))},postLoadNote:function(t){this.id=t.id,this.cacheNote(t.id),this.$store.commit("SET_CURRENT_NOTE",t),this.A_QUERY_RECENT_NOTE(),t.title&&(document.title="Donote | "+t.title)},openNote:function(t){this.refreshEditor(),this.$store.commit("OPEN_NOTE",t)},cacheNote:function(t){localStorage.setItem("LAST_NOTE",t)},onCopy:function(){this.$q.notify({color:"green",textColor:"white",icon:"mdi-content-copy",message:"Share Link Copied to Clipboard",position:"top",timeout:800})},handleRoute:function(t,e){var o=t.name,n=t.params.id;"markdown"!==o&&"editor"!==o||(!n&&this.openedNotes.length>0&&(n=localStorage.getItem("LAST_NOTE")),n&&this.loadNote(n))},openWindow:function(){this.$refs.rightSideMenuModal.show()},openSideView:function(t){this.sideView=t},onSideViewChanged:function(t){},action:function(t){t=(new Date).getTime()+"|"+t,_.$store.commit("setNoteAction",t)},handleAction:function(t,e){switch(t){case"view-edit":this.leftPanePercent=100,this.refreshEditor();break;case"view-live":var o=(new Date).getTime(),n=o/999999999999999;this.leftPanePercent=50+n;break;case"view-preview":this.leftPanePercent=0,this.refreshEditor();break;case"action-select-all":this.selectAll();break;case"action-add":this.create();break;case"action-remove":this.remove();break;case"action-save":this.save();break;case"action-share":this.$refs.rightSideMenuModal.hide(),this.share();break;case"action-print":case"action-export":this.print();break;case"action-export-md":Object(N["c"])();break;case"action-export-html":Object(N["a"])();break;case"action-shortcut":this.$refs.rightSideMenuModal.hide(),this.shortcut();break;case"action-guide":this.$router.push("/system/markdown");break;case"action-faq":break;case"action-about":this.$router.push("/system/about");break;case"format-bold":this.bold(this.cm);break;case"format-italic":this.italic();break;case"format-quote":this.quote();break;case"format-list":this.bulleted();break;case"format-code":this.code();break;case"format-link":this.link(e);break;case"format-picture":this.picture(e);break;case"format-table":this.table();break;case"format-horizontal":this.horizontal();break;case"format-media":Object(y["a"])({type:"media"});break;case"action-media":this.mediaSelected();break}},share:function(){Object(y["a"])({type:"share",content:"note"})},print:function(){var t=this;this.$refs.rightSideMenuModal.hide(),setTimeout((function(){t.printable=!0,t.$nextTick((function(){window.print(),t.printable=!1}))}),1e3)},shortcut:function(){Object(y["a"])({type:"shortcut"})},mediaSelected:function(){var t=this.currentMedia.type,e=this.currentMedia.url,o=this.currentMedia.name;this.onMediaSelected(t,e,o)},onMediaSelected:function(t,e,o){switch(t){case 1:this.picture(e,o);break;default:this.link(e,o);break}},onModalClose:function(t){this.modal[t]=!1},onResize:function(t){console.log("resize",t)},onPaste:function(t){var e=t.clipboardData||t.originalEvent.clipboardData||window.clipboardData,o=e.items,n=!0,i=!1,r=void 0;try{for(var s,a=o[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var c=s.value;if(console.log("paste",c),"file"===c.kind){this.pasteFile=c.getAsFile(),this.modal.uploader=!0;break}}}catch(l){i=!0,r=l}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}},onFileUploaded:function(t,e){this.onMediaSelected(t,e,"Demo")},onMouseEnter:function(t){"editor"===t?this.isEditorScroll=!0:"preview"===t&&(this.isPreviewScroll=!0)},onMouseLeave:function(t){"editor"===t?this.isEditorScroll=!1:"preview"===t&&(this.isPreviewScroll=!1)},onEditorChanged:function(){this.isNew||this.isLoading||this.save(null,!1),a["a"].nextTick((function(){document.getElementsByTagName("a")}))},onEditorScroll:function(){if(!this.isPreviewScroll){var t=this.cm,e=t.getScrollInfo(),o=t.coordsChar({left:e.left,top:e.top},"local").line+1;this.SetNoteLine({id:this.id,line:o});var n='[data-source-line="'+o+'"]',i=document.querySelector(n);if(i){var r=i.offsetTop,s=i.offsetParent;s&&"TABLE"===s.tagName&&(r+=s.offsetTop+31),this.$refs.previewScroll.setScrollPosition(r,200)}}},onPreviewScroll:function(t){if(!this.isEditorScroll){for(var e,o=this.cm,n=0,i=t.position,r=document.querySelectorAll("[data-source-line]"),s=0;s<r.length;s++){var a=r[s],c=parseInt(a.attributes["data-source-line"].value);if(a){var l=a.offsetTop,u=a.offsetParent;if(u&&"TABLE"===u.tagName&&(l+=u.offsetTop),l>=i-20){n=c,e=a;break}}}if(n>=0&&e){this.SetNoteLine({id:this.id,line:n});var d=o.charCoords({line:n-1,ch:0},"local");o.scrollTo(0,d.top)}}},scrollToLine:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isEditorScroll=!0;var o=this.cm,n=t,i=e?0:200,r='[data-source-line="'+n+'"]',s=document.querySelector(r);if(s){var a=s.offsetTop,c=s.offsetParent;c&&"TABLE"===c.tagName&&(a+=c.offsetTop+31),console.log("scrollToLine",t,s,a,i),this.$refs.previewScroll.setScrollPosition(a,i)}if(this.isPreviewScroll=!0,n=t,n>=0&&s){var l=o.charCoords({line:n-1,ch:0},"local");o.scrollTo(0,l.top)}},postTocRender:function(t){},onTocClick:function(){this.scrollToLine(this.selected),this.SetNoteLine({id:this.id,line:this.selected})},selectAll:function(){var t,e="markdown-preview",o=document.getElementById(e);if(document.body.createTextRange)t=document.body.createTextRange(),t.moveToElementText(o),t.select();else if(window.getSelection){var n=window.getSelection();t=document.createRange(),t.selectNode(o),n.removeAllRanges(),n.addRange(t)}},loadSetting:function(){this.editorOption.lineNumbers=this.lineNumber,this.editorOption.theme=this.syntaxTheme,this.isMobile&&(this.leftPanePercent=0)}}),watch:{$route:function(t,e){this.handleRoute(t,e)},lineNumber:function(t,e){this.editorOption.lineNumbers=t},syntaxTheme:function(t,e){this.editorOption.theme=t},noteAction:function(t,e){var o,n,i=t.split("|");i.length>=1&&(o=i[1]),i.length>=2&&(n=i[2]),this.handleAction(o,n)},revision:function(t,e){console.log("revision changed",t),1!==this.currentNote.type&&this.loadNote(this.currentNote.id)}},mounted:function(){_=this,this.handleRoute(this.$route),this.loadSetting()}},j=$,x=(o("6103"),o("2877")),A=Object(x["a"])(j,u,d,!1,null,null,null),P=A.exports,q=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-page",{staticClass:"m-note-editor row col-12"},[o("section",{staticClass:"tiptop tiptap-editor"},[o("editor-menu-bar",{attrs:{editor:t.editor},scopedSlots:t._u([{key:"default",fn:function(e){e.commands,e.isActive;var n=e.focused;return[o("section",{staticClass:"row col-12 justify-between items-center bg-primary toolbar"},[o("div",{staticClass:"row menubar q-px-xs is-hidden",class:{"is-focused":n}},[o("o-menubar-btn",{attrs:{icon:"add",tooltip:t.$t("note.add")},nativeOn:{click:function(e){return t.newNote(e)}}}),o("q-separator",{attrs:{vertical:"",inset:""}}),o("o-menubar-btn",{attrs:{icon:"info"}},[o("q-menu",{ref:"notePopover1",staticClass:"shadow-5",attrs:{anchor:"bottom middle",self:"top middle",maxWidth:"100vw",square:""}},[o("o-note-info")],1)],1),o("o-menubar-btn",{attrs:{icon:"mdi-cloud-sync",tooltip:t.$t("action.sync")},nativeOn:{click:function(e){return t.onSave(e)}}}),o("q-separator",{attrs:{vertical:"",inset:""}}),o("o-menubar-btn",{attrs:{icon:"search"},nativeOn:{click:function(e){return t.$router.push("/search")}}})],1),o("div",{staticClass:"q-px-xs extra-actions"},[o("q-btn",{attrs:{icon:"home",color:"white",to:"/welcome",flat:"",round:""}}),o("q-btn",{attrs:{icon:"menu",color:"white",flat:"",round:""},on:{click:t.toggleDrawer}})],1)])]}}])}),o("editor-menu-bubble",{staticClass:"menububble",attrs:{editor:t.editor,keepInBounds:!0},on:{hide:t.hideLinkMenu},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.commands,i=e.isActive,r=e.getMarkAttrs,s=e.menu;return[o("div",{staticClass:"menububble",class:{"is-active":s.isActive&&0==t.selectedCellCount},style:"left: "+s.left+"px; bottom: "+s.bottom+"px;"},[t.linkMenuIsActive?o("form",{staticClass:"menububble__form",on:{submit:function(e){return e.preventDefault(),t.setLinkUrl(n.link,t.linkUrl)}}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.linkUrl,expression:"linkUrl"}],ref:"linkInput",staticClass:"menububble__input",attrs:{type:"text",placeholder:"https://"},domProps:{value:t.linkUrl},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.hideLinkMenu(e)},input:function(e){e.target.composing||(t.linkUrl=e.target.value)}}}),o("q-btn",{staticClass:"menububble__button",attrs:{flat:"",dense:""},on:{click:function(e){return t.setLinkUrl(n.link,null)}}},[o("q-icon",{attrs:{name:"close"}})],1)],1):[o("q-btn",{staticClass:"menububble__button",class:{"is-active":i.link()},attrs:{flat:"",dense:""},on:{click:function(e){t.showLinkMenu(r("link"))}}},[o("span",[t._v(t._s(i.link()?"Update Link":"Add Link"))]),o("q-icon",{attrs:{name:"link"}})],1)]],2)]}}])}),o("editor-menu-bubble",{staticClass:"menububble",attrs:{editor:t.editor},on:{hide:t.hideLinkMenu},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.commands,i=e.isActive,r=(e.getMarkAttrs,e.menu);return[o("div",{staticClass:"menububble",class:{"is-active":i.table()&&!r.isActive||t.selectedCellCount>0},style:"right: "+t.tableOffsetRight+"px; top: "+t.tableOffsetTop+"px;"},[o("o-menubar-btn",{attrs:{icon:"mdi-table-remove",tooltip:"Romve Table"},nativeOn:{click:function(t){return n.deleteTable(t)}}}),o("q-separator",{attrs:{vertical:"",inset:""}}),o("o-menubar-btn",{attrs:{icon:"mdi-table-column-plus-before"},nativeOn:{click:function(t){return n.addColumnBefore(t)}}}),o("o-menubar-btn",{attrs:{icon:"mdi-table-column-plus-after"},nativeOn:{click:function(t){return n.addColumnAfter(t)}}}),o("o-menubar-btn",{attrs:{icon:"mdi-table-column-remove"},nativeOn:{click:function(t){return n.deleteColumn(t)}}}),o("q-separator",{attrs:{vertical:"",inset:""}}),o("o-menubar-btn",{attrs:{icon:"mdi-table-row-plus-before"},nativeOn:{click:function(t){return n.addRowBefore(t)}}}),o("o-menubar-btn",{attrs:{icon:"mdi-table-row-plus-after"},nativeOn:{click:function(t){return n.addRowAfter(t)}}}),o("o-menubar-btn",{attrs:{icon:"mdi-table-row-remove"},nativeOn:{click:function(t){return n.deleteRow(t)}}}),o("q-separator",{attrs:{vertical:"",inset:""}}),o("o-menubar-btn",{attrs:{icon:"mdi-table-merge-cells"},nativeOn:{click:function(t){return n.toggleCellMerge(t)}}})],1)]}}])}),o("q-scroll-area",{staticClass:"editor-scroll-area",class:"view-"+t.view},[o("q-scroll-observer",{on:{scroll:t.onScroll}}),o("editor-content",{staticClass:"editor__content",attrs:{editor:t.editor}})],1)],1)])},L=[],R=o("cd42"),M=o("f23d"),D=o("332f"),I=o.n(D),U=o("4dd1"),B=o.n(U),z=o("ee8c"),K=o.n(z),F=o("cfb4"),W=o("4d48"),V=o("34cf"),Q=o("5e18"),Y=o("65ab"),H=o("93e1"),G=o("a9fb"),J=o("10a8"),X=o("b35e"),Z=o("3ac3"),tt=o("3ba6");function et(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function ot(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?et(Object(o),!0).forEach((function(e){s()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):et(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var nt={name:"note-editor",mixins:[X["a"],Z["a"],tt["a"]],data:function(){return{view:"page",id:"",notebook:"default",isNew:!1,isLoading:!1,json:{},html:"",editor:null,linkUrl:null,linkMenuIsActive:!1,scrollHeight:0,focusOffsetTop:0,focusOffsetWidth:0,selectedCellSize:0}},components:{EditorContent:R["c"],EditorMenuBar:R["d"],EditorMenuBubble:R["e"],OMenubarBtn:H["a"],ONoteInfo:G["a"],MetaInput:J["a"]},methods:ot({},Object(g["b"])({A_SET_DRAWER:"A_SET_DRAWER",SaveNote:"SaveNote",A_QUERY_RECENT_NOTE:"A_QUERY_RECENT_NOTE"}),{initEditor:function(){var t=this;this.editor=new R["b"]({extensions:[new F["a"],new W["a"],new V["a"],new Q["a"],new Y["a"],new M["a"],new M["c"],new M["e"],new M["f"]({languages:{java:I.a,javascript:B.a,css:K.a}}),new M["h"],new M["i"]({levels:[1,2,3]}),new M["o"],new M["p"],new M["n"],new M["b"],new M["d"],new M["m"],new M["r"],new M["z"],new M["j"],new M["w"]({nested:!0}),new M["x"],new M["s"]({resizable:!0}),new M["u"],new M["t"],new M["v"],new M["q"]({showOnlyCurrent:!1,emptyNodeText:function(e){return"title"===e.type.name?t.$t("label.title"):"Note Content"}}),new M["g"]({className:"has-focus",nested:!0}),new M["k"],new M["y"]({node:"paragraph",notAfter:["paragraph"]}),new M["l"]],autoFocus:!0,content:"",onUpdate:function(e){var o=e.getJSON,n=e.getHTML;t.json=o(),t.html=n(),t.isNew||t.isLoading||t.save(null,!1)},onTransaction:function(e){e.state;var o=document.querySelectorAll(".has-focus"),n=o.length;if(n>0){var i=o[0].offsetTop;t.focusOffsetTop=i+40}var r=document.querySelectorAll(".m-note-editor");t.focusOffsetWidth=parseInt((r[0].offsetWidth-800)/2);var s=document.querySelectorAll(".selectedCell");t.selectedCellSize=s.length}})},setContent:function(){this.editor.setContent(this.json,!0),this.editor.focus()},cleanContent:function(){this.editor.clearContent(!1),this.editor.focus()},showLinkMenu:function(t){var e=this;this.linkUrl=t.href,this.linkMenuIsActive=!0,this.$nextTick((function(){e.$refs.linkInput.focus()}))},hideLinkMenu:function(){this.linkUrl=null,this.linkMenuIsActive=!1},setLinkUrl:function(t,e){t({href:e}),this.hideLinkMenu()},showImagePrompt:function(t){var e=prompt("Enter the url of your image here");null!==e&&t({src:e})},showMedia:function(t){Object(y["a"])({type:"media",data:{type:"note",command:t},callback:this.insertImage})},insertImage:function(t,e){e&&t({src:e})},onScroll:function(t){this.scrollHeight=t.position},getTitle:function(){var t="",e=this.json.content;if(e&&e.length>0){var o=e[0].content;o&&o.length>0&&(t=o[0].text)}return t||""},create:function(){var t=this;if(console.log("create"),this.reset(),"New Note"===this.currentNote.title)console.log("Current is new note"),this.loadNote(this.currentNote.id),this.$router.push({name:"note_new"});else{var e=this;this.$nextTick((function(){t.save((function(t){e.isNew=!1,e.$router.push({name:"note",params:{id:t.id}})}),!1)}))}},save:function(t){var e=this,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.id?this.id:Object(O["b"])(),i=this.notebook?this.notebook:this.currentNotebookId,r={id:n,type:1,notebook:i,draft:JSON.stringify(this.json),state:0,isSync:o};console.log("save",r),this.SaveNote(r).then((function(n){o&&(e.id?e.notifySuccess(e.$t("note.tip.synced"),"top"):e.notifyInfo(e.$t("note.tip.created"),"top")),e.postLoadNote(r),e.openNote(r),t&&t(n)})).catch((function(t){t.message.indexOf("Cancel")>=0?e.$q.notify({color:"amber-10",icon:"warning",message:e.$t("note.tip.signin"),detail:e.$t("note.tip.signinDetail"),timeout:6e3,position:"top",actions:[{label:e.$t("label.signin"),icon:"input",handler:function(){e.$router.push("/auth/signin")}},{label:e.$t("action.close"),icon:"close",handler:function(){}}]}):console.log(t)}))},loadNote:function(t){var e=this;this.isLoading=!0,Object(k["a"])(t).then((function(t){e.notebook=t.notebook,e.json=JSON.parse(t.draft),e.setContent(),e.postLoadNote(t),e.openNote(t),e.$nextTick((function(){e.isLoading=!1}))}))},postLoadNote:function(t){this.id=t.id,this.cacheNote(t.id),this.$store.commit("SET_CURRENT_NOTE",t),this.A_QUERY_RECENT_NOTE(),t.title&&(document.title="Donote | "+t.title)},openNote:function(t){this.$store.commit("OPEN_NOTE",t)},cacheNote:function(t){localStorage.setItem("LAST_NOTE",t)},onAction:function(t,e){switch(console.log("onAction",t,e),t){case"note-action-add":this.create();break}},onSave:function(){this.save()},onShare:function(){Object(y["a"])({type:"share",content:"note"})},reset:function(){this.json={},this.isNew=!0,this.notebook="",this.id="",this.cleanContent()},toggleDrawer:function(){this.A_SET_DRAWER((new Date).getTime())},onRoute:function(t){if("note_new"===t.name)this.create();else if("note"===t.name){console.log("open note");var e=t.params.id;e&&this.loadNote(e)}}}),computed:ot({},Object(g["c"])({noteAction:"noteAction",currentNote:"currentNote",currentNotebookId:"currentNotebookId",currentMedia:"currentMedia"}),{focusHeight:function(){return this.focusOffsetTop-this.scrollHeight},selectedCellCount:function(){return this.selectedCellSize},tableOffsetTop:function(){return"page"===this.view?this.focusHeight+16:this.focusHeight},tableOffsetRight:function(){return"page"===this.view?this.focusOffsetWidth-108:-108}}),watch:{$route:function(t,e){this.onRoute(t)},noteAction:function(t,e){var o,n,i=t.split("|");i.length>=1&&(o=i[1]),i.length>=2&&(n=i[2]),this.onAction(o,n)}},created:function(){},mounted:function(){this.initEditor(),this.onRoute(this.$route)},beforeDestroy:function(){this.editor.destroy()}},it=nt,rt=(o("763f"),Object(x["a"])(it,q,L,!1,null,null,null)),st=rt.exports,at=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"row col-12 m-editor-welcome"},[o("header",{staticClass:"row col-12 justify-between items-center bg-primary text-white"},[o("div",{staticClass:"row items-center q-px-md"},[o("img",{attrs:{src:"statics/logo_white.svg",width:"24"}}),o("span",{staticClass:"q-ml-sm"},[t._v(t._s(t.$t("app.name")))])]),o("q-btn",{staticClass:"q-mx-xs",attrs:{icon:"menu",round:"",flat:""},on:{click:t.toggleDrawer}})],1),o("section",{staticClass:"row col-12 q-mt-md content"},[o("nav",{staticClass:"col-12"},[o("section",{staticClass:"col-12 panel-start"},[o("h1",[t._v(t._s(t.$t("label.start")))]),o("div",[o("q-btn",{attrs:{color:"blue",icon:"post_add",label:t.$t("note.add"),dense:"",flat:""},on:{click:function(e){return t.newNote()}}})],1),o("div",[o("q-btn",{attrs:{color:"blue",icon:"mdi-markdown-outline",label:t.$t("note.markdown.add"),dense:"",flat:""},on:{click:function(e){return t.newMarkdown()}}})],1),o("div",[o("q-btn",{attrs:{color:"blue",icon:"reorder",label:t.$t("quicknote"),dense:"",flat:"",to:"/quicknote"}})],1),o("div",[o("q-btn",{attrs:{color:"blue",icon:"settings",label:t.$t("setting"),dense:"",flat:"",to:"/system/settings"}})],1)]),o("section",{staticClass:"row col-12 panel-recent"},[o("h1",[t._v(t._s(t.$t("note.recent")))]),o("div",{staticClass:"col-10"},[o("q-list",{staticClass:"list",attrs:{"no-border":"",link:"","inset-delimiter":""}},t._l(t.recentNotes,(function(e,n){return n<5?o("q-item",{key:n,staticClass:"text-blue",attrs:{clickable:""},nativeOn:{click:function(o){return t.openNote(e)}}},[o("q-item-section",{attrs:{side:""}},[1===e.type?o("q-icon",{staticClass:"text-blue",attrs:{name:"mdi-file-document-box-outline",size:"1.5rem"}}):o("q-icon",{staticClass:"text-blue",attrs:{name:"mdi-markdown-outline",size:"1.5rem"}})],1),o("q-item-section",[t._v(t._s(e.title))])],1):t._e()})),1)],1)]),o("section",{staticClass:"col-12 panel-start"},[o("h1",[t._v(t._s(t.$t("label.account")))]),t.isLogin?[o("div",[o("q-btn",{attrs:{color:"blue",icon:"person",label:t.$t("my"),dense:"",flat:"",to:"/my"}})],1),o("div",[o("q-btn",{attrs:{color:"blue",icon:"mdi-logout",label:t.$t("label.signout"),dense:"",flat:"",to:"/auth/signout"}})],1)]:[o("div",[o("q-btn",{attrs:{color:"green",icon:"person_add",label:t.$t("label.signup"),dense:"",flat:"",to:"/auth/signup"}})],1),o("div",[o("q-btn",{attrs:{color:"blue",icon:"mdi-login",label:t.$t("label.signin"),dense:"",flat:"",to:"/auth/signin"}})],1)]],2)])]),o("footer",{staticClass:"row col-12 justify-center items-center"},[t._e()])])},ct=[],lt=o("dee7");function ut(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function dt(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ut(Object(o),!0).forEach((function(e){s()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ut(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var ht={name:"o-markdown-welcome",mixins:[X["a"],Z["a"]],data:function(){return{value:""}},computed:dt({},Object(g["c"])({isProgress:"isProgress",notes:"openedNotes",recentNotes:"recentNotes",currentNote:"currentNote",myUid:"myUid"}),{currentNoteId:function(){return this.currentNote.id}}),methods:dt({},Object(g["b"])({A_SET_DRAWER:"A_SET_DRAWER",A_QUERY_RECENT_NOTE:"A_QUERY_RECENT_NOTE"}),{toggleDrawer:function(){this.A_SET_DRAWER((new Date).getTime())},onClickTab:function(t){this.$router.push({name:"note",params:{id:t}})},onClose:function(t){this.$store.commit("CLOSE_NOTE",t),t===this.currentNoteId&&this.notes.length>0&&(t=this.notes[0].id,this.$router.push({name:"note",params:{id:t}}))}}),watch:{currentNoteId:function(t,e){this.value=t}},mounted:function(){this.A_QUERY_RECENT_NOTE()},components:{OButton:lt["a"]}},ft=ht,mt=(o("eaa6"),Object(x["a"])(ft,at,ct,!1,null,null,null)),bt=mt.exports,pt=o("fbe4"),vt=o("bd1c");function wt(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function gt(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?wt(Object(o),!0).forEach((function(e){s()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):wt(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}a["a"].use(l.a);var kt={name:"page-editor-home",mixins:[Z["a"]],data:function(){return{term:"",notebook:"",notebookName:"Notes",noteSortKey:"0-desc",isPinned:!1,isShowNoteList:!1,contentClass:"col-xs-12 col-sm-12 col-md-12",tipDelay:500}},components:{BaseToolbar:pt["a"],MetaInput:J["a"],MMarkdownEditor:P,MNoteEditor:st,OTooltipBottom:vt["a"],MEditorWelcome:bt},methods:gt({},Object(g["b"])({UpdateNote:"UpdateNote",RemoveNote:"RemoveNote"}),{onClickOutside:function(t){this.isPinned||this.showNoteList(!1)},onAction:function(t){t=(new Date).getTime()+"|"+t,this.$store.commit("setNoteAction",t)},showNoteList:function(t){this.isShowNoteList=t},togglePin:function(){this.isPinned=!this.isPinned,localStorage.setItem("pinNoteList",this.isPinned)},openNotebook:function(t){this.notebook=t,this.showNoteList(!0),"defalut"!==t&&"all"!==t&&"star"!==t||(t=""),this.term="",this.$store.commit("SET_CURRENT_NOTEBOOK_ID",t)},restoreNote:function(){this.currentNote&&this.currentNote.id&&this.openNote(this.currentNote)},onOpenNote:function(t){console.log("onOpenNote",this.isPinned),this.showNoteList(this.isPinned),this.openNote(t)},starNote:function(t,e){var o={id:t.id,star:e};this.UpdateNote(o)},beforeDelete:function(t){var e=this;this.$q.dialog({title:"Confirm",message:"Are you sure remove this note?",ok:"Yes",cancel:"No"}).onOk((function(){e.RemoveNote({id:t.id,isCloud:!1})}))},shareNotebook:function(){Object(y["a"])({type:"share",content:"notebook"})},onRoute:function(t){var e=t.name,o=t.params.id,n=t.params.name;"notebook"===e?(this.openNotebook(o),n&&(this.notebookName=n)):"home"===e&&this.restoreNote()},handleAction:function(t,e){switch(console.log("action",t,e),t){case"action-add":this.showNoteList(!1);break;case"view-edit":break}},loadNotes:function(){this.$store.dispatch("A_QUERY_NOTE")},sortNote:function(t,e){return"a-asc"===this.noteSortKey?t.title.toLowerCase()<e.title.toLowerCase()?-1:1:"a-desc"===this.noteSortKey?t.title.toLowerCase()>e.title.toLowerCase()?-1:1:"0-desc"===this.noteSortKey?t.cedittime>e.cedittime?-1:1:t.cedittime<e.cedittime?-1:1},searchFilter:function(t){return function(e){var o=e.title.toLowerCase(),n=o.indexOf(t.toLowerCase());return t.length>1?n>=0:0===n}},handleSortNote:function(t){var e=this.noteSortKey.substr(0,1);"title"===t?"a"===e&&"a-asc"===this.noteSortKey?this.noteSortKey="a-desc":this.noteSortKey="a-asc":"0"===e?"0-asc"===this.noteSortKey?this.noteSortKey="0-desc":this.noteSortKey="0-asc":this.noteSortKey="0-desc"}}),computed:gt({},Object(g["c"])({notes:"notes",currentNote:"currentNote",currentNotebook:"currentNotebook",openedNotebook:"openedNotebook",openedNotes:"openedNotes",showSidebar:"showSidebar"}),{noteAction:function(){return this.$store.state.note.action},noteList:function(){var t=this;function e(e){switch(t.notebook){case"all":return!0;case"star":return 1===e.star;default:return e.notebook===t.notebook}}return this.notes.filter(e).filter(this.searchFilter(this.term)).sort(this.sortNote)},noteListClass:function(){return this.showSidebar?"with-sidebar":""},view:function(){var t="welcome",e=this.$route.name;return this.openedNotes.length>0&&"welcome"!==e&&(t=e.indexOf("markdown")>=0?"markdown":e.indexOf("note")>=0?"note":1===this.currentNote.type?"note":"markdown"),console.log("editor view",t),t},styles:function(){return"view-".concat(this.view)}}),watch:{$route:function(t,e){this.onRoute(t)},noteAction:function(t,e){var o,n,i=t.split("|");i.length>=1&&(o=i[1]),i.length>=2&&(n=i[2]),this.handleAction(o,n)},showGuide:function(t,e){t&&(this.$router.push("/welcome"),this.$store.dispatch("A_QUERY_RECENT_NOTE"))},openedNotebook:function(t,e){var o=t.split("|"),n=o[0];this.openNotebook(n)}},created:function(){this.$emit("viewChanged","editor")},mounted:function(){var t=localStorage.getItem("pinNoteList");this.isPinned="true"===t,this.onRoute(this.$route),this.loadNotes()}},Nt=kt,Ot=(o("c492"),Object(x["a"])(Nt,n,i,!1,null,null,null));e["default"]=Ot.exports},c2f1:function(t,e,o){},c492:function(t,e,o){"use strict";var n=o("73de"),i=o.n(n);i.a},c640:function(t,e,o){},eaa6:function(t,e,o){"use strict";var n=o("c640"),i=o.n(n);i.a}}]);