(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"6cdf":function(t,e,o){"use strict";var n=o("d2fb"),a=o.n(n);a.a},cbbf:function(t,e,o){"use strict";var n=o("e7b4"),a=o.n(n);a.a},d2fb:function(t,e,o){},e7b4:function(t,e,o){},eff4:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-layout",{staticClass:"o-layout layout-share",attrs:{view:"hHh Lpr lFf"}},[o("q-header",{staticClass:"top-navi"},[o("q-toolbar",{staticClass:"toolbar"},[o("q-toolbar-title",[o("section",{staticClass:"row items-center"},[o("section",{staticClass:"row justify-start items-center q-px-sm logo-wrapper"},[t.shared?o("div",[o("q-btn",{attrs:{flat:"",icon:"menu",round:""},on:{click:t.onToggleDrawer}})],1):t._e(),o("div",{},[o("q-btn",{attrs:{flat:"",dense:""},on:{click:function(e){return t.$router.push("/")}}},[o("img",{attrs:{src:"statics/logo_white.svg",height:"30"}}),o("div",{staticClass:"q-ml-xs title"},[t._v(t._s(t.$t("app.name")))]),o("q-tooltip",[t._v("\n                  "+t._s(t.$t("app.description"))+"\n                ")])],1)],1)]),t.shared?t._e():o("section",[o("q-tabs",{staticClass:"o-navi-tabs",attrs:{align:"left",shrink:"","inline-label":""}},[t._l(t.topMenus,(function(e,n){return e.show?["route"===e.action?o("q-route-tab",{key:n,attrs:{to:e.to,exact:"",label:e.label}},[e.naviIcon?o("q-icon",{attrs:{name:e.naviIcon,color:e.color}}):t._e()],1):o("q-tab",{key:n,attrs:{label:e.label}},[e.naviIcon?o("q-icon",{attrs:{name:e.naviIcon,color:e.color}}):t._e()],1)]:t._e()}))],2)],1)])]),o("section",{staticClass:"row items-center toolbar-extra"},[t.shared?o("div",["markdown"===t.view?o("q-btn-dropdown",{staticClass:"square",attrs:{label:t.$t("label.viewExport"),flat:""}},[o("section",{},[o("o-common-item",{attrs:{icon:"code",label:t.$t("view.code")},nativeOn:{click:function(e){return t.handleAction("view-edit")}}}),o("o-common-item",{attrs:{icon:"visibility",label:t.$t("view.preview")},nativeOn:{click:function(e){return t.handleAction("view-preview")}}}),o("q-separator"),o("o-common-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"mdi-file-pdf-box",label:t.$t("action.pdf")},nativeOn:{click:function(e){return t.handleAction("action-export")}}}),o("o-common-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"mdi-markdown",label:t.$t("action.exportMd")},nativeOn:{click:function(e){return t.handleAction("action-export-md")}}}),o("o-common-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"mdi-language-html5",label:t.$t("action.exportHtml")},nativeOn:{click:function(e){return t.handleAction("action-export-html")}}})],1)]):t._e()],1):o("div",[o("q-btn",{staticClass:"bg-blue text-white",attrs:{label:t.$t("label.quickstart"),dense:"",flat:""}}),o("q-btn",{staticClass:"text-blue-2",attrs:{label:t.$t("label.signin")+"/"+t.$t("label.signup"),to:"/auth/signin",outline:"",dense:""}})],1)])],1)],1),o("q-drawer",{attrs:{width:260,"content-class":"row o-navi o-left-drawer"},model:{value:t.shareDrawerOpen,callback:function(e){t.shareDrawerOpen=e},expression:"shareDrawerOpen"}},[o("section",{staticClass:"col side-bar"},[o("share-navi")],1)]),o("q-page-container",[o("router-view")],1)],1)},a=[],r=(o("8e6e"),o("8a81"),o("ac6a"),o("cadf"),o("06db"),o("456d"),o("c47a")),i=o.n(r),s=(o("7f7f"),o("a481"),o("916d")),c=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("drawer-navi",{staticClass:"share-navi",attrs:{withHeader:!1,footer:t.showFooter}},[o("template",{slot:"action"},[o("q-tabs",{staticClass:"row col-12",attrs:{align:"left","inline-label":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[t.shareNotebook.id?o("q-tab",{attrs:{name:"notebook",icon:"folder",label:"笔记列表"}}):t._e(),o("q-tab",{attrs:{name:"note",icon:"mdi-file-tree",label:"笔记目录"}})],1)],1),o("template",{slot:"content"},[o("section",{staticClass:"q-py-sm"},[o("q-list",{directives:[{name:"show",rawName:"v-show",value:"notebook"===t.tab,expression:"tab === 'notebook'"}],ref:"list",staticClass:"o-navi-list",attrs:{"no-border":"",link:"","inset-delimiter":""}},t._l(t.shareNotes,(function(e,n){return o("o-note-item",{key:n,ref:"note",refInFor:!0,attrs:{icon:1===e.type?"mdi-file-document-box":"mdi-markdown",label:e.title,id:e.id,active:t.actives["a_"+e.id],dense:"",clickable:"","side-menu":!1},nativeOn:{click:function(o){return t.openNote(e)}}})})),1),o("q-tree",{directives:[{name:"show",rawName:"v-show",value:"note"===t.tab,expression:"tab === 'note'"}],ref:"tocTree",attrs:{nodes:t.tocTree,selected:t.selected,"node-key":"key","default-expand-all":""},on:{"update:selected":function(e){t.selected=e}},nativeOn:{click:function(e){return t.onTocClick(e)}},scopedSlots:t._u([{key:"header-heading",fn:function(e){return o("div",{staticClass:"row items-center",attrs:{"data-toc-line":e.node.heading.lineNumber}},[o("div",[t._v(t._s(e.node.label))])])}}])})],1)]),o("temlate",{attrs:{slot:"footer"},slot:"footer"},[o("section",{staticClass:"row justify-center items-center full-height"},[o("q-btn",{attrs:{label:"返回 "+t.shareNotebook.name,to:"/share/notebook/"+t.shareNotebook.id,flat:""}})],1)])],2)},l=[],u=(o("ac4d"),o("a026")),h=o("2f62"),d=o("6122"),b=o("5b48"),f=o("aafa"),m=o("787d"),p=o("3ba6"),v=o("5809");function w(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function k(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?w(Object(o),!0).forEach((function(e){i()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):w(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var O={name:"share-navi",mixins:[p["a"],v["a"]],data:function(){return{tab:"notebook",view:"notebook",notebook:"",actives:{},active:!0,selected:0}},methods:k({},Object(h["b"])({getShareNotebook:"A_GET_SHARE_NOTEBOOK"}),{init:function(){this.notebook&&this.getShareNotebook(this.notebook)},openNote:function(t){var e=[];this.$refs.note&&(e=this.$refs.note.concat());var o=!0,n=!1,a=void 0;try{for(var r,i=e[Symbol.iterator]();!(o=(r=i.next()).done);o=!0){var s=r.value,c=s.$el.id;if(c===t.id){this.setActiveNote(c);break}}}catch(l){n=!0,a=l}finally{try{o||null==i.return||i.return()}finally{if(n)throw a}}1===t.type?this.$router.push({name:"share-note",params:{id:t.id}}):this.$router.push({name:"share-markdown",params:{id:t.id}})},setActiveNote:function(t){this.actives={},this.actives["a_"+t]=!0,"default"!==t&&"all"!==t&&"star"!==t||(t="default"),console.log("current notebook",t),this.$store.commit("SET_CURRENT_NOTEBOOK_ID",t)},onAction:function(t,e){t=(new Date).getTime()+"|"+t,e&&(t+="|"+e),this.$store.commit("setNoteAction",t)},onTocClick:function(){this.selected&&("markdown"===this.view?this.onAction("action-toc",this.selected):this.onAction("note-toc-id",this.selected))},setTocSelected:function(t){var e=this.findNode(t,this.toc);e&&(this.selected=t)},findNode:function(t,e){var o=!0,n=!1,a=void 0;try{for(var r,i=e[Symbol.iterator]();!(o=(r=i.next()).done);o=!0){var s=r.value;if(s.key===t)return s;var c=s.children;if(c.length>0){var l=this.findNode(t,c);if(l)return l}}}catch(u){n=!0,a=u}finally{try{o||null==i.return||i.return()}finally{if(n)throw a}}return null},onRoute:function(t){var e=t.name;"share-notebook"===e?(this.tab="notebook",this.view="notebook",this.notebook=t.params.id,this.init()):"share-note"===e?(this.view="note",this.tab=this.shareNotes.length>0?"notebook":"note"):"share-markdown"===e&&(this.view="markdown",this.tab=this.shareNotes.length>0?"notebook":"note"),console.log("tab",this.tab)}}),computed:k({},Object(h["c"])({notebooks:"notebooks",shareNotebook:"shareNotebook",shareNotes:"shareNotes",toc:"toc",noteToc:"noteToc",shareNoteLine:"shareNoteLine"}),{tocTree:function(){var t=this;u["a"].nextTick((function(){t.$refs.tocTree.expandAll()}));var e="markdown"===this.view?this.toc:this.noteToc;return e},showFooter:function(){return this.shareNotebook.id&&"notebook"!==this.view}}),watch:{$route:function(t,e){this.onRoute(t)},shareNoteLine:function(t,e){this.setTocSelected(t)}},mounted:function(){this.onRoute(this.$route)},components:{DrawerNavi:d["a"],OSideDialog:m["a"],ONoteItem:b["a"],ONotebookAddItem:f["a"]}},g=O,y=(o("6cdf"),o("2877")),N=Object(y["a"])(g,c,l,!1,null,null,null),j=N.exports,q=o("7425"),$=o("b12a"),_=o("6907"),x=o("caa2");function C(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function D(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?C(Object(o),!0).forEach((function(e){i()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):C(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var S={name:"layout-share",mixins:[x["a"]],data:function(){return{view:"markdown",languages:_["c"],shareDrawerOpen:!1}},methods:{onFullScreen:function(){console.log("fullscreen"),$["a"].toggle()},onLanguageChanged:function(t){var e=t.value.replace("-","");this.$i18n.locale=e,localStorage.setItem("LANG",e)},langColor:function(t){return this.$i18n.locale===t?"light-blue":""},onToggleDrawer:function(){this.shareDrawerOpen=!this.shareDrawerOpen},handleAction:function(t,e){t=(new Date).getTime()+"|"+t,this.$store.commit("setNoteAction",t)},onRoute:function(t){var e=t.name;this.view="share-note"===e?"note":"share-markdown"===e?"markdown":"notebook"}},computed:D({},Object(h["c"])({shareNotes:"shareNotes",shareStatus:"shareStatus",shared:"shared"})),watch:{$route:function(t,e){this.onRoute(t)},shareStatus:function(t,e){200===t&&(this.shareDrawerOpen="notebook"===this.view&&this.shareNotes.length>0)}},mounted:function(){this.onRoute(this.$route)},components:{OCommonItem:s["a"],ShareNavi:j,ShareFooter:q["a"]}},T=S,A=(o("cbbf"),Object(y["a"])(T,n,a,!1,null,null,null));e["default"]=A.exports}}]);